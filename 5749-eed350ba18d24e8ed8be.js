"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[5749],{15749:(e,t,s)=>{s.r(t),s.d(t,{default:()=>B});var o=s(80949),n=s(36926),a=s(56858),l=s(89335),r=s(53334),i=s(75576),c=s(33283),d=s(92936),u=s(88976),m=s(4837),p=s(99656),h=s(1072),g=s(58094),k=s(90809),b=s(12798),x=s(31951),f=s(50007),S=s(81781),v=s(19201),y=s(25356),_=s(92280),j=s(40194),w=s(75720),Z=s(1780),C=s(94344),I=s(2784),A=s(38338),F=s(68774),N=s(3612),z=s(72779),E=s.n(z),L=s(52322);function P(e){if(!e)return[];const t=(0,n.q_)(e),s=[];return t.forEach((e=>{s.push({label:e.toString(),value:e})})),s}const T=()=>(0,L.jsx)(r.$_,{}),B=(0,A.ZP)((function({className:e=""}){const{t}=(0,c.$G)(),{goBack:s}=(0,c.yu)(),z=(0,I.useContext)(i.R0),{token:B}=(0,A.Fg)(),H=(0,c.lm)(),{isWebUI:V}=(0,I.useContext)(N.sG),M=(0,I.useRef)(null),R=(0,c.c_)(),[X,K]=(0,I.useState)(""),[W,$]=(0,I.useState)(""),[q,D]=(0,I.useState)({status:""}),[G,J]=(0,I.useState)(!1),O=(0,c.vI)(),[U,Y]=(0,I.useState)(""),[Q,ee]=(0,I.useState)(""),[te,se]=(0,I.useState)(-1),oe=(0,I.useMemo)((()=>P(R[X])),[R,X]),ne=(0,I.useCallback)((()=>{var e;const o=null===(e=M.current)||void 0===e?void 0:e.getFieldsValue();J(!0),(0,d.fx)({originChain:o.chain,slug:"",name:U,symbol:Q,decimals:te,priceId:o.priceId||null,minAmount:null,assetType:o.type,metadata:(0,n.ST)(o.contractAddress),multiChainAsset:null,hasValue:(0,n.nO)(R[o.chain])}).then((e=>{J(!1),e?(H({message:t("Imported token successfully")}),s()):H({message:t("An error occurred, please try again")})})).catch((()=>{J(!1),H({message:t("An error occurred, please try again")})}))}),[U,Q,te,R,H,t,s]),ae=(0,I.useCallback)((()=>""===q.status||"error"===q.status),[q.status]),le=(0,I.useCallback)(((e,s)=>new Promise(((e,n)=>{const l=[o.Ym.ERC20].includes(W)&&(0,F.u)(s),r=[o.Ym.PSP22].includes(W)&&(0,a.NJ)(s);l||r?(J(!0),(0,d.Uj)({contractAddress:s,originChain:X,type:W}).then((s=>{J(!1),s.isExist&&(D({status:"error",message:t("Existed token")}),e()),s.contractError&&(D({status:"error",message:t("Error validating this token")}),e()),s.isExist||s.contractError||(D({status:"success"}),ee(s.symbol),se(s.decimals),Y(s.name),e())})).catch((()=>{J(!1),D({status:"error",message:t("Error validating this NFT")}),e()}))):(D({status:"error"}),n(t("Invalid contract address")))}))),[X,W,t]),re=(0,I.useCallback)((()=>(0,L.jsx)(u.Z,{height:B.fontSizeXL,shape:"circle",src:l.ZP[X],width:B.fontSizeXL})),[X,B.fontSizeXL]),ie=(0,I.useCallback)((e=>{var t,s;null===(t=M.current)||void 0===t||t.setFieldValue("chain",e);const o=P(R[e]);var n,a;1===o.length?(null===(n=M.current)||void 0===n||n.setFieldValue("type",o[0].value),$(o[0].value)):(null===(a=M.current)||void 0===a||a.resetFields(["type"]),$("")),null===(s=M.current)||void 0===s||s.resetFields(["contractAddress"]),K(e),ee(""),se(-1),Y(""),D({status:""})}),[R]),ce=(0,I.useCallback)((e=>{var t,s;W!==e&&(null===(s=M.current)||void 0===s||s.resetFields(["contractAddress"]),ee(""),se(-1),Y("")),null===(t=M.current)||void 0===t||t.setFieldValue("type",e),$(e)}),[W]),de=(0,I.useCallback)(((e,t)=>{const s=t.toLowerCase();return e.name.toLowerCase().includes(s)}),[]),ue=(0,I.useCallback)(((e,t)=>(0,L.jsx)(m.Z,{name:e.name,networkKey:e.slug,networkMainLogoShape:"circle",networkMainLogoSize:28,rightItem:t&&(0,L.jsx)(p.Z,{customSize:"20px",iconColor:B.colorSuccess,phosphorIcon:w.Z,type:"phosphor",weight:"fill"})})),[B]),me=(0,I.useCallback)((e=>(0,L.jsx)("div",{className:"import_token__selected_option",children:e.name})),[]),pe=(0,I.useCallback)(((e,t)=>(0,L.jsx)(h.Z,{className:"token-type-item",leftItemIcon:(0,L.jsx)(g.Z,{backgroundColor:"var(--token-type-icon-bg-color)",iconColor:"var(--token-type-icon-color)",phosphorIcon:Z.Z,size:"sm",weight:"fill"}),name:e.label,rightItem:t&&(0,L.jsx)(p.Z,{iconColor:"var(--token-selected-icon-color)",phosphorIcon:w.Z,size:"sm",weight:"fill"})})),[]),he=(0,I.useCallback)((e=>(0,L.jsx)("div",{className:"token_import__selected_option",children:e.label})),[]),ge=(0,I.useCallback)((()=>{var e;const t=null===(e=M.current)||void 0===e?void 0:e.getFieldValue("contractAddress"),s=(0,F.u)(t)?"ethereum":"polkadot";return(0,L.jsx)(j.Z,{identPrefix:42,size:B.fontSizeXL,theme:s,value:t})}),[B.fontSizeXL]);return(0,I.useEffect)((()=>{O(X)}),[O,X]),(0,L.jsx)(r.FE,{className:`import_token ${e}`,resolve:z.awaitStores(["nft"]),children:(0,L.jsxs)(r.Ar.Base,{withSideMenu:!0,onBack:s,rightFooterButton:{block:!0,disabled:ae(),icon:(0,L.jsx)(p.Z,{phosphorIcon:C.Z,weight:"fill"}),loading:G,onClick:ne,children:t("Import")},title:t("Import token"),children:[(0,L.jsx)(k.Z,{background:"transparent",onBack:s,showBackButton:!0,title:t("Import token"),center:!V}),(0,L.jsxs)("div",{className:E()("import_token__container",{"__web-ui":V}),children:[(0,L.jsxs)(b.Z,{initialValues:{contractAddress:"",chain:"",type:""},name:"token-import",ref:M,children:[(0,L.jsx)(b.Z.Item,{name:"chain",children:(0,L.jsx)(x.Z,{className:e,id:"import-nft-select-chain",itemKey:"slug",items:Object.values(R),label:t("Network"),onSelect:ie,placeholder:t("Select network"),prefix:""!==X&&re(),renderItem:ue,renderSelected:me,renderWhenEmpty:T,searchFunction:de,searchMinCharactersCount:2,searchPlaceholder:"Search chain",selected:X,title:t("Select network")})}),(0,L.jsx)(b.Z.Item,{name:"type",children:(0,L.jsx)(x.Z,{className:e,disabled:""===X,id:"import-token-select-type",itemKey:"value",items:oe,label:t("Token type"),onSelect:ce,placeholder:t("Select token type"),renderItem:pe,renderSelected:he,selected:W,title:t("Select token type")})}),(0,L.jsx)(b.Z.Item,{name:"contractAddress",rules:[{validator:le}],statusHelpAsTooltip:!0,children:(0,L.jsx)(r.Jg,{disabled:""===W,label:t("Contract address"),showScanner:!0})}),(0,L.jsxs)(f.Z,{className:"token-symbol-decimals",gutter:B.margin,children:[(0,L.jsx)(S.Z,{span:12,children:(0,L.jsx)(v.Z,{content:Q,placeholder:t("Symbol"),prefix:ge(),tooltip:t("Symbol"),tooltipPlacement:"topLeft"})}),(0,L.jsx)(S.Z,{span:12,children:(0,L.jsx)(v.Z,{content:-1===te?"":te,placeholder:t("Decimals"),tooltip:t("Decimals"),tooltipPlacement:"topLeft"})})]}),(0,L.jsx)(b.Z.Item,{name:"priceId",statusHelpAsTooltip:!0,children:(0,L.jsx)(y.Z,{disabled:""===W,placeholder:t("Price Id"),tooltip:t("Price Id")})}),(0,L.jsx)(b.Z.Item,{help:q.message,validateStatus:q.status})]}),V&&(0,L.jsx)("div",{className:"action-wrapper",children:(0,L.jsx)(_.Z,{block:!0,disabled:ae(),icon:(0,L.jsx)(p.Z,{phosphorIcon:C.Z,weight:"fill"}),loading:G,onSubmit:ne,children:t("Save")})})]})]})})})).withConfig({displayName:"FungibleTokenImport",componentId:"sc-1qamwgi-0"})((({theme:{token:e}})=>({".import_token__container":{paddingTop:e.padding,marginLeft:e.margin,marginRight:e.margin,"&.__web-ui":{width:"60%",margin:"0 auto"}},".import_token__selected_option":{color:e.colorTextHeading},".ant-field-container.ant-field-size-medium .ant-field-wrapper":{padding:e.paddingSM},".token-symbol-decimals":{marginBottom:e.margin},".token-type-item":{"--token-type-icon-bg-color":e["orange-6"],"--token-type-icon-color":e.colorWhite,"--token-selected-icon-color":e.colorSuccess,".ant-web3-block-right-item":{marginRight:0}},".token_import__selected_option":{fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorText}})))}}]);