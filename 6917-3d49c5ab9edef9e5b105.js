"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[6917],{16917:(e,t,o)=>{o.r(t),o.d(t,{default:()=>_});var n=o(25601),i=o(53101),s=o(76412),a=o(61224),l=o(3612),c=o(53483),r=o(47088),u=o(92936),d=o(11383),p=o(12162),h=o(90809),g=o(99656),C=o(17446),b=o(90727),f=o(77180),k=o(59513),m=o(55436),w=o(12574),A=o(39359),B=o(2784),M=o(21427),y=o(35185),v=o(73557),x=o(38338),T=o(68774),E=o(52322);function j(e){const t=e.accountAuthType;return"evm"===t?e.isAllowedMap?Object.entries(e.isAllowedMap).filter((([e,t])=>t&&(0,T.u)(e))).length:0:"substrate"===t?e.isAllowedMap?Object.entries(e.isAllowedMap).filter((([e,t])=>t&&!(0,T.u)(e))).length:0:Object.values(e.isAllowedMap).filter((e=>e)).length}const S="actionModalId",Z="manage-website-access-filter-id";var I;!function(e){e.SUBSTRATE="substrate",e.ETHEREUM="ethereum",e.BLOCKED="blocked",e.Connected="connected"}(I||(I={}));const _=(0,x.ZP)((function({className:e=""}){const t=(0,y.v9)((e=>e.settings.authUrls)),{activeModal:o,inactiveModal:T}=(0,B.useContext)(p.t),{t:_}=(0,M.$)(),{isWebUI:F}=(0,B.useContext)(l.sG),N=(0,v.s0)(),O=(0,r.Z)().goBack,{token:U}=(0,x.Fg)(),{filterSelectionMap:D,onApplyFilter:R,onChangeFilterOption:L,onCloseFilterModal:W,selectedFilters:z}=(0,c.R)(Z),Y=(0,B.useMemo)((()=>e=>{if(!z.length)return!0;for(const t of z)if(t===I.SUBSTRATE){if("substrate"===e.accountAuthType||"both"===e.accountAuthType)return!0}else if(t===I.ETHEREUM){if("evm"===e.accountAuthType||"both"===e.accountAuthType)return!0}else if(t===I.BLOCKED){if(!e.isAllowed)return!0}else if(t===I.Connected&&e.isAllowed)return!0;return!1}),[z]),H=(0,B.useCallback)((()=>{o(Z)}),[o]),K=(0,B.useMemo)((()=>[{label:_("Substrate dApp"),value:I.SUBSTRATE},{label:_("Ethereum dApp"),value:I.ETHEREUM},{label:_("Blocked dApp"),value:I.BLOCKED},{label:_("Connected dApp"),value:I.Connected}]),[_]),P=(0,B.useMemo)((()=>function(e){return Object.values(e)}(t)),[t]),$=(0,B.useCallback)((()=>{o(S)}),[o]),G=(0,B.useCallback)((()=>{T(S)}),[T]),V=(0,B.useMemo)((()=>[{key:"forget-all",icon:b.Z,iconBackgroundColor:U.colorWarning,title:_("Forget all"),onClick:()=>{(0,u.jO)(d.NY).catch(console.error),G()}},{key:"disconnect-all",icon:f.Z,iconBackgroundColor:U["gray-3"],title:_("Disconnect all"),onClick:()=>{(0,u.Io)(!1,d.NY).catch(console.error),G()}},{key:"connect-all",icon:k.Z,iconBackgroundColor:U["green-6"],title:_("Connect all"),onClick:()=>{(0,u.Io)(!0,d.NY).catch(console.error),G()}}]),[G,_,U]),X=(0,B.useCallback)((e=>()=>{N("/settings/dapp-access-edit",{state:{siteName:e.origin,origin:e.id,accountAuthType:e.accountAuthType||""}})}),[N]),q=(0,B.useCallback)((e=>(0,E.jsx)(a.M,{accountCount:j(e),className:"__item",domain:e.id,onClick:X(e),siteName:e.origin||e.id},e.id)),[X]),J=(0,B.useCallback)((()=>(0,E.jsx)(i.Z,{emptyMessage:_("Your list of approved dApps will appear here."),emptyTitle:_("No dApps found"),phosphorIcon:m.Z})),[_]),Q=(0,B.useCallback)(((e,t)=>{var o,n;const i=t.toLowerCase();return(null===(o=e.origin)||void 0===o?void 0:o.toLowerCase().includes(i))||(null===(n=e.id)||void 0===n?void 0:n.toLowerCase().includes(i))}),[]);return(0,E.jsx)(n.FE,{className:`manage-website-access ${e}`,children:(0,E.jsxs)(n.Ar.Base,{withSideMenu:!0,children:[F?(0,E.jsx)(h.Z,{background:"transparent",center:!1,onBack:O,rightButtons:[{icon:(0,E.jsx)(g.Z,{customSize:"24px",phosphorIcon:w.Z,type:"phosphor",weight:"bold"}),onClick:$}],showBackButton:!0,title:_("Manage website access")}):(0,E.jsx)(h.Z,{background:"transparent",center:!0,onBack:O,paddingVertical:!0,rightButtons:[{icon:(0,E.jsx)(g.Z,{customSize:"24px",phosphorIcon:w.Z,type:"phosphor",weight:"bold"}),onClick:$}],showBackButton:!0,title:_("Manage website access")}),(0,E.jsx)(C.Z.Section,{actionBtnIcon:(0,E.jsx)(g.Z,{phosphorIcon:A.Z}),enableSearchInput:!0,filterBy:Y,list:P,onClickActionBtn:H,renderItem:q,renderWhenEmpty:J,searchFunction:Q,searchMinCharactersCount:2,searchPlaceholder:_("Search or enter a website"),showActionBtn:!0}),(0,E.jsx)(s.W,{actions:V,id:S,onCancel:G,title:_("Access configuration")}),(0,E.jsx)(n.Dd,{id:Z,onApplyFilter:R,onCancel:W,onChangeOption:L,optionSelectionMap:D,options:K,title:_("Filter")})]})})})).withConfig({displayName:"ManageWebsiteAccess",componentId:"sc-mezssz-0"})((({theme:{token:e}})=>({height:"100%",backgroundColor:e.colorBgDefault,display:"flex",flexDirection:"column",".ant-sw-list-section":{paddingTop:e.padding,flex:1,marginBottom:e.margin},".ant-sw-list-section .ant-sw-list":{paddingBottom:0},".__item + .__item":{marginTop:e.marginXS}})))}}]);