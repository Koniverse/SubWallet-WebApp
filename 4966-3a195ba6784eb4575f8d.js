"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[4966],{94966:(e,n,t)=>{t.r(n),t.d(n,{default:()=>S});var o=t(56858),a=t(51076),s=t(63470),r=t(29709),i=t(92936),l=t(99656),d=t(88976),c=t(92280),u=t(58094),g=t(17446),h=t(72779),p=t.n(h),m=t(89710),f=t(12604),k=t(75720),x=t(2784),b=t(96217),w=t(35185),v=t(38338),j=t(89335),y=t(52322);const L=(0,y.jsx)(l.Z,{phosphorIcon:m.Z,weight:"fill"}),S=(0,v.ZP)((e=>{(0,r.IR)();const{className:n}=e,{t}=(0,b.$)(),{goHome:h}=(0,r.yu)(),v=(0,r.Eb)(),S=(0,r.u4)(),C=(0,r.Hz)(s.kc),{accounts:H}=(0,w.v9)((e=>e.accountState)),[N,Z]=(0,x.useState)(!0),E=(0,x.useMemo)((()=>v.map((e=>({name:e.displayName,slug:e.network})))),[v]),[M,I]=(0,x.useState)(v[0].slug),[$,A]=(0,x.useState)([]),[F,z]=(0,x.useState)(0),[T,W]=(0,x.useState)([]),[_,B]=(0,x.useState)(!1),[O,P]=(0,x.useState)(!1),q=(0,x.useMemo)((()=>v.find((e=>e.slug===M))),[M,v]),D=(0,x.useMemo)((()=>(null==q?void 0:q.displayName.replaceAll(" network",""))||"Unknown network"),[q]),{error:G,getAddress:R,isLoading:U,isLocked:X,ledger:Y,refresh:J,warning:K}=(0,r.c5)(M),Q=(0,x.useCallback)((()=>{Z(!0),W([])}),[]),V=(0,x.useCallback)((e=>{const n=e.target.value;I(n)}),[]),ee=(0,x.useCallback)(((e,n)=>()=>{e||(B(!0),z(n+1),(async()=>{const e=5*n,t=5*(n+1),o=new Array(5).fill(null);A((e=>[...e,...o]));for(let n=e;n<t;n++)try{const{address:t}=await R(n);o[n-e]={accountIndex:n,name:`Ledger ${D} ${n+1}`,address:t}}catch(e){J(),Z(!0);break}A((n=>{const a=[...n];for(let n=e;n<t;n++)a[n]=o[n-e];return a}))})().then().catch().finally((()=>B(!1))))}),[R,D,J]),ne=(0,x.useCallback)((()=>{Z(!1),F||ee(_,F)()}),[_,ee,F]),te=(0,x.useCallback)(((e,n)=>()=>{let t;e.find((e=>e.address===n.address))?t=e.filter((e=>e.address!==n.address)):(t=[...e],t.push(n)),W(t)}),[]),oe=(0,x.useCallback)((e=>(n,t)=>{if(!n)return(0,y.jsx)(a.Y0,{direction:"vertical"},t);const s=!!e.find((e=>e.address===n.address)),r=(0,o.k1)(n.address,42),i=!!H.find((e=>e.address===r));return(0,y.jsx)(a.HL,{accountName:n.name,address:n.address,className:p()({disabled:i}),direction:"vertical",genesisHash:null==q?void 0:q.genesisHash,isSelected:s||i,onClick:i?void 0:te(e,n),showUnselectIcon:!0},n.address)}),[H,te,null==q?void 0:q.genesisHash]),ae=(0,x.useCallback)((()=>{T.length&&q&&(P(!0),setTimeout((()=>{(0,i.dS)({accounts:T.map((e=>({accountIndex:e.accountIndex,address:e.address,addressOffset:0,genesisHash:q.genesisHash,hardwareType:"ledger",name:e.name})))}).then((()=>{S()})).catch((e=>{console.log(e)})).finally((()=>{P(!1)}))}),300))}),[T,q,S]);(0,x.useEffect)((()=>{W([]),A([]),z(0)}),[Y]);const se=!X&&!U&&!!Y;return(0,y.jsx)(a.FE,{className:p()(n),children:(0,y.jsx)(a.Ar.WithSubHeaderOnly,{onBack:N?C:Q,rightFooterButton:{children:t("Connect Ledger device"),icon:L,disabled:!se||!N&&!T.length,onClick:N?ne:ae,loading:O},subHeaderIcons:[{icon:(0,y.jsx)(a.Tw,{}),onClick:h}],title:t("Connect Ledger device"),children:(0,y.jsxs)("div",{className:p()("container"),children:[(0,y.jsx)("div",{className:"sub-title",children:t("Connect and unlock your Ledger, then open the DApps on your Ledger.")}),N&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"logo",children:(0,y.jsx)(a.qB,{leftLogo:(0,y.jsx)(d.Z,{height:56,shape:"squircle",src:j.ZP.subwallet,width:56}),rightLogo:(0,y.jsx)(d.Z,{height:56,shape:"squircle",src:j.ZP.ledger,width:56})})}),(0,y.jsx)(a.oT,{items:E,label:t("Select network"),onChange:V,value:M}),(0,y.jsx)(c.Z,{block:!0,className:p()("ledger-button",{connected:se,loading:U}),contentAlign:"left",icon:(0,y.jsx)(u.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:se?m.Z:f.Z,size:"sm",weight:"fill"}),onClick:J,schema:"secondary",children:(0,y.jsxs)("div",{className:"ledger-button-content",children:[(0,y.jsx)("span",{className:"ledger-info-text",children:t(se?"Connected ledger":K?"Please unlock your Ledger":G||(Y?"Waiting":"Searching Ledger device"))}),se&&(0,y.jsx)(l.Z,{className:"check-icon",phosphorIcon:k.Z,size:"md",weight:"fill"})]})})]}),!N&&(0,y.jsx)(g.Z.Section,{className:"list-container",displayRow:!0,list:$,pagination:{hasMore:!_,loadMore:ee(_,F)},renderItem:oe(T),renderOnScroll:!1,rowGap:"var(--list-gap)"})]})})})})).withConfig({displayName:"ConnectLedger",componentId:"sc-1o5hc6q-0"})((({theme:{token:e}})=>({"--list-gap":e.sizeXS,".ant-sw-screen-layout-body":{overflow:"hidden"},".container":{padding:`${e.padding}px ${e.padding}px 0`,overflow:"hidden",height:"100%",display:"flex",flexDirection:"column"},".sub-title":{padding:`0 ${e.padding}px`,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextDescription,textAlign:"center"},".logo":{margin:`${e.controlHeightLG}px 0`,"--logo-size":e.controlHeightLG+e.controlHeightXS,".dual-logo-container":{marginBottom:0,padding:0}},".ledger-button-content":{marginLeft:e.marginSM,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flex:1,overflow:"hidden"},".ledger-info-text":{overflow:"hidden",textOverflow:"ellipsis"},".ledger-button":{marginTop:e.margin-2,padding:`0 ${e.paddingSM}px`,"--icon-bg-color":e["gray-4"],"&.connected":{"--icon-bg-color":e["green-6"]}},".check-icon":{color:e.colorSuccess},".list-container":{margin:`${e.margin}px -${e.margin}px 0`,flex:1},".ant-sw-list":{".ant-web3-block":{display:"flex",overflow:"visible","&.disabled":{opacity:.4,cursor:"not-allowed"}},".ant-account-item":{paddingTop:e.paddingSM,paddingBottom:e.paddingSM}},".loading":{".anticon":{animation:"spinner-loading 1s infinite linear"}}})))},12604:(e,n,t)=>{t.d(n,{Z:()=>d});var o=t(2784),a=t(21890),s=t(76712),r=new Map;r.set("bold",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),r.set("duotone",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),r.set("fill",(function(){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M232,128A104,104,0,1,1,84.7,33.4a8.1,8.1,0,0,1,10.6,4,8,8,0,0,1-4,10.6,88,88,0,1,0,73.4,0,8,8,0,0,1-4-10.6,8.1,8.1,0,0,1,10.6-4A104.4,104.4,0,0,1,232,128Z"}))})),r.set("light",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),r.set("thin",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),r.set("regular",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var i=function(e,n){return(0,a._)(e,n,r)},l=(0,o.forwardRef)((function(e,n){return o.createElement(s.Z,Object.assign({ref:n},e,{renderPath:i}))}));l.displayName="CircleNotch";const d=l}}]);