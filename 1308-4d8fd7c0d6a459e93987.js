"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[1308,3738],{13738:(e,n,t)=>{t.r(n),t.d(n,{TransactionContext:()=>y,default:()=>w});var a=t(9661),r=t(31101),o=t(11637),s=t(87574),i=t(75576),l=t(33283),c=t(12162),d=t(90809),u=t(72779),m=t.n(u),h=t(2784),p=t(35185),f=t(73557),k=t(38338),x=t(68774),g=t(52322);const y=h.createContext({transactionType:a.Vv.TRANSFER_BALANCE,from:"",setFrom:e=>{},chain:"",setChain:e=>{},asset:"",setAsset:e=>{},onDone:e=>{},onClickRightBtn:()=>{},setShowRightBtn:e=>{},setDisabledRightBtn:e=>{}}),w=(0,k.ZP)((function({className:e}){const{t:n}=(0,l.$G)(),t=(0,f.TH)(),u=(0,f.s0)(),{activeModal:k}=(0,h.useContext)(c.t),w=(0,h.useContext)(i.R0),{currentAccount:j,isAllAccount:v}=(0,p.v9)((e=>e.accountState)),b=(0,h.useMemo)((()=>{switch(t.pathname.split("/")[2]||""){case"stake":return a.Vv.STAKING_JOIN_POOL;case"unstake":return a.Vv.STAKING_LEAVE_POOL;case"cancel-unstake":return a.Vv.STAKING_CANCEL_UNSTAKE;case"claim-reward":return a.Vv.STAKING_CLAIM_REWARD;case"withdraw":return a.Vv.STAKING_WITHDRAW;case"compound":return a.Vv.STAKING_COMPOUNDING;case"send-nft":return a.Vv.SEND_NFT;default:return a.Vv.TRANSFER_BALANCE}}),[t.pathname]),C=(0,h.useMemo)((()=>{switch(t.pathname.split("/")[2]||""){case"stake":case"unstake":case"cancel-unstake":case"claim-reward":case"withdraw":case"compound":return"/home/staking";case"send-nft":return"/home/nfts/collections";default:return"/home/tokens"}}),[t.pathname]),N=(0,h.useMemo)((()=>{const e={};for(const[t,a]of Object.entries(s.mG))e[t]=n(a);return e}),[n]);(0,l.qg)(C);const[T,E]=(0,h.useState)(v?"":(null==j?void 0:j.address)||""),[L,R]=(0,h.useState)(""),[S,_]=(0,h.useState)(""),[A,B]=(0,h.useState)(!1),[W,Z]=(0,h.useState)(!1),F=(0,l.xC)(),I=(0,h.useCallback)((()=>{u(C)}),[C,u]),O=(0,h.useCallback)((e=>{const n=(0,x.u)(T)?"ethereum":"substrate";u(`/transaction-done/${n}/${L}/${e}`,{replace:!0})}),[T,L,u]),D=(0,h.useCallback)((()=>{b===a.Vv.STAKING_JOIN_POOL&&k(o.p)}),[k,b]),M=(0,h.useMemo)((()=>A?[{disabled:W,icon:(0,g.jsx)(r.sz,{}),onClick:()=>D()}]:[]),[W,D,A]);return(0,h.useEffect)((()=>{""!==S&&F(S)}),[S,F]),(0,g.jsx)(r.Ar.Home,{showFilterIcon:!0,showTabBar:!1,children:(0,g.jsx)(y.Provider,{value:{transactionType:b,from:T,setFrom:E,chain:L,setChain:R,onDone:O,onClickRightBtn:D,setShowRightBtn:B,setDisabledRightBtn:Z,asset:S,setAsset:_},children:(0,g.jsx)(r.FE,{resolve:w.awaitStores(["chainStore","assetRegistry","balance"]),children:(0,g.jsxs)("div",{className:m()(e,"transaction-wrapper"),children:[(0,g.jsx)(d.Z,{background:"transparent",center:!0,className:"transaction-header",onBack:I,rightButtons:M,showBackButton:!0,title:N[b]}),(0,g.jsx)(f.j3,{})]})})})})})).withConfig({displayName:"Transaction",componentId:"sc-1qz55vb-0"})((({theme:e})=>{const n=e.token;return{height:"100%",display:"flex",flexDirection:"column",".transaction-header":{paddingTop:n.paddingSM,paddingBottom:n.paddingSM,flexShrink:0},".transaction-content":{flex:"1 1 400px",paddingLeft:n.padding,paddingRight:n.padding,overflow:"auto"},".transaction-footer":{display:"flex",flexWrap:"wrap",padding:`${n.paddingMD}px ${n.padding}px ${n.padding}px`,marginBottom:n.padding,gap:n.paddingXS,".error-messages":{width:"100%",color:n.colorError},".warning-messages":{width:"100%",color:n.colorWarning},".ant-btn":{flex:1},".full-width":{minWidth:"100%"}}}}))},94684:(e,n,t)=>{t.d(n,{gy:()=>u,ZL:()=>p,tc:()=>f,Xd:()=>k});var a=t(43246),r=t(96562),o=t(25690),s=t(72779),i=t.n(s),l=t(2784),c=t(38338),d=t(52322);const u=(0,c.ZP)((({bondedBalance:e,className:n,decimals:t,label:s,symbol:l})=>{const{t:u}=(0,a.Z)(),{token:m}=(0,c.Fg)();return(0,d.jsxs)(r.Z.Paragraph,{className:i()(n,"bonded-balance"),children:[(0,d.jsx)(o.Z,{decimal:t,decimalColor:m.colorTextTertiary,intColor:m.colorTextTertiary,size:14,suffix:l,unitColor:m.colorTextTertiary,value:e||0}),s||u("Bonded")]})})).withConfig({displayName:"BondedBalance",componentId:"sc-15arqr7-0"})((({theme:{token:e}})=>({display:"flex",color:e.colorTextTertiary,"&.ant-typography":{marginBottom:0},".ant-number":{marginRight:"0.3em"}})));var m=t(33283),h=t(96108);const p=(0,c.ZP)((({address:e,chain:n,className:t,label:s,onBalanceReady:u,tokenSlug:p})=>{const{t:f}=(0,a.Z)(),{token:k}=(0,c.Fg)(),{error:x,isLoading:g,nativeTokenBalance:y,nativeTokenSlug:w,tokenBalance:j}=(0,m.L5)(n,e,p);return(0,l.useEffect)((()=>{null==u||u(!g&&!x)}),[x,g,u]),e||n?(0,d.jsxs)(r.Z.Paragraph,{className:i()(t,"free-balance"),children:[s||f("Sender available balance:")," ",g&&(0,d.jsx)(h.Z,{size:14}),x&&(0,d.jsx)(r.Z.Text,{className:"error-message",children:x}),!g&&!x&&!!w&&(0,d.jsx)(o.Z,{decimal:y.decimals||18,decimalColor:k.colorTextTertiary,intColor:k.colorTextTertiary,size:14,suffix:y.symbol,unitColor:k.colorTextTertiary,value:y.value}),!g&&!x&&!!p&&p!==w&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{className:"__name",children:[" ",f("and")," "]}),(0,d.jsx)(o.Z,{decimal:(null==j?void 0:j.decimals)||18,decimalColor:k.colorTextTertiary,intColor:k.colorTextTertiary,size:14,suffix:null==j?void 0:j.symbol,unitColor:k.colorTextTertiary,value:j.value})]})]}):(0,d.jsx)(d.Fragment,{})})).withConfig({displayName:"FreeBalance",componentId:"sc-f3bkwa-0"})((({theme:{token:e}})=>({display:"flex",flexWrap:"wrap",color:e.colorTextTertiary,".error-message":{color:e.colorError},"&.ant-typography":{marginBottom:0}}))),f=(0,c.ZP)((({children:e,className:n=""})=>(0,d.jsx)("div",{className:`transaction-content ${n}`,children:e}))).withConfig({displayName:"TransactionContent",componentId:"sc-17nushy-0"})((({theme:e})=>({}))),k=(0,c.ZP)((({children:e,className:n="",errors:t,warnings:a})=>(0,d.jsxs)("div",{className:`transaction-footer ${n}`,children:[t.length>0&&(0,d.jsx)("div",{className:"error-messages",children:t.map(((e,n)=>(0,d.jsx)("div",{children:e},n)))}),a.length>0&&(0,d.jsx)("div",{className:"warning-messages",children:a.map(((e,n)=>(0,d.jsx)("div",{children:e},n)))}),e]}))).withConfig({displayName:"TransactionFooter",componentId:"sc-bpci6r-0"})((({theme:e})=>({})))},51308:(e,n,t)=>{t.r(n),t.d(n,{default:()=>A});var a=t(9661),r=t(54533),o=t(36926),s=t(56858),i=t(31101),l=t(75576),c=t(33283),d=t(92936),u=t(95798),m=t(12798),h=t(55204),p=t(92280),f=t(99656),k=t(72779),x=t.n(k),g=t(6746),y=t(58584),w=t(2784),j=t(96217),v=t(73557),b=t(38338),C=t(62197),N=t.n(C),T=t(95292),E=t(68774),L=t(94684),R=t(13738),S=t(52322),_=function(e){return e.BOND_REWARD="bond-reward",e}(_||{});const A=(0,b.ZP)((e=>{const{className:n}=e,{chain:t,type:k}=(0,v.UO)(),b=k,C=(0,v.s0)(),A=(0,w.useContext)(l.R0),{asset:B,chain:W,from:Z,onDone:F,setChain:I,setFrom:O}=(0,w.useContext)(R.TransactionContext),{currentAccount:D,isAllAccount:M}=(0,c.v9)((e=>e.accountState)),{stakingRewardMap:P}=(0,c.v9)((e=>e.staking)),{chainInfoMap:G}=(0,c.v9)((e=>e.chainStore)),V=(0,c._y)(t,b),{decimals:$,symbol:K}=(0,c.cR)(W),H=(0,w.useMemo)((()=>P.find((e=>e.chain===W&&e.address===Z&&e.type===b))),[W,Z,P,b]),X=(0,w.useMemo)((()=>P.filter((e=>e.chain===W&&e.type===b))),[W,P,b]),[z,Q]=(0,w.useState)(!0),[q,U]=(0,w.useState)(!1),[J,Y]=(0,w.useState)(!0),[ee]=m.Z.useForm(),ne=(0,w.useMemo)((()=>({from:Z,chain:W,asset:B,[_.BOND_REWARD]:!0})),[B,W,Z]),{onError:te,onSuccess:ae}=(0,c.Ls)(F),re=(0,w.useCallback)((()=>{C("/home/staking")}),[C]),oe=(0,w.useCallback)(((e,n)=>{var t;const{error:a}=(0,u.ij)(n),r=(0,u.eW)(e),o=(0,u.eW)(n),{from:s}=r;void 0!==s&&O(s),Q(a||!(null===(t=o.from)||void 0===t||t))}),[O]),{t:se}=(0,j.$)(),ie=(0,w.useCallback)((e=>{U(!0);const{[_.BOND_REWARD]:n}=e;setTimeout((()=>{(0,d.QQ)({address:Z,chain:W,bondReward:n,stakingType:b,unclaimedReward:null==H?void 0:H.unclaimedReward}).then(ae).catch(te).finally((()=>{U(!1)}))}),300)}),[W,Z,te,ae,null==H?void 0:H.unclaimedReward,b]),le=(0,c.Ey)(Z),ce=(0,w.useCallback)((e=>{const n=t||"",i=G[n];if(!i)return!1;if(e.originGenesisHash&&(0,o.zb)(i)!==e.originGenesisHash)return!1;if((0,u.W_)(e.address))return!1;if(e.isReadOnly)return!1;if((0,o.h4)(i)!==(0,E.u)(e.address))return!1;if(!V.find((n=>(0,s.Wr)(n.address,e.address))))return!1;const l=X.find((n=>(0,s.Wr)(n.address,e.address))),c=r.H_.astar.includes(n),d=r.H_.amplitude.includes(n),m=new(N())((null==l?void 0:l.unclaimedReward)||"0");return(b===a.WQ.POOLED||d)&&m.gt(T.nw)||c}),[V,G,X,t,b]);return(0,w.useEffect)((()=>{const e=(null==D?void 0:D.address)||"";e&&((0,u.W_)(e)||O(e))}),[null==D?void 0:D.address,ee,O]),(0,w.useEffect)((()=>{I(t||"")}),[I,t]),(0,w.useEffect)((()=>{setTimeout((()=>{ee.validateFields().finally(u.ZT)}),500)}),[ee]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(L.tc,{children:(0,S.jsx)(i.FE,{resolve:A.awaitStores(["staking"]),children:(0,S.jsxs)(m.Z,{className:x()(n,"form-container form-space-sm"),form:ee,initialValues:ne,onFieldsChange:oe,onFinish:ie,children:[(0,S.jsx)(m.Z.Item,{hidden:!M,name:"from",children:(0,S.jsx)(i.pK,{filter:ce})}),(0,S.jsx)(L.ZL,{address:Z,chain:W,className:"free-balance",label:se("Available balance:"),onBalanceReady:Y}),(0,S.jsx)(m.Z.Item,{children:(0,S.jsxs)(i.oB,{className:"claim-reward-meta-info",hasBackgroundWrapper:!0,children:[(0,S.jsx)(i.oB.Chain,{chain:W,label:se("Network")}),(null==H?void 0:H.unclaimedReward)&&(0,S.jsx)(i.oB.Number,{decimals:$,label:se("Reward claiming"),suffix:K,value:H.unclaimedReward})]})}),b===a.WQ.POOLED&&(0,S.jsx)(m.Z.Item,{name:_.BOND_REWARD,valuePropName:"checked",children:(0,S.jsx)(h.Z,{children:(0,S.jsx)("span",{className:"__option-label",children:se("Bond reward after claim")})})})]})})}),(0,S.jsxs)(L.Xd,{errors:[],warnings:[],children:[(0,S.jsx)(p.Z,{disabled:q,icon:(0,S.jsx)(f.Z,{phosphorIcon:g.Z,weight:"fill"}),onClick:re,schema:"secondary",children:se("Cancel")}),(0,S.jsx)(p.Z,{disabled:z||!J,icon:(0,S.jsx)(f.Z,{phosphorIcon:y.Z,weight:"fill"}),loading:q,onClick:le(ee.submit),children:se("Continue")})]})]})})).withConfig({displayName:"ClaimReward",componentId:"sc-1xc3rai-0"})((({theme:{token:e}})=>({".unstaked-field, .free-balance":{marginBottom:e.marginXS},".meta-info":{marginTop:e.paddingSM},".cancel-unstake-info-item > .__col":{flex:"initial",paddingRight:e.paddingXXS},".claim-reward-meta-info":{marginTop:e.marginXXS},".ant-checkbox-wrapper":{display:"flex",alignItems:"center",".ant-checkbox":{top:0}}})))},58584:(e,n,t)=>{t.d(n,{Z:()=>c});var a=t(2784),r=t(21890),o=t(76712),s=new Map;s.set("bold",(function(e){return a.createElement(a.Fragment,null,a.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),a.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),a.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),s.set("duotone",(function(e){return a.createElement(a.Fragment,null,a.createElement("circle",{cx:"128",cy:"128",r:"96",opacity:"0.2"}),a.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),a.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),a.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),s.set("fill",(function(){return a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.2,104.2,0,0,0,128,24Zm47.4,107.1a8.7,8.7,0,0,1-1.8,2.6l-33.9,33.9a7.6,7.6,0,0,1-5.6,2.3,7.8,7.8,0,0,1-5.7-2.3,8,8,0,0,1,0-11.3L148.7,136H88a8,8,0,0,1,0-16h60.7L128.4,99.7a8,8,0,0,1,11.3-11.3l33.9,33.9a8.7,8.7,0,0,1,1.8,2.6A8.3,8.3,0,0,1,175.4,131.1Z"}))})),s.set("light",(function(e){return a.createElement(a.Fragment,null,a.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),a.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),a.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),s.set("thin",(function(e){return a.createElement(a.Fragment,null,a.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),a.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),a.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),s.set("regular",(function(e){return a.createElement(a.Fragment,null,a.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),a.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),a.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var i=function(e,n){return(0,r._)(e,n,s)},l=(0,a.forwardRef)((function(e,n){return a.createElement(o.Z,Object.assign({ref:n},e,{renderPath:i}))}));l.displayName="ArrowCircleRight";const c=l}}]);