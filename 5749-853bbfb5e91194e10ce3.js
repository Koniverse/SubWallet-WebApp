"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[5749],{15749:(e,t,s)=>{s.r(t),s.d(t,{default:()=>B});var o=s(80949),n=s(36926),a=s(56858),l=s(25601),r=s(75576),i=s(3612),c=s(33283),d=s(92936),u=s(19138),m=s(4837),p=s(99656),h=s(1072),g=s(58094),k=s(90809),b=s(12798),f=s(31951),x=s(50007),S=s(81781),v=s(19201),y=s(25356),_=s(92280),j=s(74704),w=s(72779),C=s.n(w),Z=s(75720),I=s(1780),A=s(94344),z=s(2784),F=s(35185),L=s(38338),N=s(68774),E=s(52322);function P(e){if(!e)return[];const t=(0,n.q_)(e),s=[];return t.forEach((e=>{s.push({label:e.toString(),value:e})})),s}const T=()=>(0,E.jsx)(l.$_,{}),B=(0,L.ZP)((function({className:e=""}){const{t}=(0,c.$G)(),{goBack:s}=(0,c.yu)(),w=(0,z.useContext)(r.R0),B=(0,F.v9)((e=>e.settings.logoMaps.chainLogoMap)),{token:H}=(0,L.Fg)(),M=(0,c.lm)(),{isWebUI:V}=(0,z.useContext)(i.sG),R=(0,z.useRef)(null),X=(0,c.c_)(),[D,K]=(0,z.useState)(""),[W,$]=(0,z.useState)(""),[q,G]=(0,z.useState)({status:""}),[J,O]=(0,z.useState)(!1),U=(0,c.vI)(),[Y,Q]=(0,z.useState)(""),[ee,te]=(0,z.useState)(""),[se,oe]=(0,z.useState)(-1),ne=(0,z.useMemo)((()=>P(X[D])),[X,D]),ae=(0,z.useCallback)((()=>{var e;const o=null===(e=R.current)||void 0===e?void 0:e.getFieldsValue();O(!0),(0,d.fx)({originChain:o.chain,slug:"",name:Y,symbol:ee,decimals:se,priceId:o.priceId||null,minAmount:null,assetType:o.type,metadata:(0,n.ST)(o.contractAddress),multiChainAsset:null,hasValue:(0,n.nO)(X[o.chain]),icon:"default.png"}).then((e=>{O(!1),e?(M({message:t("Imported token successfully")}),s()):M({message:t("An error occurred, please try again")})})).catch((()=>{O(!1),M({message:t("An error occurred, please try again")})}))}),[Y,ee,se,X,M,t,s]),le=(0,z.useCallback)((()=>""===q.status||"error"===q.status),[q.status]),re=(0,z.useCallback)(((e,s)=>new Promise(((e,n)=>{const l=[o.Ym.ERC20].includes(W)&&(0,N.u)(s),r=[o.Ym.PSP22].includes(W)&&(0,a.NJ)(s);l||r?(O(!0),(0,d.Uj)({contractAddress:s,originChain:D,type:W}).then((s=>{O(!1),s.isExist&&(G({status:"error",message:t("Existed token")}),e()),s.contractError&&(G({status:"error",message:t("Error validating this token")}),e()),s.isExist||s.contractError||(G({status:"success"}),te(s.symbol),oe(s.decimals),Q(s.name),e())})).catch((()=>{O(!1),G({status:"error",message:t("Error validating this token")}),e()}))):(G({status:"error"}),n(t("Invalid contract address")))}))),[D,W,t]),ie=(0,z.useCallback)((()=>(0,E.jsx)(u.Z,{height:H.fontSizeXL,shape:"circle",src:B[D],width:H.fontSizeXL})),[B,D,H.fontSizeXL]),ce=(0,z.useCallback)((e=>{var t,s;null===(t=R.current)||void 0===t||t.setFieldValue("chain",e);const o=P(X[e]);var n,a;1===o.length?(null===(n=R.current)||void 0===n||n.setFieldValue("type",o[0].value),$(o[0].value)):(null===(a=R.current)||void 0===a||a.resetFields(["type"]),$("")),null===(s=R.current)||void 0===s||s.resetFields(["contractAddress"]),K(e),te(""),oe(-1),Q(""),G({status:""})}),[X]),de=(0,z.useCallback)((e=>{var t,s;W!==e&&(null===(s=R.current)||void 0===s||s.resetFields(["contractAddress"]),te(""),oe(-1),Q("")),null===(t=R.current)||void 0===t||t.setFieldValue("type",e),$(e)}),[W]),ue=(0,z.useCallback)(((e,t)=>{const s=t.toLowerCase();return e.name.toLowerCase().includes(s)}),[]),me=(0,z.useCallback)(((e,t)=>(0,E.jsx)(m.Z,{name:e.name,networkKey:e.slug,networkMainLogoShape:"circle",networkMainLogoSize:28,rightItem:t&&(0,E.jsx)(p.Z,{customSize:"20px",iconColor:H.colorSuccess,phosphorIcon:Z.Z,type:"phosphor",weight:"fill"})})),[H]),pe=(0,z.useCallback)((e=>(0,E.jsx)("div",{className:"import_token__selected_option",children:e.name})),[]),he=(0,z.useCallback)(((e,t)=>(0,E.jsx)(h.Z,{className:"token-type-item",leftItemIcon:(0,E.jsx)(g.Z,{backgroundColor:"var(--token-type-icon-bg-color)",iconColor:"var(--token-type-icon-color)",phosphorIcon:I.Z,size:"sm",weight:"fill"}),name:e.label,rightItem:t&&(0,E.jsx)(p.Z,{iconColor:"var(--token-selected-icon-color)",phosphorIcon:Z.Z,size:"sm",weight:"fill"})})),[]),ge=(0,z.useCallback)((e=>(0,E.jsx)("div",{className:"token_import__selected_option",children:e.label})),[]),ke=(0,z.useCallback)((()=>{var e;const t=null===(e=R.current)||void 0===e?void 0:e.getFieldValue("contractAddress"),s=(0,N.u)(t)?"ethereum":"polkadot";return(0,E.jsx)(j.Z,{identPrefix:42,size:H.fontSizeXL,theme:s,value:t})}),[H.fontSizeXL]);return(0,z.useEffect)((()=>{U(D)}),[U,D]),(0,E.jsx)(l.FE,{className:`import_token ${e}`,resolve:w.awaitStores(["assetRegistry"]),children:(0,E.jsxs)(l.Ar.Base,{onBack:s,rightFooterButton:{block:!0,disabled:le(),icon:(0,E.jsx)(p.Z,{phosphorIcon:A.Z,weight:"fill"}),loading:J,onClick:ae,children:t("Import token")},title:t("Import token"),withSideMenu:!0,children:[(0,E.jsx)(k.Z,{background:"transparent",center:!V,onBack:s,showBackButton:!0,title:t("Import token")}),(0,E.jsxs)("div",{className:C()("import_token__container",{"__web-ui":V}),children:[(0,E.jsxs)(b.Z,{initialValues:{contractAddress:"",chain:"",type:""},name:"token-import",ref:R,children:[(0,E.jsx)(b.Z.Item,{name:"chain",children:(0,E.jsx)(f.Z,{className:e,id:"import-nft-select-chain",itemKey:"slug",items:Object.values(X),label:t("Network"),onSelect:ce,placeholder:t("Select network"),prefix:""!==D&&ie(),renderItem:me,renderSelected:pe,renderWhenEmpty:T,searchFunction:ue,searchMinCharactersCount:2,searchPlaceholder:"Search network",selected:D,title:t("Select network")})}),(0,E.jsx)(b.Z.Item,{name:"type",children:(0,E.jsx)(f.Z,{className:e,disabled:""===D,id:"import-token-select-type",itemKey:"value",items:ne,label:t("Token type"),onSelect:de,placeholder:t("Select token type"),renderItem:he,renderSelected:ge,selected:W,title:t("Select token type")})}),(0,E.jsx)(b.Z.Item,{name:"contractAddress",rules:[{validator:re}],statusHelpAsTooltip:!0,children:(0,E.jsx)(l.Jg,{...q.status&&"validating"!==q.status?{statusHelp:q.message,status:q.status}:{},disabled:""===W,label:t("Contract address"),showScanner:!0})}),(0,E.jsxs)(x.Z,{className:"token-symbol-decimals",gutter:H.margin,children:[(0,E.jsx)(S.Z,{span:12,children:(0,E.jsx)(v.Z,{content:ee,placeholder:t("Symbol"),prefix:ke(),tooltip:t("Symbol"),tooltipPlacement:"topLeft"})}),(0,E.jsx)(S.Z,{span:12,children:(0,E.jsx)(v.Z,{content:-1===se?"":se,placeholder:t("Decimals"),tooltip:t("Decimals"),tooltipPlacement:"topLeft"})})]}),(0,E.jsx)(b.Z.Item,{name:"priceId",statusHelpAsTooltip:!0,children:(0,E.jsx)(y.Z,{disabled:""===W,placeholder:t("Price ID"),tooltip:t("Price ID")})})]}),V&&(0,E.jsx)("div",{className:"action-wrapper",children:(0,E.jsx)(_.Z,{block:!0,children:t("Save"),disabled:le(),icon:(0,E.jsx)(p.Z,{phosphorIcon:A.Z,weight:"fill"}),loading:J,onSubmit:ae})})]})]})})})).withConfig({displayName:"FungibleTokenImport",componentId:"sc-1qamwgi-0"})((({theme:{token:e}})=>({".import_token__container":{paddingTop:e.padding,marginLeft:e.margin,marginRight:e.margin,"&.__web-ui":{width:"60%",margin:"0 auto"}},".import_token__selected_option":{color:e.colorTextHeading},".ant-field-container.ant-field-size-medium .ant-field-wrapper":{padding:e.paddingSM},".token-symbol-decimals":{marginBottom:e.margin},".token-type-item":{"--token-type-icon-bg-color":e["orange-6"],"--token-type-icon-color":e.colorWhite,"--token-selected-icon-color":e.colorSuccess,".ant-web3-block-right-item":{marginRight:0}},".token_import__selected_option":{fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorText}})))}}]);