"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[4966],{94966:(e,n,t)=>{t.r(n),t.d(n,{default:()=>S});var a=t(56858),o=t(53334),s=t(13825),r=t(33283),i=t(92936),l=t(99656),d=t(88976),c=t(92280),u=t(58094),g=t(17446),h=t(72779),p=t.n(h),m=t(89710),f=t(12604),k=t(75720),b=t(2784),w=t(96217),x=t(35185),v=t(38338),j=t(89335),L=t(3612),C=t(52322);const y=(0,C.jsx)(l.Z,{phosphorIcon:m.Z,weight:"fill"}),S=(0,v.ZP)((e=>{(0,r.IR)();const{className:n}=e,{isWebUI:t}=(0,b.useContext)(L.sG),{t:h}=(0,w.$)(),{goHome:v}=(0,r.yu)(),S=(0,r.Eb)(),H=(0,r.u4)(),N=(0,r.Hz)(s.kc),{accounts:Z}=(0,x.v9)((e=>e.accountState)),[E,M]=(0,b.useState)(!0),I=(0,b.useMemo)((()=>S.map((e=>({name:e.displayName,slug:e.network})))),[S]),[_,$]=(0,b.useState)(S[0].slug),[A,B]=(0,b.useState)([]),[F,T]=(0,b.useState)(0),[W,z]=(0,b.useState)([]),[P,q]=(0,b.useState)(!1),[D,G]=(0,b.useState)(!1),O=(0,b.useMemo)((()=>S.find((e=>e.slug===_))),[_,S]),R=(0,b.useMemo)((()=>(null==O?void 0:O.displayName.replaceAll(" network",""))||"Unknown network"),[O]),{error:U,getAddress:X,isLoading:V,isLocked:Y,ledger:J,refresh:K,warning:Q}=(0,r.c5)(_),ee=(0,b.useCallback)((()=>{M(!0),z([])}),[]),ne=(0,b.useCallback)((e=>{const n=e.target.value;$(n)}),[]),te=(0,b.useCallback)(((e,n)=>()=>{e||(q(!0),T(n+1),(async()=>{const e=5*n,t=5*(n+1),a=new Array(5).fill(null);B((e=>[...e,...a]));for(let n=e;n<t;n++)try{const{address:t}=await X(n);a[n-e]={accountIndex:n,name:`Ledger ${R} ${n+1}`,address:t}}catch(e){K(),M(!0);break}B((n=>{const o=[...n];for(let n=e;n<t;n++)o[n]=a[n-e];return o}))})().then().catch().finally((()=>q(!1))))}),[X,R,K]),ae=(0,b.useCallback)((()=>{M(!1),F||te(P,F)()}),[P,te,F]),oe=(0,b.useCallback)(((e,n)=>()=>{let t;e.find((e=>e.address===n.address))?t=e.filter((e=>e.address!==n.address)):(t=[...e],t.push(n)),z(t)}),[]),se=(0,b.useCallback)((e=>(n,t)=>{if(!n)return(0,C.jsx)(o.Y0,{direction:"vertical"},t);const s=!!e.find((e=>e.address===n.address)),r=(0,a.k1)(n.address,42),i=!!Z.find((e=>e.address===r));return(0,C.jsx)(o.HL,{accountName:n.name,address:n.address,className:p()({disabled:i}),direction:"vertical",genesisHash:null==O?void 0:O.genesisHash,isSelected:s||i,onClick:i?void 0:oe(e,n),showUnselectIcon:!0},n.address)}),[Z,oe,null==O?void 0:O.genesisHash]),re=(0,b.useCallback)((()=>{W.length&&O&&(G(!0),setTimeout((()=>{(0,i.dS)({accounts:W.map((e=>({accountIndex:e.accountIndex,address:e.address,addressOffset:0,genesisHash:O.genesisHash,hardwareType:"ledger",name:e.name})))}).then((()=>{H()})).catch((e=>{console.log(e)})).finally((()=>{G(!1)}))}),300))}),[W,O,H]);(0,b.useEffect)((()=>{z([]),B([]),T(0)}),[J]);const ie=!Y&&!V&&!!J;return(0,C.jsx)(o.FE,{className:p()(n),children:(0,C.jsx)(o.Ar.Base,{onBack:E?N:ee,...t?{headerList:["Simple"],showWebHeader:!0}:{rightFooterButton:{children:h("Connect Ledger device"),icon:y,disabled:!ie||!E&&!W.length,onClick:E?ae:re,loading:D},showBackButton:!0,subHeaderPaddingVertical:!0,showSubHeader:!0,subHeaderCenter:!0,subHeaderBackground:"transparent"},subHeaderIcons:[{icon:(0,C.jsx)(o.Tw,{}),onClick:v}],title:h("Connect Ledger device"),children:(0,C.jsxs)("div",{className:p()("container",{"__web-ui":t}),children:[(0,C.jsx)("div",{className:"sub-title",children:h("Connect and unlock your Ledger, then open the DApps on your Ledger.")}),E&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"logo",children:(0,C.jsx)(o.qB,{leftLogo:(0,C.jsx)(d.Z,{height:56,shape:"squircle",src:j.ZP.subwallet,width:56}),rightLogo:(0,C.jsx)(d.Z,{height:56,shape:"squircle",src:j.ZP.ledger,width:56})})}),(0,C.jsx)(o.oT,{items:I,label:h("Select network"),onChange:ne,value:_}),(0,C.jsx)(c.Z,{block:!0,className:p()("ledger-button",{connected:ie,loading:V}),contentAlign:"left",icon:(0,C.jsx)(u.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:ie?m.Z:f.Z,size:"sm",weight:"fill"}),onClick:K,schema:"secondary",children:(0,C.jsxs)("div",{className:"ledger-button-content",children:[(0,C.jsx)("span",{className:"ledger-info-text",children:h(ie?"Connected ledger":Q?"Please unlock your Ledger":U||(J?"Waiting":"Searching Ledger device"))}),ie&&(0,C.jsx)(l.Z,{className:"check-icon",phosphorIcon:k.Z,size:"md",weight:"fill"})]})})]}),t&&(0,C.jsx)(c.Z,{className:"ledger-button",icon:y,disabled:!ie||!E&&!W.length,onClick:E?ae:re,loading:D,children:h("Connect Ledger device")}),!E&&(0,C.jsx)(g.Z.Section,{className:"list-container",displayRow:!0,list:A,pagination:{hasMore:!P,loadMore:te(P,F)},renderItem:se(W),renderOnScroll:!1,rowGap:"var(--list-gap)"})]})})})})).withConfig({displayName:"ConnectLedger",componentId:"sc-1o5hc6q-0"})((({theme:{token:e}})=>({"--list-gap":e.sizeXS,".ant-sw-screen-layout-body":{overflow:"hidden"},".__web-ui":{width:"60%",margin:"0 auto",".ledger-button":{marginTop:30}},".container":{padding:`${e.padding}px ${e.padding}px 0`,overflow:"hidden",height:"100%",display:"flex",flexDirection:"column"},".sub-title":{padding:`0 ${e.padding}px`,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextDescription,textAlign:"center"},".logo":{margin:`${e.controlHeightLG}px 0`,"--logo-size":e.controlHeightLG+e.controlHeightXS,".dual-logo-container":{marginBottom:0,padding:0}},".ledger-button-content":{marginLeft:e.marginSM,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flex:1,overflow:"hidden"},".ledger-info-text":{overflow:"hidden",textOverflow:"ellipsis"},".ledger-button":{marginTop:e.margin-2,padding:`0 ${e.paddingSM}px`,"--icon-bg-color":e["gray-4"],"&.connected":{"--icon-bg-color":e["green-6"]}},".check-icon":{color:e.colorSuccess},".list-container":{margin:`${e.margin}px -${e.margin}px 0`,flex:1},".ant-sw-list":{".ant-web3-block":{display:"flex",overflow:"visible","&.disabled":{opacity:.4,cursor:"not-allowed"}},".ant-account-item":{paddingTop:e.paddingSM,paddingBottom:e.paddingSM}},".loading":{".anticon":{animation:"spinner-loading 1s infinite linear"}}})))},12604:(e,n,t)=>{t.d(n,{Z:()=>d});var a=t(2784),o=t(21890),s=t(76712),r=new Map;r.set("bold",(function(e){return a.createElement(a.Fragment,null,a.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),r.set("duotone",(function(e){return a.createElement(a.Fragment,null,a.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),r.set("fill",(function(){return a.createElement(a.Fragment,null,a.createElement("path",{d:"M232,128A104,104,0,1,1,84.7,33.4a8.1,8.1,0,0,1,10.6,4,8,8,0,0,1-4,10.6,88,88,0,1,0,73.4,0,8,8,0,0,1-4-10.6,8.1,8.1,0,0,1,10.6-4A104.4,104.4,0,0,1,232,128Z"}))})),r.set("light",(function(e){return a.createElement(a.Fragment,null,a.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),r.set("thin",(function(e){return a.createElement(a.Fragment,null,a.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),r.set("regular",(function(e){return a.createElement(a.Fragment,null,a.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var i=function(e,n){return(0,o._)(e,n,r)},l=(0,a.forwardRef)((function(e,n){return a.createElement(s.Z,Object.assign({ref:n},e,{renderPath:i}))}));l.displayName="CircleNotch";const d=l}}]);