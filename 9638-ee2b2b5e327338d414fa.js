"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[9638],{29638:(e,o,t)=>{t.r(o),t.d(o,{default:()=>I});var s=t(25601),a=t(80118),c=t(53101),n=t(76412),l=t(47088),r=t(92936),i=t(11383),d=t(12162),u=t(58200),h=t(99656),k=t(17446),g=t(42534),p=t(15322),m=t(90727),b=t(77180),C=t(59513),f=t(86267),w=t(12574),y=t(2784),N=t(21427),Z=t(35185),A=t(73557),j=t(38338),x=t(68774),v=t(52322);const M="actionModalId";function B({accountAuthType:e,authInfo:o,className:t="",goBack:l,origin:A,siteName:B}){const I=(0,Z.v9)((e=>e.accountState.accounts)),[_,S]=(0,y.useState)({}),{activeModal:L,inactiveModal:E}=(0,y.useContext)(d.t),{t:T}=(0,N.$)(),{token:W}=(0,j.Fg)(),Y=(0,y.useMemo)((()=>{const o=I.filter((e=>"ALL"!==e.address));return"substrate"===e?o.filter((e=>!(0,x.u)(e.address))):"evm"===e?o.filter((e=>(0,x.u)(e.address))):o}),[e,I]),F=(0,y.useCallback)((()=>{L(M)}),[L]),z=(0,y.useCallback)((()=>{E(M)}),[E]),D=(0,y.useMemo)((()=>{const e=o.isAllowed,t=[{key:e?"block":"unblock",icon:e?g.Z:p.Z,iconBackgroundColor:e?W.colorError:W.colorSuccess,title:T(e?"Block this site":"Unblock this site"),onClick:()=>{(0,r.O8)(A).then((({list:e})=>{(0,i.NY)(e)})).catch(console.error),z()}},{key:"forget-site",icon:m.Z,iconBackgroundColor:W.colorWarning,title:T("Forget this site"),onClick:()=>{(0,r.hW)(A,i.NY).catch(console.error),z()}}];return e&&t.push({key:"disconnect-all",icon:b.Z,iconBackgroundColor:W["gray-3"],title:T("Disconnect all accounts"),onClick:()=>{(0,r.mp)(!1,A,i.NY).catch(console.error),z()}},{key:"connect-all",icon:C.Z,iconBackgroundColor:W["green-6"],title:T("Connect all accounts"),onClick:()=>{(0,r.mp)(!0,A,i.NY).catch(console.error),z()}}),t}),[o.isAllowed,z,A,T,W]),G=(0,y.useCallback)((e=>{const t=o.isAllowedMap[e.address];return(0,v.jsx)(a.Z,{accountName:e.name,address:e.address,avatarSize:W.sizeLG,rightItem:(0,v.jsx)(u.Z,{checked:void 0===_[e.address]?t:_[e.address],disabled:!o.isAllowed||void 0!==_[e.address],onClick:()=>{S((o=>({...o,[e.address]:!t}))),(0,r.jv)(e.address,!t,A,i.NY).catch(console.log).finally((()=>{S((o=>{const t={...o};return delete t[e.address],t}))}))},style:{marginRight:8}})},e.address)}),[o.isAllowed,o.isAllowedMap,A,_,W.sizeLG]),H=(0,y.useCallback)(((e,o)=>{const t=o.toLowerCase();return e.address.toLowerCase().includes(t)||!!e.name&&e.name.toLowerCase().includes(t)}),[]);(0,y.useEffect)((()=>{S((e=>Object.keys(e).length?{}:e))}),[o]);const O=(0,y.useCallback)((()=>(0,v.jsx)(c.Z,{emptyMessage:T("Your accounts will appear here."),emptyTitle:T("No account found"),phosphorIcon:f.Z})),[T]);return(0,v.jsx)(s.FE,{className:`manage-website-access-detail ${t}`,children:(0,v.jsxs)(s.Ar.WithSubHeaderOnly,{onBack:l,subHeaderIcons:[{icon:(0,v.jsx)(h.Z,{phosphorIcon:w.Z,size:"md",type:"phosphor",weight:"bold"}),onClick:F}],title:B||o.id,children:[(0,v.jsx)(k.Z.Section,{displayRow:!0,enableSearchInput:!0,list:Y,renderItem:G,renderWhenEmpty:O,rowGap:"8px",searchFunction:H,searchMinCharactersCount:2,searchPlaceholder:T("Search account")}),(0,v.jsx)(n.W,{actions:D,className:`${t} action-modal`,id:M,onCancel:z,title:T("dApp configuration")})]})})}const I=(0,j.ZP)((function(e){const o=(0,A.TH)(),{accountAuthType:t,origin:s,siteName:a}=o.state,c=(0,Z.v9)((e=>e.settings.authUrls[s])),n=(0,l.Z)().goBack;return(0,y.useEffect)((()=>{c||n()}),[n,c]),(0,v.jsx)(v.Fragment,{children:!!c&&(0,v.jsx)(B,{...e,accountAuthType:t,authInfo:c,goBack:n,origin:s,siteName:a})})})).withConfig({displayName:"Detail__ManageWebsiteAccessDetail",componentId:"sc-kvk64y-0"})((({theme:{token:e}})=>({".ant-sw-list-section":{height:"100%"},"&.manage-website-access-detail":{backgroundColor:e.colorBgDefault},".ant-sw-screen-layout-body":{paddingTop:e.paddingSM},"&.action-modal":{".__action-item.block .ant-setting-item-name":{color:e.colorError}}})))}}]);