"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[1550],{11550:(e,s,n)=>{n.r(s),n.d(s,{default:()=>A});var t=n(89335),i=n(25601),r=n(80855),o=n(80588),a=n(59566),l=n(68627),c=n(3612),d=n(5772),h=n(81620),u=n(28973),g=n(28347),m=n(21462),p=n(47088),x=n(92936),f=n(27178),j=n(99656),H=n(12162),b=n(19138),w=n(91593),Z=n(92280),v=n(72779),S=n.n(v),k=n(18332),y=n(8175),C=n(6746),_=n(2784),I=n(21427),N=n(38338),E=n(52322);const z=(0,E.jsx)(j.Z,{phosphorIcon:k.Z,weight:"fill"}),R="import-qr-code-scanner-modal",A=(0,N.ZP)((e=>{(0,m.Z)();const{className:s}=e,{t:n}=(0,I.$)(),{goHome:v}=(0,p.Z)(),k=(0,h.Z)(),N=(0,d.Z)(),A=(0,u.Z)(l.Rt),{inactiveModal:L}=(0,_.useContext)(H.t),{isWebUI:q}=(0,_.useContext)(c.sG),[B,D]=(0,_.useState)({}),[P,Q]=(0,_.useState)(!1),T=(0,_.useCallback)((e=>{Q(!0),L(R),D({message:"",status:"success"}),setTimeout((()=>{var s;(s=e,new Promise(((e,n)=>{(0,x.kz)(s.genesisHash,s.content).then((({isEthereum:s,isValid:t})=>{t?e(s):n(new Error("Invalid qr"))})).catch((e=>{n(e)}))}))).then((s=>{(0,x.mr)({name:k,isAllow:!0,secretKey:e.content,publicKey:e.genesisHash,isEthereum:s}).then((({errors:e,success:s})=>{s?(D({}),N()):D({message:e[0].message,status:"error"})})).catch((e=>{D({message:e.message,status:"error"})})).finally((()=>{Q(!1)}))})).catch((e=>{D({message:e.message,status:"error"}),Q(!1)}))}),300)}),[k,N,L]),{onClose:W,onError:O,onSuccess:X,openCamera:$}=(0,g.Z)(R,f.jD,D,T),G={children:n(P?"Creating":"Scan the QR code"),icon:z,onClick:$,loading:P};return(0,E.jsx)(i.FE,{className:S()(s),children:(0,E.jsx)(i.Ar.Base,{onBack:A,...q?{headerList:["Simple"],showWebHeader:!0}:{rightFooterButton:G,showBackButton:!0,subHeaderPaddingVertical:!0,showSubHeader:!0,subHeaderCenter:!0,subHeaderBackground:"transparent"},subHeaderIcons:[{icon:(0,E.jsx)(r.Z,{}),onClick:v}],title:n("Import by QR code"),children:(0,E.jsxs)("div",{className:S()("container",{"__web-ui":q}),children:[(0,E.jsx)("div",{className:"sub-title",children:n("Please make sure that you have granted SubWallet the access to your device's camera.")}),(0,E.jsx)("div",{className:"logo",children:(0,E.jsx)(o.Z,{leftLogo:(0,E.jsx)(b.Z,{height:56,shape:"squircle",src:t.ZP.subwallet,width:56}),linkIcon:(0,E.jsx)(j.Z,{phosphorIcon:y.Z,size:"md"}),rightLogo:(0,E.jsx)(b.Z,{height:56,shape:"squircle",src:t.ss.__qr_code__,width:56})})}),(0,E.jsx)("div",{className:"instruction",children:(0,E.jsxs)("div",{className:"instruction",children:[(0,E.jsxs)("span",{children:[n('Click the "Scan QR" button, or read ')," "]}),(0,E.jsx)("a",{className:"link",href:"#",children:n("this instruction")}),(0,E.jsx)("span",{children:", "}),(0,E.jsx)("span",{children:n("for more details.")})]})}),B.message&&(0,E.jsxs)("div",{className:"error-container",children:[(0,E.jsx)(j.Z,{customSize:"28px",phosphorIcon:C.Z,weight:"fill"}),(0,E.jsx)("span",{className:"error-content",children:B.message})]}),(0,E.jsx)(w.Z,{className:s,id:R,isError:!!B.status,onClose:W,onError:O,onSuccess:X,overlay:B.message&&(0,E.jsx)(a.Z,{message:B.message}),title:n("Scan QR")}),q&&(0,E.jsx)(Z.Z,{...G,className:"action"})]})})})})).withConfig({displayName:"ImportQrCode",componentId:"sc-1frgihv-0"})((({theme:{token:e}})=>({".__web-ui":{maxWidth:"400px",margin:"0 auto"},".container":{padding:e.padding,"& .ant-btn":{width:"100%",marginTop:36}},".sub-title":{padding:`0 ${e.padding}px`,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextDescription,textAlign:"center"},".logo":{margin:`${e.controlHeightLG}px 0`,"--logo-size":e.controlHeightLG+e.controlHeightXS},".instruction":{padding:`0 ${e.padding}px`,marginBottom:e.margin,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextDescription,textAlign:"center"},".link":{color:e.colorLink,textDecoration:"underline"},".error-container":{color:e.colorError,display:"flex",flexDirection:"row",alignItems:"center",marginTop:e.marginXXL-2,justifyContent:"center"},".error-content":{marginLeft:e.marginXS,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6}})))},27178:(e,s,n)=>{n.d(s,{H9:()=>d,IJ:()=>l,jD:()=>c});var t=n(36533),i=n(74076),r=n(68774),o=n(90107),a=n(94175);const l=e=>{const s=e.split(":"),n=s[0];let i="",r="",o=[],a=!1;if(n===t.fD)[i,r,...o]=s.slice(1);else{if(n!==t.jq)return null;[i,...o]=s.slice(1),r=i.split("@")[1]||"",i=i.substring(0,42),a=!0}return{content:i,genesisHash:r,isAddress:!0,isEthereum:a,name:o.length?o.join(":"):void 0,isReadOnly:!1}},c=e=>{const s=e.split(":");let n="",i="",r=[];return s[0]!==t.WI?null:([n,i,...r]=s.slice(1),{content:n,genesisHash:i,isAddress:!1,isEthereum:!1,name:r.length?r.join(":"):void 0,isReadOnly:!1})},d=e=>{if(!e)return null;if((0,r.u)(e))return{content:e,genesisHash:e,isAddress:!0,isEthereum:!0,name:void 0,isReadOnly:!0};try{return(0,i.vq)(e)?null:{content:(0,o.m)((0,a.m)(e)),genesisHash:e,isAddress:!0,isEthereum:!1,name:void 0,isReadOnly:!0}}catch(e){return console.log(e),null}}}}]);