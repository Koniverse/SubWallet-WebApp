"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[5749],{15749:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var o=s(80949),n=s(36926),l=s(56858),a=s(89335),r=s(53334),i=s(75576),c=s(33283),d=s(92936),u=s(88976),m=s(4837),p=s(99656),h=s(1072),g=s(58094),k=s(12798),b=s(31951),f=s(50007),x=s(81781),S=s(19201),y=s(25356),v=s(40194),_=s(75720),j=s(1780),C=s(94344),Z=s(2784),I=s(38338),w=s(68774),A=s(52322);function F(e){if(!e)return[];const t=(0,n.q_)(e),s=[];return t.forEach((e=>{s.push({label:e.toString(),value:e})})),s}const z=()=>(0,A.jsx)(r.$_,{}),N=(0,I.ZP)((function({className:e=""}){const{t}=(0,c.$G)(),{goBack:s}=(0,c.yu)(),N=(0,Z.useContext)(i.R0),{token:E}=(0,I.Fg)(),L=(0,c.lm)(),P=(0,Z.useRef)(null),T=(0,c.c_)(),[H,V]=(0,Z.useState)(""),[M,R]=(0,Z.useState)(""),[X,B]=(0,Z.useState)({status:""}),[K,O]=(0,Z.useState)(!1),W=(0,c.vI)(),[$,q]=(0,Z.useState)(""),[D,J]=(0,Z.useState)(""),[Y,G]=(0,Z.useState)(-1),U=(0,Z.useMemo)((()=>F(T[H])),[T,H]),Q=(0,Z.useCallback)((()=>{var e;const o=null===(e=P.current)||void 0===e?void 0:e.getFieldsValue();O(!0),(0,d.fx)({originChain:o.chain,slug:"",name:$,symbol:D,decimals:Y,priceId:o.priceId||null,minAmount:null,assetType:o.type,metadata:(0,n.ST)(o.contractAddress),multiChainAsset:null,hasValue:(0,n.nO)(T[o.chain])}).then((e=>{O(!1),e?(L({message:t("Imported token successfully")}),s()):L({message:t("An error occurred, please try again")})})).catch((()=>{O(!1),L({message:t("An error occurred, please try again")})}))}),[$,D,Y,T,L,t,s]),ee=(0,Z.useCallback)((()=>""===X.status||"error"===X.status),[X.status]),te=(0,Z.useCallback)(((e,s)=>new Promise(((e,n)=>{const a=[o.Ym.ERC20].includes(M)&&(0,w.u)(s),r=[o.Ym.PSP22].includes(M)&&(0,l.NJ)(s);a||r?(O(!0),(0,d.Uj)({contractAddress:s,originChain:H,type:M}).then((s=>{O(!1),s.isExist&&(B({status:"error",message:t("Existed token")}),e()),s.contractError&&(B({status:"error",message:t("Error validating this token")}),e()),s.isExist||s.contractError||(B({status:"success"}),J(s.symbol),G(s.decimals),q(s.name),e())})).catch((()=>{O(!1),B({status:"error",message:t("Error validating this NFT")}),e()}))):(B({status:"error"}),n(t("Invalid contract address")))}))),[H,M,t]),se=(0,Z.useCallback)((()=>(0,A.jsx)(u.Z,{height:E.fontSizeXL,shape:"circle",src:a.ZP[H],width:E.fontSizeXL})),[H,E.fontSizeXL]),oe=(0,Z.useCallback)((e=>{var t,s;null===(t=P.current)||void 0===t||t.setFieldValue("chain",e);const o=F(T[e]);var n,l;1===o.length?(null===(n=P.current)||void 0===n||n.setFieldValue("type",o[0].value),R(o[0].value)):(null===(l=P.current)||void 0===l||l.resetFields(["type"]),R("")),null===(s=P.current)||void 0===s||s.resetFields(["contractAddress"]),V(e),J(""),G(-1),q(""),B({status:""})}),[T]),ne=(0,Z.useCallback)((e=>{var t,s;M!==e&&(null===(s=P.current)||void 0===s||s.resetFields(["contractAddress"]),J(""),G(-1),q("")),null===(t=P.current)||void 0===t||t.setFieldValue("type",e),R(e)}),[M]),le=(0,Z.useCallback)(((e,t)=>{const s=t.toLowerCase();return e.name.toLowerCase().includes(s)}),[]),ae=(0,Z.useCallback)(((e,t)=>(0,A.jsx)(m.Z,{name:e.name,networkKey:e.slug,networkMainLogoShape:"circle",networkMainLogoSize:28,rightItem:t&&(0,A.jsx)(p.Z,{customSize:"20px",iconColor:E.colorSuccess,phosphorIcon:_.Z,type:"phosphor",weight:"fill"})})),[E]),re=(0,Z.useCallback)((e=>(0,A.jsx)("div",{className:"import_token__selected_option",children:e.name})),[]),ie=(0,Z.useCallback)(((e,t)=>(0,A.jsx)(h.Z,{className:"token-type-item",leftItemIcon:(0,A.jsx)(g.Z,{backgroundColor:"var(--token-type-icon-bg-color)",iconColor:"var(--token-type-icon-color)",phosphorIcon:j.Z,size:"sm",weight:"fill"}),name:e.label,rightItem:t&&(0,A.jsx)(p.Z,{iconColor:"var(--token-selected-icon-color)",phosphorIcon:_.Z,size:"sm",weight:"fill"})})),[]),ce=(0,Z.useCallback)((e=>(0,A.jsx)("div",{className:"token_import__selected_option",children:e.label})),[]),de=(0,Z.useCallback)((()=>{var e;const t=null===(e=P.current)||void 0===e?void 0:e.getFieldValue("contractAddress"),s=(0,w.u)(t)?"ethereum":"polkadot";return(0,A.jsx)(v.Z,{identPrefix:42,size:E.fontSizeXL,theme:s,value:t})}),[E.fontSizeXL]);return(0,Z.useEffect)((()=>{W(H)}),[W,H]),(0,A.jsx)(r.FE,{className:`import_token ${e}`,resolve:N.awaitStores(["nft"]),children:(0,A.jsx)(r.Ar.WithSubHeaderOnly,{onBack:s,rightFooterButton:{block:!0,disabled:ee(),icon:(0,A.jsx)(p.Z,{phosphorIcon:C.Z,weight:"fill"}),loading:K,onClick:Q,children:t("Import")},title:t("Import token"),children:(0,A.jsx)("div",{className:"import_token__container",children:(0,A.jsxs)(k.Z,{initialValues:{contractAddress:"",chain:"",type:""},name:"token-import",ref:P,children:[(0,A.jsx)(k.Z.Item,{name:"chain",children:(0,A.jsx)(b.Z,{className:e,id:"import-nft-select-chain",itemKey:"slug",items:Object.values(T),label:t("Network"),onSelect:oe,placeholder:t("Select network"),prefix:""!==H&&se(),renderItem:ae,renderSelected:re,renderWhenEmpty:z,searchFunction:le,searchMinCharactersCount:2,searchPlaceholder:"Search chain",selected:H,title:t("Select network")})}),(0,A.jsx)(k.Z.Item,{name:"type",children:(0,A.jsx)(b.Z,{className:e,disabled:""===H,id:"import-token-select-type",itemKey:"value",items:U,label:t("Token type"),onSelect:ne,placeholder:t("Select token type"),renderItem:ie,renderSelected:ce,selected:M,title:t("Select token type")})}),(0,A.jsx)(k.Z.Item,{name:"contractAddress",rules:[{validator:te}],statusHelpAsTooltip:!0,children:(0,A.jsx)(r.Jg,{disabled:""===M,label:t("Contract address"),showScanner:!0})}),(0,A.jsxs)(f.Z,{className:"token-symbol-decimals",gutter:E.margin,children:[(0,A.jsx)(x.Z,{span:12,children:(0,A.jsx)(S.Z,{content:D,placeholder:t("Symbol"),prefix:de(),tooltip:t("Symbol"),tooltipPlacement:"topLeft"})}),(0,A.jsx)(x.Z,{span:12,children:(0,A.jsx)(S.Z,{content:-1===Y?"":Y,placeholder:t("Decimals"),tooltip:t("Decimals"),tooltipPlacement:"topLeft"})})]}),(0,A.jsx)(k.Z.Item,{name:"priceId",statusHelpAsTooltip:!0,children:(0,A.jsx)(y.Z,{disabled:""===M,placeholder:t("Price Id"),tooltip:t("Price Id")})}),(0,A.jsx)(k.Z.Item,{help:X.message,validateStatus:X.status})]})})})})})).withConfig({displayName:"FungibleTokenImport",componentId:"sc-1qamwgi-0"})((({theme:{token:e}})=>({".import_token__container":{paddingTop:e.padding,marginLeft:e.margin,marginRight:e.margin},".import_token__selected_option":{color:e.colorTextHeading},".ant-field-container.ant-field-size-medium .ant-field-wrapper":{padding:e.paddingSM},".token-symbol-decimals":{marginBottom:e.margin},".token-type-item":{"--token-type-icon-bg-color":e["orange-6"],"--token-type-icon-color":e.colorWhite,"--token-selected-icon-color":e.colorSuccess,".ant-web3-block-right-item":{marginRight:0}},".token_import__selected_option":{fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorText}})))}}]);