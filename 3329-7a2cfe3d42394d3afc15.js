"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[3329],{53329:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var n=r(24358),o=r(36926),a=r(56858),i=r(25601),s=r(18488),l=r(3612),d=r(99828),c=r(43246),p=r(70497),u=r(92936),m=r(12798),h=r(99656),k=r(96108),g=r(90809),f=r(25356),x=r(50007),b=r(81781),j=r(92280),y=r(72779),L=r.n(y),Z=r(34878),w=r(34070),E=r(21218),V=r(1610),I=r(46106),v=r(2784),F=r(73557),C=r(38338),_=r(52322);const S=(0,C.ZP)((function({className:e=""}){const{t}=(0,c.Z)(),r=(0,F.s0)(),{token:y}=(0,C.Fg)(),S=(0,d.Z)(),[H]=m.Z.useForm(),{isWebUI:P}=(0,v.useContext)(l.sG),[A,M]=(0,v.useState)(!1),[W,B]=(0,v.useState)(!1),[N,T]=(0,v.useState)(!1),[R,U]=(0,v.useState)({status:""}),[D,z]=(0,v.useState)(!1),[O,X]=(0,v.useState)(""),[Y,$]=(0,v.useState)("0"),G=(0,v.useCallback)((()=>{console.log("click subheader")}),[]),q=(0,v.useCallback)((()=>{r(-1)}),[r]),J=(0,v.useCallback)((()=>"success"!==R.status),[R.status]),K=(0,v.useCallback)((()=>{M(!0);const e=H.getFieldValue("blockExplorer"),n=H.getFieldValue("crowdloanUrl"),a=H.getFieldValue("provider"),i=H.getFieldValue("decimals"),s=H.getFieldValue("symbol"),l=H.getFieldValue("addressPrefix"),d=H.getFieldValue("paraId"),c=H.getFieldValue("evmChainId"),p=H.getFieldValue("name"),m=H.getFieldValue("priceId"),h=(0,o.yH)(0),k={mode:"insert",chainEditInfo:{slug:"",currentProvider:h,providers:{[h]:a},blockExplorer:e,crowdloanUrl:n,symbol:s,chainType:W?"EVM":"Substrate",name:p,priceId:m},chainSpec:{genesisHash:O,decimals:i,addressPrefix:l,paraId:d,evmChainId:c,existentialDeposit:Y}};(0,u.YY)(k).then((e=>{M(!1),e?(S({message:t("Imported chain successfully")}),r(-1)):S({message:t("An error occurred, please try again")})})).catch((()=>{M(!1),S({message:t("An error occurred, please try again")})}))}),[Y,H,O,W,r,S,t]),Q=(0,v.useCallback)(((e,r)=>new Promise(((e,n)=>{0===r.length||(0,a.CB)(r)?e():n(new Error(t("Block explorer must be a valid URL")))}))),[t]),ee=(0,v.useCallback)(((e,r)=>new Promise(((e,n)=>{0===r.length||(0,a.CB)(r)?e():n(new Error(t("Crowdloan URL must be a valid URL")))}))),[t]),te=(0,v.useCallback)((e=>{switch(e){case n.l.CONNECTION_FAILURE:return t("Cannot connect to this provider");case n.l.EXISTED_PROVIDER:return t("This provider has already been added");case n.l.EXISTED_CHAIN:return t("This chain has already been added");default:return t("Error validating this provider")}}),[t]),re=(0,v.useCallback)(((e,r)=>new Promise(((e,n)=>{if((0,a.CB)(r)){T(!0),z(!0);const o=r.replaceAll(" ","");(0,u.t6)(o).then((t=>{z(!1),t.success&&(U({status:"success"}),t.evmChainId?(B(!0),H.setFieldValue("evmChainId",t.evmChainId),H.setFieldValue("type","EVM")):(B(!1),H.setFieldValue("addressPrefix",t.addressPrefix),H.setFieldValue("paraId",t.paraId),H.setFieldValue("type","Substrate"),X(t.genesisHash),$(t.existentialDeposit)),H.setFieldValue("decimals",t.decimals),H.setFieldValue("name",t.name),H.setFieldValue("symbol",t.symbol),e()),t.error&&(t.evmChainId?(B(!0),H.setFieldValue("evmChainId",t.evmChainId),H.setFieldValue("type","EVM")):(B(!1),H.setFieldValue("addressPrefix",t.addressPrefix),H.setFieldValue("paraId",t.paraId),H.setFieldValue("type","Substrate")),H.setFieldValue("decimals",t.decimals),H.setFieldValue("name",t.name),H.setFieldValue("symbol",t.symbol),U({status:"error",message:te(t.error)}),n(new Error(te(t.error))))})).catch((()=>{z(!1),n(new Error(t("Error validating this provider"))),U({status:"error",message:t("Error validating this provider")})}))}else n(new Error(t("Provider URL is not valid"))),U({status:""}),T(!1)}))),[H,te,t]),ne=(0,v.useCallback)((()=>N?"success"===R.status?(0,_.jsx)(h.Z,{customSize:"20px",iconColor:y.colorSuccess,phosphorIcon:Z.Z,type:"phosphor",weight:"bold"}):D?(0,_.jsx)(k.Z,{size:"20px"}):"error"===R.status?(0,_.jsx)(h.Z,{customSize:"20px",iconColor:y["gray-4"],phosphorIcon:w.Z,type:"phosphor",weight:"bold"}):(0,_.jsx)(_.Fragment,{}):(0,_.jsx)(_.Fragment,{})),[N,D,R.status,y]);(0,p.Z)(H,"provider");const oe=(0,v.useMemo)((()=>({onClick:q,children:"Cancel"})),[q]),ae=(0,v.useMemo)((()=>({block:!0,disabled:J(),icon:!P&&(0,_.jsx)(h.Z,{phosphorIcon:E.Z,type:"phosphor",weight:"fill"}),loading:A,onClick:K,children:"Save"})),[J,K,P]),ie=(0,v.useMemo)((()=>P?{title:t("Add network"),center:!1}:{title:t("Import chain"),center:!0,rightButtons:[{icon:(0,_.jsx)(s.Z,{}),onClick:G}]}),[P,G]);return(0,_.jsx)(i.FE,{className:`chain_import ${e}`,children:(0,_.jsxs)(i.Ar.Base,{leftFooterButton:oe,onBack:q,rightFooterButton:ae,withSideMenu:!0,children:[(0,_.jsx)(g.Z,{background:"transparent",onBack:()=>r(-1),showBackButton:!0,...ie}),(0,_.jsxs)("div",{className:L()("chain_import__container",{"__web-ui":P}),children:[(0,_.jsx)("div",{className:"chain_import__header_info",children:t("Currently support WSS provider for Substrate networks and HTTP provider for EVM network")}),(0,_.jsxs)(m.Z,{disabled:A,form:H,children:[(0,_.jsxs)("div",{className:"chain_import__attributes_container",children:[(0,_.jsx)(m.Z.Item,{name:"provider",rules:[{validator:re}],statusHelpAsTooltip:!0,validateTrigger:["onBlur"],children:(0,_.jsx)(f.Z,{disabled:D,placeholder:t("Provider URL"),prefix:(0,_.jsx)(h.Z,{customSize:"24px",iconColor:y["gray-4"],phosphorIcon:V.Z,type:"phosphor",weight:"bold"}),suffix:ne(),tooltip:t("Provider URL"),tooltipPlacement:"topLeft"})}),(0,_.jsxs)(x.Z,{gutter:y.paddingSM,children:[(0,_.jsx)(b.Z,{span:P?12:16,children:(0,_.jsx)(m.Z.Item,{name:"name",children:(0,_.jsx)(f.Z,{disabled:!0,placeholder:t("Network name"),prefix:(0,_.jsx)(h.Z,{customSize:"24px",iconColor:y["gray-4"],phosphorIcon:I.Z,type:"phosphor",weight:"bold"}),tooltip:t("Network name"),tooltipPlacement:"topLeft"})})}),(0,_.jsx)(b.Z,{span:P?12:8,children:(0,_.jsx)(m.Z.Item,{name:"symbol",children:(0,_.jsx)(f.Z,{disabled:!0,placeholder:t("Symbol"),tooltip:t("Symbol"),tooltipPlacement:"topLeft"})})})]}),(0,_.jsxs)(x.Z,{gutter:y.paddingSM,children:[(0,_.jsx)(b.Z,{span:12,children:(0,_.jsx)(m.Z.Item,{name:"priceId",children:(0,_.jsx)(f.Z,{placeholder:t("Price ID"),tooltip:t("Price ID"),tooltipPlacement:"topLeft"})})}),(0,_.jsx)(b.Z,{span:12,children:(0,_.jsx)(m.Z.Item,{name:"type",children:(0,_.jsx)(f.Z,{disabled:!0,placeholder:t("Network type"),tooltip:t("Network type"),tooltipPlacement:"topLeft"})})})]}),(0,_.jsx)(m.Z.Item,{name:"blockExplorer",rules:[{validator:Q}],statusHelpAsTooltip:!0,children:(0,_.jsx)(f.Z,{placeholder:t("Block explorer"),tooltip:t("Block explorer"),tooltipPlacement:"topLeft"})}),(0,_.jsx)(m.Z.Item,{name:"crowdloanUrl",rules:[{validator:ee}],statusHelpAsTooltip:!0,children:(0,_.jsx)(f.Z,{placeholder:t("Crowdloan URL"),tooltip:t("Crowdloan URL"),tooltipPlacement:"topLeft"})})]}),P&&(0,_.jsxs)("div",{className:"action-wrapper",children:[(0,_.jsx)(j.Z,{...oe,schema:"secondary"}),(0,_.jsx)(j.Z,{...ae})]})]})]})]})})})).withConfig({displayName:"ChainImport",componentId:"sc-jyrbbz-0"})((({theme:{token:e}})=>({".chain_import__header_info":{color:e.colorTextTertiary,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,fontWeight:e.bodyFontWeight,width:"100%",textAlign:"center",marginBottom:e.margin,marginTop:22},".chain_import__container":{marginRight:e.margin,marginLeft:e.margin,"&.__web-ui":{margin:"0 auto",width:"60%",".chain_import__header_info":{margin:`${e.margin}px auto`,maxWidth:"50%"},".action-wrapper":{display:"flex",width:"100%",marginTop:e.marginMD,gap:16,"& > *":{flex:1}}}},".chain_import__attributes_container":{display:"flex",flexDirection:"column",gap:e.marginSM},".ant-input-container .ant-input-wrapper":{overflow:"hidden"},".ant-form-item":{marginBottom:0},".ant-input-container.-disabled .ant-input":{cursor:"default"},".ant-input-container.-disabled":{cursor:"default"},".ant-form-item-with-help .ant-form-item-explain":{paddingBottom:0},".ant-input-container .ant-input-suffix":{marginRight:0}})))},21218:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(2784),o=r(21890),a=r(76712),i=new Map;i.set("bold",(function(e){return n.createElement(n.Fragment,null,n.createElement("path",{d:"M40,91.3V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V48a8,8,0,0,0-8-8H91.3a7.9,7.9,0,0,0-5.6,2.3L42.3,85.7A7.9,7.9,0,0,0,40,91.3Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),n.createElement("circle",{cx:"128",cy:"148",r:"28",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),n.createElement("polyline",{points:"104 80 160 80 160 40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),i.set("duotone",(function(e){return n.createElement(n.Fragment,null,n.createElement("path",{d:"M208,40H91.3a7.9,7.9,0,0,0-5.6,2.3L42.3,85.7A7.9,7.9,0,0,0,40,91.3V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V48A8,8,0,0,0,208,40ZM128,176a28,28,0,1,1,28-28A28,28,0,0,1,128,176Z",opacity:"0.2"}),n.createElement("path",{d:"M40,91.3V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V48a8,8,0,0,0-8-8H91.3a7.9,7.9,0,0,0-5.6,2.3L42.3,85.7A7.9,7.9,0,0,0,40,91.3Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n.createElement("circle",{cx:"128",cy:"148",r:"28",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n.createElement("polyline",{points:"96 80 160 80 160 40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),i.set("fill",(function(){return n.createElement(n.Fragment,null,n.createElement("path",{d:"M208,32H172a4,4,0,0,0-4,4V80a8,8,0,0,1-8,8H96.3A8.2,8.2,0,0,1,88,80.5,8,8,0,0,1,96,72h56V36a4,4,0,0,0-4-4H91.3A15.9,15.9,0,0,0,80,36.7L36.7,80A15.9,15.9,0,0,0,32,91.3V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM128,176a28,28,0,1,1,28-28A28.1,28.1,0,0,1,128,176Z"}))})),i.set("light",(function(e){return n.createElement(n.Fragment,null,n.createElement("path",{d:"M40,91.3V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V48a8,8,0,0,0-8-8H91.3a7.9,7.9,0,0,0-5.6,2.3L42.3,85.7A7.9,7.9,0,0,0,40,91.3Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),n.createElement("circle",{cx:"128",cy:"148",r:"28",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),n.createElement("polyline",{points:"96 80 160 80 160 40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),i.set("thin",(function(e){return n.createElement(n.Fragment,null,n.createElement("path",{d:"M40,91.3V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V48a8,8,0,0,0-8-8H91.3a7.9,7.9,0,0,0-5.6,2.3L42.3,85.7A7.9,7.9,0,0,0,40,91.3Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),n.createElement("circle",{cx:"128",cy:"148",r:"28",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),n.createElement("polyline",{points:"96 80 160 80 160 40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),i.set("regular",(function(e){return n.createElement(n.Fragment,null,n.createElement("path",{d:"M40,91.3V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V48a8,8,0,0,0-8-8H91.3a7.9,7.9,0,0,0-5.6,2.3L42.3,85.7A7.9,7.9,0,0,0,40,91.3Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n.createElement("circle",{cx:"128",cy:"148",r:"28",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n.createElement("polyline",{points:"96 80 160 80 160 40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var s=function(e,t){return(0,o._)(e,t,i)},l=(0,n.forwardRef)((function(e,t){return n.createElement(a.Z,Object.assign({ref:t},e,{renderPath:s}))}));l.displayName="FloppyDiskBack";const d=l}}]);