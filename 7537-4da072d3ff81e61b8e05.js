"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[7537],{47537:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(9661),i=n(56858),s=n(61162);function o(e){return(0,s.U)(e)?(0,i.k1)(e,42).toLowerCase():e}var l=n(53334),r=n(33624),c=n(7419),d=n(13825),u=n(75576),m=n(3612),h=n(33283),p=n(95798),v=n(12162),f=n(99656),N=n(17446),C=n(90809),y=n(43826),S=n(84974),x=n(58730),A=n(39886),g=n(5286),I=n(87427),T=n(46308),E=n(8234),_=n(39359),b=n(2784),w=n(21427),D=n(73557),j=n(38338),k=n(6723),V=n(92280),O=n(80039),R=n(58142),B=n(35185),L=n(72779),M=n.n(L),Z=n(52322);const F=(0,j.ZP)((e=>{const{data:t}=e,{amount:n,type:i}=t,{t:s}=(0,w.$)(),o=(0,p.Tn)(t.type),r=t.type===a.Vv.CROWDLOAN,c=t.type===a.Vv.SEND_NFT,d=(0,b.useMemo)((()=>{switch(i){case a.Vv.STAKING_BOND:case a.Vv.STAKING_JOIN_POOL:return s("Staking value");case a.Vv.STAKING_WITHDRAW:case a.Vv.STAKING_POOL_WITHDRAW:return s("Withdraw value");case a.Vv.STAKING_UNBOND:return s("Unstake value");case a.Vv.STAKING_CANCEL_UNSTAKE:return s("Cancel unstake value");case a.Vv.CROWDLOAN:return s("Contribute balance");default:return s("Amount")}}),[s,i]);return(0,Z.jsxs)(Z.Fragment,{children:[(o||r||n)&&(0,Z.jsx)(l.oB.Number,{decimals:(null==n?void 0:n.decimals)||void 0,label:d,suffix:(null==n?void 0:n.symbol)||void 0,value:(null==n?void 0:n.value)||"0"}),t.additionalInfo&&c&&(0,Z.jsx)(l.oB.Default,{label:s("Collection Name"),children:t.additionalInfo.collectionName})]})})).withConfig({displayName:"Amount__HistoryDetailAmount",componentId:"sc-13nv896-0"})((({theme:{token:e}})=>({}))),H=(0,j.ZP)((e=>{const{data:t}=e,{fee:n}=t,{t:i}=(0,w.$)(),s=(0,b.useMemo)((()=>{if((0,p.LB)(t.type)&&t.additionalInfo&&t.type===a.Vv.TRANSFER_XCM)return t.additionalInfo}),[t.additionalInfo,t.type]);var o,r,c;return s?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(l.oB.Number,{decimals:(null==n?void 0:n.decimals)||void 0,label:i("Origin Chain fee"),suffix:(null==n?void 0:n.symbol)||void 0,value:(null==n?void 0:n.value)||"0"}),s.fee&&(0,Z.jsx)(l.oB.Number,{decimals:(null===(o=s.fee)||void 0===o?void 0:o.decimals)||void 0,label:i("Destination fee"),suffix:(null===(r=s.fee)||void 0===r?void 0:r.symbol)||void 0,value:(null===(c=s.fee)||void 0===c?void 0:c.value)||"0"})]}):(0,Z.jsx)(l.oB.Number,{decimals:(null==n?void 0:n.decimals)||void 0,label:i("Network fee"),suffix:(null==n?void 0:n.symbol)||void 0,value:(null==n?void 0:n.value)||"0"})})).withConfig({displayName:"Fee__HistoryDetailFee",componentId:"sc-lf1su0-0"})((({theme:{token:e}})=>({})));var K=n(36926);const W=(0,j.ZP)((e=>{var t,n;const{data:i}=e,{t:s}=(0,w.$)(),{chainInfoMap:o}=(0,B.v9)((e=>e.chainStore)),r=(0,p.Tn)(i.type),c=(0,b.useMemo)((()=>{if((0,p.LB)(i.type)&&i.additionalInfo&&i.type===a.Vv.TRANSFER_XCM)return i.additionalInfo}),[i.additionalInfo,i.type]);return c?(0,Z.jsx)(l.oB.Transfer,{destinationChain:{slug:c.destinationChain,name:(0,K.aG)(o[c.destinationChain])},originChain:{slug:i.chain,name:(0,K.aG)(o[i.chain])},recipientAddress:i.to,recipientName:i.toName,senderAddress:i.from,senderName:i.fromName}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(l.oB.Chain,{chain:i.chain,label:s("Network")}),r?(0,Z.jsx)(l.oB.Account,{address:i.from,label:s("From account"),name:i.fromName,networkPrefix:null===(t=o[i.chain])||void 0===t||null===(n=t.substrateInfo)||void 0===n?void 0:n.addressPrefix}):(0,Z.jsx)(l.oB.Transfer,{recipientAddress:i.to,recipientName:i.toName,senderAddress:i.from,senderName:i.fromName})]})})).withConfig({displayName:"Header__HistoryDetailHeader",componentId:"sc-4187my-0"})((({theme:{token:e}})=>({}))),G=(0,j.ZP)((e=>{const{className:t,data:n}=e,{t:a}=(0,w.$)();return(0,Z.jsxs)(l.oB,{className:M()(t),children:[(0,Z.jsx)(l.oB.DisplayType,{label:a("Transaction type"),typeName:a(d.nl[n.type])}),(0,Z.jsx)(W,{data:n}),(0,Z.jsx)(l.oB.Status,{label:a("Transaction status"),statusIcon:d.HU[n.status].icon,statusName:a(d.HU[n.status].name),valueColorSchema:d.HU[n.status].schema}),(0,Z.jsx)(l.oB.Default,{label:a("Extrinsic hash"),children:(n.extrinsicHash||"").startsWith("0x")?(0,p.pC)(n.extrinsicHash,8,9):"..."}),(0,Z.jsx)(l.oB.Default,{label:a("Transaction time"),children:(0,p.JK)(n.time,"#hhhh#:#mm# - #MMM# #DD#, #YYYY#")}),(0,Z.jsx)(F,{data:n}),(0,Z.jsx)(H,{data:n})]})})).withConfig({displayName:"Layout__HistoryDetailLayout",componentId:"sc-gc3ie8-0"})((({theme:{token:e}})=>({}))),U=(0,j.ZP)((function({className:e="",data:t,onCancel:n}){var a;const i=(0,B.v9)((e=>e.chainStore.chainInfoMap)),{t:s}=(0,w.$)(),o=(0,b.useCallback)((e=>()=>{window.open(e,"_blank")}),[]),l=(0,b.useMemo)((()=>{if(!t)return null;const e=i[t.chain],n=t.extrinsicHash&&""!==t.extrinsicHash&&(0,k.E)(e,t.extrinsicHash,"tx");return(0,Z.jsx)(V.Z,{block:!0,disabled:!n,icon:(0,Z.jsx)(f.Z,{phosphorIcon:R.Z,weight:"fill"}),onClick:o(n||""),children:s("View on explorer")})}),[i,t,o,s]);return(0,Z.jsx)(O.ZP,{className:e,footer:l,id:d.lQ,onCancel:n,title:(null==t||null===(a=t.displayData)||void 0===a?void 0:a.title)||"",children:(0,Z.jsx)("div",{className:"__layout-container",children:t&&(0,Z.jsx)(G,{data:t})})})})).withConfig({displayName:"Detail__HistoryDetailModal",componentId:"sc-5vqnl8-0"})((({theme:{token:e}})=>({".ant-sw-modal-body":{marginBottom:0},".ant-sw-modal-footer":{border:0}}))),$={send:y.Z,receive:S.Z,claim_reward:x.Z,staking:A.Z,crowdloan:g.Z,nft:I.Z,processing:T.Z,default:x.Z};function P(e){return e.status===a.A2.PROCESSING||e.status===a.A2.SUBMITTING?$.processing:e.type===a.Vv.SEND_NFT?$.nft:e.type===a.Vv.CROWDLOAN?$.crowdloan:e.type===a.Vv.STAKING_CLAIM_REWARD?$.claim_reward:(0,p.Tn)(e.type)?$.staking:$.default}function Y(e,t,n){let i;const s=(0,p.JK)(e.time,"#hhhh#:#mm#"),o=e.status===a.A2.FAIL?"fail":"";if(e.type===a.Vv.TRANSFER_BALANCE||e.type===a.Vv.TRANSFER_TOKEN||e.type===a.Vv.TRANSFER_XCM||e.type===a.Vv.EVM_EXECUTE)i=e.direction===a.Rg.RECEIVED?{className:`-receive -${e.status}`,title:n.received,name:t.received,typeName:`${t.received} ${o} - ${s}`,icon:$.receive}:{className:`-send -${e.status}`,title:n.send,name:t.send,typeName:`${t.send} ${o} - ${s}`,icon:$.send};else{const a=t[e.type]||t.default;i={className:`-${e.type} -${e.status}`,title:n[e.type],typeName:`${a} ${o} - ${s}`,name:t[e.type],icon:P(e)}}return e.status===a.A2.PROCESSING&&(i.className="-processing",i.typeName=t.processing),e.status===a.A2.SUBMITTING&&(i.className="-processing",i.typeName=t.submitting),i}const X="history-filter-id";var z;function J(e){return`${e.chain}-${e.address}-${e.transactionId||e.extrinsicHash}`}!function(e){e.SEND="send",e.RECEIVED="received",e.NFT="nft",e.STAKE="stake",e.CLAIM="claim",e.CROWDLOAN="crowdloan",e.SUCCESSFUL="successful",e.FAILED="failed"}(z||(z={}));const Q=d.lQ,q=(0,j.ZP)((function({className:e=""}){const{t}=(0,w.$)(),n=(0,b.useContext)(u.R0),{isWebUI:s}=(0,b.useContext)(m.sG),{activeModal:d,checkActive:y,inactiveModal:S}=(0,b.useContext)(v.t),{accounts:x,currentAccount:A}=(0,h.v9)((e=>e.accountState)),{historyList:g}=(0,h.v9)((e=>e.transactionHistory)),[I,T]=(0,b.useState)(""),{chainInfoMap:j}=(0,h.v9)((e=>e.chainStore)),k=y(Q),{filterSelectionMap:V,onApplyFilter:O,onChangeFilterOption:R,onCloseFilterModal:B,selectedFilters:L}=(0,h.RK)(X),M=(0,b.useMemo)((()=>e=>{if(!L.length)return!0;for(const t of L)if(t===z.SEND){if((0,p.LB)(e.type)&&e.direction===a.Rg.SEND)return!0}else if(t===z.RECEIVED){if((0,p.LB)(e.type)&&e.direction===a.Rg.RECEIVED)return!0}else if(t===z.NFT){if(e.type===a.Vv.SEND_NFT)return!0}else if(t===z.STAKE){if((0,p.Tn)(e.type))return!0}else if(t===z.CLAIM){if(e.type===a.Vv.STAKING_CLAIM_REWARD)return!0}else if(t===z.CROWDLOAN){if(e.type===a.Vv.CROWDLOAN)return!0}else if(t===z.SUCCESSFUL){if(e.status===a.A2.SUCCESS)return!0}else if(t===z.FAILED&&e.status===a.A2.FAIL)return!0;return!1}),[L]),F=(0,b.useMemo)((()=>[{label:t("Send token"),value:z.SEND},{label:t("Receive token"),value:z.RECEIVED},{label:t("NFT transaction"),value:z.NFT},{label:t("Stake transaction"),value:z.STAKE},{label:t("Claim staking reward"),value:z.CLAIM},{label:t("Successful"),value:z.SUCCESSFUL},{label:t("Failed"),value:z.FAILED}]),[t]),H=(0,b.useMemo)((()=>x.reduce(((e,t)=>(e[t.address.toLowerCase()]=t.name||"",e)),{})),[x]),K=(0,b.useMemo)((()=>({default:t("Transaction"),submitting:t("Submitting..."),processing:t("Processing..."),send:t("Send"),received:t("Receive"),[a.Vv.SEND_NFT]:t("NFT"),[a.Vv.CROWDLOAN]:t("Crowdloan"),[a.Vv.STAKING_JOIN_POOL]:t("Stake"),[a.Vv.STAKING_LEAVE_POOL]:t("Unstake"),[a.Vv.STAKING_BOND]:t("Bond"),[a.Vv.STAKING_UNBOND]:t("Unbond"),[a.Vv.STAKING_CLAIM_REWARD]:t("Claim Reward"),[a.Vv.STAKING_WITHDRAW]:t("Withdraw"),[a.Vv.STAKING_CANCEL_UNSTAKE]:t("Cancel unstake"),[a.Vv.EVM_EXECUTE]:t("EVM Transaction")})),[t]),W=(0,b.useMemo)((()=>({default:t("Transaction"),send:t("Send token"),received:t("Receive token"),[a.Vv.SEND_NFT]:t("NFT transaction"),[a.Vv.CROWDLOAN]:t("Crowdloan transaction"),[a.Vv.STAKING_JOIN_POOL]:t("Stake transaction"),[a.Vv.STAKING_LEAVE_POOL]:t("Unstake transaction"),[a.Vv.STAKING_BOND]:t("Bond transaction"),[a.Vv.STAKING_UNBOND]:t("Unbond transaction"),[a.Vv.STAKING_CLAIM_REWARD]:t("Claim Reward transaction"),[a.Vv.STAKING_WITHDRAW]:t("Withdraw transaction"),[a.Vv.STAKING_CANCEL_UNSTAKE]:t("Cancel unstake transaction"),[a.Vv.EVM_EXECUTE]:t("EVM Transaction")})),[t]),G=(0,b.useMemo)((()=>{const e=(null==A?void 0:A.address)||"",t=e.toLowerCase(),n=(null==A?void 0:A.address)&&!(0,i.W_)(e),a={};return g.forEach((e=>{if(n&&t!==o(e.address))return;const i=H[o(e.from)||""],s=H[o(e.to)||""],l=J(e);a[l]={...e,fromName:i,toName:s,displayData:Y(e,K,W)}})),a}),[H,g,K,W,null==A?void 0:A.address]),$=(0,b.useMemo)((()=>Object.values(G).sort(((e,t)=>t.time-e.time))),[G]),[P]=(0,b.useState)(null==A?void 0:A.address),{chain:q,extrinsicHashOrId:ee}=(0,D.UO)(),[te,ne]=(0,b.useState)(null),[ae,ie]=(0,b.useState)(!!q&&!!ee),se=(0,b.useCallback)((e=>()=>{ne(e),d(Q)}),[d]),oe=(0,b.useCallback)((()=>{S(Q),ne(null),ie(!1)}),[S]),le=(0,b.useCallback)((()=>{d(X)}),[d]);(0,b.useEffect)((()=>{if(ee&&q&&ae){const e=$.find((e=>e.chain===q&&(e.transactionId===ee||e.extrinsicHash===ee)));e&&(ne(e),d(Q))}}),[d,q,ee,ae,$]),(0,b.useEffect)((()=>{k&&ne((e=>{if(e){const t=J(e);return G[t]||null}return e}))}),[k,G]),(0,b.useEffect)((()=>{(null==A?void 0:A.address)!==P&&(S(Q),ne(null))}),[P,null==A?void 0:A.address,S]);const re=(0,b.useCallback)((()=>(0,Z.jsx)(l.rf,{emptyMessage:t("Your transaction history will appear here!"),emptyTitle:t("No transaction found"),phosphorIcon:E.Z})),[t]),ce=(0,b.useCallback)((e=>(0,Z.jsx)(l.BN,{item:e,onClick:se(e)},`${e.extrinsicHash}-${e.address}`)),[se]),de=(0,b.useCallback)(((e,t)=>{var n,a,i,s,o,l,r,c;const d=t.toLowerCase(),u=null===(n=e.fromName)||void 0===n?void 0:n.toLowerCase(),m=null===(a=e.toName)||void 0===a?void 0:a.toLowerCase(),h=null===(i=(null===(s=e.amount)||void 0===s?void 0:s.symbol)||(null===(o=e.fee)||void 0===o?void 0:o.symbol)||(null===(l=e.tip)||void 0===l?void 0:l.symbol))||void 0===i?void 0:i.toLowerCase(),p=null===(r=j[e.chain])||void 0===r||null===(c=r.name)||void 0===c?void 0:c.toLowerCase();return(null==u?void 0:u.includes(d))||(null==m?void 0:m.includes(d))||(null==h?void 0:h.includes(d))||(null==p?void 0:p.includes(d))}),[j]),ue=(0,b.useCallback)((e=>(0,p.JK)(e.time,"#MMM# #DD#, #YYYY#")),[]),me=(0,b.useCallback)(((e,t,n)=>(0,Z.jsx)("div",{className:"__group-separator",children:n})),[]),he=(0,b.useMemo)((()=>s?(0,Z.jsxs)("div",{className:"web-list",children:[(0,Z.jsx)(c.Z,{actionBtnIcon:(0,Z.jsx)(f.Z,{phosphorIcon:_.Z}),onClickActionBtn:le,onSearch:T,placeholder:"Chain, Address, Type,...",searchValue:I,showActionBtn:!0,showExtraButton:!0}),$.length<=0?(0,Z.jsx)(r.Z,{pageType:r.G.HISTORY}):(0,Z.jsx)(N.Z,{filterBy:M,groupBy:ue,groupSeparator:me,list:$,renderItem:ce,renderWhenEmpty:re,searchBy:de,searchTerm:I})]}):(0,Z.jsx)(N.Z.Section,{actionBtnIcon:(0,Z.jsx)(f.Z,{phosphorIcon:_.Z}),enableSearchInput:!0,filterBy:M,groupBy:ue,groupSeparator:me,list:$,onClickActionBtn:le,renderItem:ce,renderWhenEmpty:re,searchFunction:de,searchMinCharactersCount:2,searchPlaceholder:t("Search history"),showActionBtn:!0})),[re,M,ue,me,$,s,le,ce,de,I,t]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(l.FE,{className:`history ${e}`,resolve:n.awaitStores(["transactionHistory"]),children:[!s&&(0,Z.jsx)(C.Z,{background:"transparent",center:!1,className:"history-header",paddingVertical:!0,showBackButton:!1,title:t("History")}),he]}),(0,Z.jsx)(U,{data:te,onCancel:oe}),(0,Z.jsx)(l.Dd,{id:X,onApplyFilter:O,onCancel:B,onChangeOption:R,optionSelectionMap:V,options:F})]})})).withConfig({displayName:"History",componentId:"sc-9sdid2-0"})((({theme:{token:e}})=>({display:"flex",flexDirection:"column",".history-header.ant-sw-sub-header-container":{marginBottom:0},".ant-sw-list-section":{flex:1},".ant-sw-sub-header-container":{marginBottom:e.marginXS},".history-item + .history-item, .history-item + .___list-separator":{marginTop:e.marginXS},".___list-separator":{fontSize:e.fontSizeSM,lineHeight:e.lineHeightSM,color:e.colorTextLight3,fontWeight:e.headingFontWeight,marginBottom:e.marginXS}})))},33624:(e,t,n)=>{n.d(t,{G:()=>v,Z:()=>N});var a=n(99656),i=n(99338),s=n(72779),o=n.n(s),l=n(82524),r=n(1780),c=n(86267),d=n(74711),u=n(95414),m=n(56899),h=(n(2784),n(38338)),p=n(52322);let v;!function(e){e.NFT="nft",e.TOKEN="token",e.SEARCH="search",e.CROWDLOANS="crowdloans",e.HISTORY="history"}(v||(v={}));const f={[v.NFT]:{icon:l.Z,title:"No collectible found",content:"Your collectibles will appear here"},[v.TOKEN]:{icon:r.Z,title:"No token found",content:"Your token will appear here"},[v.SEARCH]:{icon:c.Z,title:"No results found",content:"Please change your search criteria and try again",button:{label:"Manage token list",icon:d.Z}},[v.CROWDLOANS]:{icon:u.Z,title:"You’ve not participated in any crowdloans",content:"Your crowdloans portfolio will appear here"},[v.HISTORY]:{icon:m.Z,title:"No transaction found",content:"Your transaction history will appear here"}},N=(0,h.ZP)((({className:e,pageType:t})=>{const{content:n,icon:s,title:l}=f[t];return(0,p.jsx)("div",{className:o()(e),children:(0,p.jsxs)("div",{className:o()("message-wrapper"),children:[(0,p.jsxs)("div",{className:"message-icon",children:[(0,p.jsx)(a.Z,{iconColor:"#737373",phosphorIcon:s,weight:"fill"}),(0,p.jsx)("div",{className:"shape"})]}),(0,p.jsxs)("div",{className:o()("flex-col","message-content"),children:[(0,p.jsx)(i.Z.Title,{className:"title",children:l}),n&&(0,p.jsx)(i.Z.Text,{className:"content",children:n})]})]})})})).withConfig({displayName:"NoContent",componentId:"sc-oeplvg-0"})((()=>({height:"100%",".message-wrapper":{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"50px 0 40px",".message-icon":{display:"flex",justifyContent:"center",alignItems:"center",fontSize:60,height:"fit-content",width:"fit-content",padding:"28px",position:"relative",".shape":{opacity:.3,background:"#4D4D4D",borderRadius:"50%",position:"absolute",top:0,left:0,bottom:0,right:0}},".message-content":{marginTop:16,justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column","& > *":{margin:0},".title":{fontSize:16,lineHeight:"24px"},".content":{fontSize:14,lineHeight:"22px",color:"rgba(255, 255, 255, 0.45)"}}},".action-button":{opacity:.45}})))},7419:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(92280),i=n(99656),s=n(25356),o=n(72779),l=n.n(o),r=n(13739),c=n(86267),d=n(2784),u=n(38338),m=n(52322);const h=(0,u.ZP)((({actionBtnIcon:e,className:t,extraButton:n,onClickActionBtn:o,onSearch:u,placeholder:h,searchValue:p,showActionBtn:v,showExtraButton:f=!1})=>{const N=(0,d.useMemo)((()=>n||(0,m.jsx)(a.Z,{icon:(0,m.jsx)(i.Z,{phosphorIcon:r.Z,size:"sm"}),type:"ghost"})),[]);return(0,m.jsx)("div",{className:l()("container",t),children:(0,m.jsxs)("div",{className:"right-section",children:[f&&N,(0,m.jsx)(s.Z.Search,{className:"search-input",onChange:e=>{var t;const n=null==e||null===(t=e.target)||void 0===t?void 0:t.value;u(n)},placeholder:h,prefix:(0,m.jsx)(i.Z,{phosphorIcon:c.Z}),size:"md",value:p,suffix:v&&(0,m.jsx)(a.Z,{icon:e,onClick:o,size:"xs",type:"ghost"})})]})})})).withConfig({displayName:"Search",componentId:"sc-1it0m7w-0"})((({})=>({display:"grid",width:"100%",".right-section":{justifySelf:"end",display:"flex",".search-input":{width:360,height:50}}})))}}]);