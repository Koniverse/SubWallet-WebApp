"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[1404],{1404:(e,s,t)=>{t.r(s),t.d(s,{default:()=>B});var n,o,i=t(53334),l=t(94716),r=t(80855),a=t(5769),c=t(67145),d=t(86041),u=t(18742),p=t(70497),h=t(47088),g=t(92936),m=t(99656),x=t(12798),f=t(90809),E=t(25356),S=t(1072),j=t(58094),b=t(19201),y=t(92280),v=t(80679),w=t(95023),N=t(72779),Z=t.n(N),P=t(46782),A=t(75720),I=t(12029),_=t(54105),k=t(47856),R=t(18332),C=t(11283),O=t(13739),D=t(2784),H=t(21427),T=t(73557),F=t(38338),Y=t(68774),z=t(52322);!function(e){e.JSON_FILE="json-file",e.PRIVATE_KEY="private-key",e.QR_CODE="qr-code",e.SEED_PHRASE="seed-phrase"}(n||(n={})),function(e){e.PASSWORD="password",e.TYPES="types"}(o||(o={}));const L=(e,s)=>()=>{if(e){const t=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});(0,P.saveAs)(t,`${s}.json`)}},K=(0,z.jsx)(m.Z,{phosphorIcon:A.Z,weight:"fill"}),B=(0,F.ZP)((e=>{const{accountAddress:s,className:t,modalContent:N}=e,{t:P}=(0,H.$)(),F=(0,T.s0)(),{goHome:B}=(0,h.Z)(),{accountAddress:J}=(0,T.UO)(),V=(0,D.useMemo)((()=>s&&N?s:J),[s,J,N]),W=(0,d.Z)(V),[$]=x.Z.useForm(),[Q,M]=(0,D.useState)([]),q=Q.length<=1,[G,X]=(0,D.useState)(!0),[U,ee]=(0,D.useState)(!0),[se,te]=(0,D.useState)(!1),[ne,oe]=(0,D.useState)(""),[ie,le]=(0,D.useState)(""),[re,ae]=(0,D.useState)(null),[ce,de]=(0,D.useState)(""),ue=(0,D.useMemo)((()=>({[n.JSON_FILE]:P("Successful"),[n.QR_CODE]:P("Your QR code"),[n.PRIVATE_KEY]:P("Your private key"),[n.SEED_PHRASE]:P("Your seed phrase")})),[P]),pe=(0,D.useMemo)((()=>{const e=["secret",ne||"",ie];return null!=W&&W.name&&e.push(W.name),e.join(":")}),[null==W?void 0:W.name,ie,ne]),he=(0,u.Z)(ne),ge=(0,D.useCallback)(((e,s)=>{const t=s.map((e=>e.errors||[])).reduce(((e,s)=>[...e,...s])).some((e=>!!e)),n=s.map((e=>e.value)).some((e=>!e));ee(t||n)}),[]),me=(0,D.useCallback)((e=>{const s=e[o.PASSWORD],t=e[o.TYPES],i=t.length<=1;if(!t.length)return;if(!W)return;const l=W.address;l&&(te(!0),setTimeout((()=>{new Promise(((e,o)=>{const r={privateKey:!1,seedPhrase:!1,jsonFile:!1},a=()=>{Object.values(r).every((e=>e))&&e()};t.includes(n.PRIVATE_KEY)||t.includes(n.QR_CODE)?(0,g.T7)(l,s).then((e=>{oe(e.privateKey),le(e.publicKey),r.privateKey=!0,a()})).catch((e=>{o(new Error(e.message))})):r.privateKey=!0,t.includes(n.SEED_PHRASE)&&null!=W&&W.isMasterAccount?(0,g.dr)({address:l,password:s}).then((e=>{de(e.result),r.seedPhrase=!0,a()})).catch((e=>{o(new Error(e.message))})):r.seedPhrase=!0,t.includes(n.JSON_FILE)?(0,g.ON)(l,s).then((e=>{ae(e.exportedJson),r.jsonFile=!0,a(),i&&L(e.exportedJson,l)()})).catch((e=>{o(new Error(e.message))})):r.jsonFile=!0})).then((()=>{X(!1)})).catch((e=>{$.setFields([{name:o.PASSWORD,errors:[e.message]}])})).finally((()=>{te(!1)}))}),500))}),[W,$]),xe=(0,D.useCallback)((e=>()=>{const s=$.getFieldValue(o.TYPES);let t;t=s.includes(e)?s.filter((s=>s!==e)):[...s,e],$.setFieldValue(o.TYPES,t),M(t)}),[$]),fe=(0,D.useMemo)((()=>[{disable:!W||W.isExternal||!W.isMasterAccount,hidden:!1,icon:I.Z,label:P("Export seed phrase"),type:n.SEED_PHRASE},{disable:!W||!!W.isExternal,hidden:!1,icon:_.Z,label:P("Export JSON file"),type:n.JSON_FILE},{disable:!W||W.isExternal||!(0,Y.u)(W.address),hidden:!(0,Y.u)((null==W?void 0:W.address)||""),icon:k.Z,label:P("Export private key"),type:n.PRIVATE_KEY},{disable:!W||!(null==W||!W.isExternal),hidden:!1,icon:R.Z,label:P("Export QR Code"),type:n.QR_CODE}]),[W,P]),Ee=(0,D.useCallback)((()=>{F(V?`/accounts/detail/${V}`:c.Y)}),[V,F]);return(0,D.useEffect)((()=>{W||B()}),[W,B,F]),(0,D.useEffect)((()=>{null!=W&&W.address&&$.resetFields()}),[null==W?void 0:W.address,$]),(0,p.Z)($,o.PASSWORD),W?(0,z.jsx)(i.FE,{className:Z()(t),children:(0,z.jsxs)(i.Ar.Base,{disableBack:se,onBack:Ee,rightFooterButton:{children:P(G?"Confirm":"Finish"),icon:G?void 0:K,disabled:U||!Q.length,loading:se,onClick:G?$.submit:B},subHeaderIcons:[{icon:(0,z.jsx)(r.Z,{}),onClick:B,disabled:se}],title:G?P("Export account"):q?ue[Q[0]]:P("Export successful"),children:[!N&&(0,z.jsx)(f.Z,{background:"transparent",center:!0,className:"transaction-header",onBack:Ee,paddingVertical:!0,rightButtons:[{icon:(0,z.jsx)(r.Z,{}),onClick:B,disabled:se}],showBackButton:!0,title:P(G?"Export account":q?ue[Q[0]]:"Export successful")}),(0,z.jsxs)("div",{className:"body-container",children:[(0,z.jsx)("div",{className:Z()("notice",{"mb-large":!G}),children:(0,z.jsx)(l.Z,{description:P("Anyone with your key can use any assets held in your account."),title:P("Warning: Never disclose this key"),type:"warning"})}),G&&(0,z.jsxs)(x.Z,{form:$,initialValues:{[o.PASSWORD]:"",[o.TYPES]:[]},name:"account-export-form",onFieldsChange:ge,onFinish:me,children:[(0,z.jsx)(x.Z.Item,{name:o.PASSWORD,rules:[{message:"Password is required",required:!0}],statusHelpAsTooltip:!0,children:(0,z.jsx)(E.Z,{disabled:se,placeholder:P("Type your Subwallet password"),suffix:(0,z.jsx)("span",{}),type:"password"})}),(0,z.jsx)(x.Z.Item,{className:"mb-0",name:o.TYPES,children:(0,z.jsx)("div",{className:"export-types-container",children:fe.map((e=>{const s=null==Q?void 0:Q.includes(e.type);return e.hidden?null:(0,z.jsx)(S.Z,{className:Z()("export-item",`export-${e.type}`,{selected:s,disabled:e.disable}),leftItemIcon:(0,z.jsx)(j.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:e.icon,size:"sm",weight:"fill"}),name:e.label,onPressItem:e.disable||se?void 0:xe(e.type),rightItem:(0,z.jsx)(m.Z,{className:"setting-item-right-icon",iconColor:"var(--selected-icon-color)",phosphorIcon:A.Z,size:"sm",weight:"fill"})},e.type)}))})})]}),!G&&(0,z.jsxs)("div",{className:Z()("result-container",{"export-single":q}),children:[Q.includes(n.PRIVATE_KEY)&&(0,z.jsxs)("div",{className:"result-content",children:[(0,z.jsx)("div",{className:"result-title",children:ue[n.PRIVATE_KEY]}),(0,z.jsx)(b.Z,{className:"private-key-field",content:ne,maxLine:10}),(0,z.jsx)(y.Z,{icon:(0,z.jsx)(m.Z,{phosphorIcon:C.Z}),onClick:he,type:"ghost",children:P("Copy to clipboard")})]}),Q.includes(n.SEED_PHRASE)&&(0,z.jsxs)("div",{className:"result-content",children:[(0,z.jsx)("div",{className:"result-title",children:ue[n.SEED_PHRASE]}),(0,z.jsx)(a.Z,{seedPhrase:ce})]}),Q.includes(n.QR_CODE)&&(0,z.jsxs)("div",{className:"result-content",children:[(0,z.jsx)("div",{className:"result-title",children:ue[n.QR_CODE]}),(0,z.jsx)("div",{className:"qr-area",children:(0,z.jsx)(v.Z,{errorLevel:"Q",size:264,value:pe})})]}),Q.includes(n.JSON_FILE)&&re&&(0,z.jsxs)("div",{className:"result-content",children:[(0,z.jsx)("div",{className:"result-title",children:P("Your json file")}),q&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"page-icon",children:(0,z.jsx)(w.Z,{color:"var(--page-icon-color)",iconProps:{phosphorIcon:A.Z,weight:"fill"}})}),(0,z.jsx)("div",{className:"json-done-tile",children:P("Success!")}),(0,z.jsx)("div",{className:"json-done-description",children:P("You have successfully exported JSON file for this account")})]}),!q&&(0,z.jsx)(S.Z,{className:"download-json",leftItemIcon:(0,z.jsx)(j.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:_.Z,size:"sm",weight:"fill"}),name:`${W.address}.json`,onPressItem:L(re,W.address),rightItem:(0,z.jsx)(m.Z,{className:"setting-item-right-icon",phosphorIcon:O.Z,size:"sm",weight:"fill"})})]})]})]})]})}):null})).withConfig({displayName:"AccountExport",componentId:"sc-nxcsoe-0"})((({theme:{token:e}})=>({".body-container":{padding:`0 ${e.padding}px`},".notice":{marginTop:e.margin,marginBottom:e.margin,"&.mb-large":{marginBottom:e.marginLG}},".export-types-container":{display:"flex",flexDirection:"column",gap:e.sizeXS},".export-item":{"--selected-icon-color":e["gray-4"],textAlign:"start","&.selected":{"--selected-icon-color":e.colorSecondary},"&.disabled":{opacity:.4,".ant-web3-block":{cursor:"not-allowed","&:hover":{backgroundColor:e["gray-1"]}}}},".setting-item-right-icon":{paddingRight:8},".download-json":{".ant-web3-block-middle-item":{overflow:"hidden",".ant-setting-item-name":{textOverflow:"ellipsis",width:"100%",overflow:"hidden",paddingRight:e.paddingXS}}},[`.export-${n.SEED_PHRASE}`]:{"--icon-bg-color":e["green-7"]},[`.export-${n.JSON_FILE}, .download-json`]:{"--icon-bg-color":e["orange-7"]},[`.export-${n.PRIVATE_KEY}`]:{"--icon-bg-color":e["gray-3"]},[`.export-${n.QR_CODE}`]:{"--icon-bg-color":e["geekblue-7"]},".result-container":{display:"flex",flexDirection:"column",gap:e.sizeLG},".result-content":{display:"flex",flexDirection:"column",gap:e.size,".result-title":{fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextLabel,textTransform:"uppercase"},".private-key-field":{".ant-field-wrapper":{alignItems:"start",textAlign:"center"}},".qr-area":{display:"flex",flexDirection:"row",justifyContent:"center"}},".export-single":{".result-title":{display:"none"}},".page-icon":{display:"flex",justifyContent:"center","--page-icon-color":e.colorSecondary},".json-done-tile":{color:e.colorTextHeading,textAlign:"center",fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading3,lineHeight:e.lineHeightHeading3},".json-done-description":{padding:`0 ${e.controlHeightLG-e.padding}px`,color:e.colorTextLabel,textAlign:"center",fontSize:e.fontSizeHeading5,lineHeight:e.lineHeightHeading5}})))}}]);