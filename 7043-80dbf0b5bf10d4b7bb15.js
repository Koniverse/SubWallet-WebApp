"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[7043],{17043:(e,n,t)=>{t.r(n),t.d(n,{default:()=>F});var o,r=t(56858),i=t(25601),s=t(75576),l=t(33283),a=t(92936),c=t(95798),d=t(12798),u=t(19138),m=t(99338),f=t(92280),h=t(99656),k=t(72779),p=t.n(k),x=t(58584),j=t(2784),w=t(21427),y=t(73557),L=t(38338),E=t(61162),g=t(68774),b=t(52274),I=t(94684),C=t(55446),_=t(52322);!function(e){e.TO="to"}(o||(o={}));const v={collectionId:"unknown",chain:"unknown"},W={collectionId:"unknown",chain:"unknown",owner:"unknown",id:"unknown"},Z=({modalContent:e=!1,nftDetail:n=W})=>{const{t}=(0,w.$)(),o=(0,y.s0)(),{chain:s="",collectionId:k,itemId:L,owner:Z=""}=(0,y.UO)(),{chainInfoMap:F}=(0,l.v9)((e=>e.chainStore)),{nftCollections:N,nftItems:A}=(0,l.v9)((e=>e.nft)),[S,M]=(0,j.useState)(!0),T=(0,j.useMemo)((()=>e?{nftChain:n.chain,collectionId:n.collectionId,itemId:n.id,owner:n.owner}:{nftChain:s,collectionId:k,itemId:L,owner:Z}),[k,L,s,Z,e,n]),P=(0,j.useMemo)((()=>{const{collectionId:e,itemId:n,nftChain:t,owner:o}=T;return A.find((i=>(0,r.Wr)(i.owner,o)&&t===i.chain&&i.collectionId===e&&i.id===n))||W}),[T,A]),R=(0,j.useMemo)((()=>{const{collectionId:e,nftChain:n}=T;return N.find((t=>n===t.chain&&t.collectionId===e))||v}),[T,N]),D=(0,j.useMemo)((()=>F[T.nftChain]),[F,T]),O=(0,l.xo)(T.nftChain),{chain:B,from:H,onDone:K,setChain:U,setFrom:V}=(0,j.useContext)(C.TransactionContext),{onError:X,onSuccess:q}=(0,l.Ls)(K),[G]=d.Z.useForm(),J=(0,j.useMemo)((()=>({from:H,chain:B,to:""})),[B,H]),[Y,$]=(0,j.useState)(!0),[z,Q]=(0,j.useState)(!1),ee=(0,j.useCallback)((({getFieldValue:e})=>({validator:(e,n)=>{if(!n)return Promise.reject(t("The recipient address is required"));if(!(0,E.U)(n))return Promise.reject(t("Invalid recipient address"));if((0,r.Wr)(n,H))return Promise.reject(t("The recipient address can not be the same as the sender address"));if((0,g.u)(n)!==(0,g.u)(H)){const e=(0,g.u)(H)?t("Receive address must be of evm account."):t("Receive address must be of substrate account.");return Promise.reject(e)}return Promise.resolve()}})),[t,H]),ne=(0,j.useCallback)(((e,n)=>{const{error:t}=(0,c.ij)(n);$(t)}),[]),te=(0,j.useCallback)((e=>{const n=(0,g.u)(H),{to:t}=e,o=(0,b.bO)(P,B);let r;r=n?(0,a.Y5)({senderAddress:H,networkKey:B,recipientAddress:t,nftItemName:null==P?void 0:P.name,params:o,nftItem:P}):(0,a.GW)({networkKey:B,recipientAddress:t,senderAddress:H,nftItemName:null==P?void 0:P.name,params:o,nftItem:P}),Q(!0),setTimeout((()=>{r.then(q).catch(X).finally((()=>{Q(!1)}))}),300)}),[B,H,P,X,q]),oe=(0,l.Ey)(H);return(0,j.useEffect)((()=>{U(T.nftChain),V(T.owner)}),[T,U,V]),(0,j.useEffect)((()=>{P!==W&&R!==v||o("/home/nfts/collections")}),[R,o,P]),(0,l.uy)(G,"to"),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(I.tc,{className:p()("-transaction-content"),children:[(0,_.jsxs)("div",{className:p()("nft_item_detail text-center",{"__modal-ui":e}),children:[(0,_.jsx)(u.Z,{height:e?180:120,src:P.image}),(0,_.jsx)(m.Z.Title,{level:5,children:P.name})]}),(0,_.jsxs)(d.Z,{className:p()("form-container form-space-sm",{"__modal-ui":e}),form:G,initialValues:J,onFieldsChange:ne,onFinish:te,children:[(0,_.jsx)(d.Z.Item,{name:"to",rules:[ee],statusHelpAsTooltip:!0,children:(0,_.jsx)(i.Jg,{addressPrefix:O,label:t("Send to"),placeholder:t("Account address"),saveAddress:!0,showAddressBook:!0,showScanner:!0})}),(0,_.jsx)(d.Z.Item,{children:(0,_.jsx)(i.oT,{disabled:!0,items:D?[{name:D.name,slug:D.slug}]:[],label:t("Network"),value:R.chain})})]}),(0,_.jsx)(I.ZL,{address:H,chain:B,label:t("Sender transferable balance")+":",onBalanceReady:M})]}),(0,_.jsx)(I.Xd,{className:p()("send-nft-transaction-footer",{"__modal-ui":e}),errors:[],warnings:[],children:(0,_.jsx)(f.Z,{disabled:Y||!S,icon:(0,_.jsx)(h.Z,{phosphorIcon:x.Z,weight:"fill"}),loading:z,onClick:oe(G.submit),children:t("Next")})})]})},F=(0,L.ZP)((e=>{const{className:n}=e,t=(0,j.useContext)(s.R0);return(0,_.jsx)(i.FE,{className:n,resolve:t.awaitStores(["nft"]),children:(0,_.jsx)(Z,{modalContent:e.modalContent,nftDetail:e.nftDetail})})})).withConfig({displayName:"SendNFT",componentId:"sc-13wb87a-0"})((({theme:{token:e}})=>({flex:1,display:"flex",flexDirection:"column",overflow:"hidden",".nft_item_detail h5":{marginTop:e.marginXS,marginBottom:e.margin},".__modal-ui":{"&.form-container":{display:"flex",flexDirection:"column-reverse"},"&.send-nft-transaction-footer":{"& > .ant-btn":{width:"100%"}},"&.nft_item_detail":{img:{aspectRatio:"1"}}}})))},58584:(e,n,t)=>{t.d(n,{Z:()=>c});var o=t(2784),r=t(21890),i=t(76712),s=new Map;s.set("bold",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),s.set("duotone",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",opacity:"0.2"}),o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),s.set("fill",(function(){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.2,104.2,0,0,0,128,24Zm47.4,107.1a8.7,8.7,0,0,1-1.8,2.6l-33.9,33.9a7.6,7.6,0,0,1-5.6,2.3,7.8,7.8,0,0,1-5.7-2.3,8,8,0,0,1,0-11.3L148.7,136H88a8,8,0,0,1,0-16h60.7L128.4,99.7a8,8,0,0,1,11.3-11.3l33.9,33.9a8.7,8.7,0,0,1,1.8,2.6A8.3,8.3,0,0,1,175.4,131.1Z"}))})),s.set("light",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),s.set("thin",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),s.set("regular",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var l=function(e,n){return(0,r._)(e,n,s)},a=(0,o.forwardRef)((function(e,n){return o.createElement(i.Z,Object.assign({ref:n},e,{renderPath:l}))}));a.displayName="ArrowCircleRight";const c=a}}]);