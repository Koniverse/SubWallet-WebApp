(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[1404],{1404:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var o=n(51076),i=n(94716),r=n(80855),s=n(5769),l=n(67145),a=n(86041),c=n(18742),d=n(70497),u=n(47088),p=n(92936),f=n(99656),m=n(12798),h=n(25356),g=n(1072),E=n(58094),x=n(19201),k=n(92280),v=n(64161),y=n(95023),j=n(72779),b=n.n(j),S=n(46782),w=n(75720),L=n(12029),A=n(54105),R=n(47856),P=n(18332),Z=n(11283),H=n(13739),N=n(2784),O=n(96217),_=n(73557),I=n(38338),T=n(52322),W=function(e){return e.JSON_FILE="json-file",e.PRIVATE_KEY="private-key",e.QR_CODE="qr-code",e.SEED_PHRASE="seed-phrase",e}(W||{});const C={[W.JSON_FILE]:"Successful",[W.QR_CODE]:"Your QR code",[W.PRIVATE_KEY]:"Your private key",[W.SEED_PHRASE]:"Your recovery phrase"};var D=function(e){return e.PASSWORD="password",e.TYPES="types",e}(D||{});const F=(e,t)=>()=>{if(e){const n=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});(0,S.saveAs)(n,`${t}.json`)}},M=(0,T.jsx)(f.Z,{phosphorIcon:w.Z,weight:"fill"}),Y=(0,I.ZP)((e=>{const{className:t}=e,{t:n}=(0,O.$)(),j=(0,_.s0)(),{goHome:S}=(0,u.Z)(),{accountAddress:I}=(0,_.UO)(),Y=(0,a.Z)(I),[V]=m.Z.useForm(),[z,K]=(0,N.useState)([]),B=z.length<=1,[J,$]=(0,N.useState)(!0),[Q,U]=(0,N.useState)(!0),[q,G]=(0,N.useState)(!1),[X,ee]=(0,N.useState)(""),[te,ne]=(0,N.useState)(""),[oe,ie]=(0,N.useState)(null),[re,se]=(0,N.useState)(""),le=(0,N.useMemo)((()=>{const e=["secret",X||"",te];return null!=Y&&Y.name&&e.push(Y.name),e.join(":")}),[null==Y?void 0:Y.name,te,X]),ae=(0,c.Z)(X),ce=(0,N.useCallback)(((e,t)=>{const n=t.map((e=>e.errors||[])).reduce(((e,t)=>[...e,...t])).some((e=>!!e)),o=t.map((e=>e.value)).some((e=>!e));U(n||o)}),[]),de=(0,N.useCallback)((e=>{const t=e[D.PASSWORD],n=e[D.TYPES],o=n.length<=1;if(!n.length)return;if(!Y)return;const i=Y.address;i&&(G(!0),setTimeout((()=>{new Promise(((e,r)=>{const s={privateKey:!1,seedPhrase:!1,jsonFile:!1},l=()=>{Object.values(s).every((e=>e))&&e()};n.includes(W.PRIVATE_KEY)||n.includes(W.QR_CODE)?(0,p.T7)(i,t).then((e=>{ee(e.privateKey),ne(e.publicKey),s.privateKey=!0,l()})).catch((e=>{r(new Error(e.message))})):s.privateKey=!0,n.includes(W.SEED_PHRASE)&&null!=Y&&Y.isMasterAccount?(0,p.dr)({address:i,password:t}).then((e=>{se(e.result),s.seedPhrase=!0,l()})).catch((e=>{r(new Error(e.message))})):s.seedPhrase=!0,n.includes(W.JSON_FILE)?(0,p.ON)(i,t).then((e=>{ie(e.exportedJson),s.jsonFile=!0,l(),o&&F(e.exportedJson,i)()})).catch((e=>{r(new Error(e.message))})):s.jsonFile=!0})).then((()=>{$(!1)})).catch((e=>{V.setFields([{name:D.PASSWORD,errors:[e.message]}])})).finally((()=>{G(!1)}))}),500))}),[Y,V]),ue=(0,N.useCallback)((e=>()=>{const t=V.getFieldValue(D.TYPES);let n;n=t.includes(e)?t.filter((t=>t!==e)):[...t,e],V.setFieldValue(D.TYPES,n),K(n)}),[V]),pe=(0,N.useMemo)((()=>[{disable:(null==Y?void 0:Y.isExternal)||!(null!=Y&&Y.isMasterAccount),icon:L.Z,label:"Export Seed Phrase",type:W.SEED_PHRASE},{disable:!1,icon:A.Z,label:"Export JSON file",type:W.JSON_FILE},{disable:!1,icon:R.Z,label:"Export Private key",type:W.PRIVATE_KEY},{disable:!1,icon:P.Z,label:"Export QR Code",type:W.QR_CODE}]),[null==Y?void 0:Y.isExternal,null==Y?void 0:Y.isMasterAccount]),fe=(0,N.useCallback)((()=>{j(I?`/accounts/detail/${I}`:l.Y)}),[I,j]);return(0,N.useEffect)((()=>{Y||S()}),[Y,S,j]),(0,N.useEffect)((()=>{null!=Y&&Y.address&&V.resetFields()}),[null==Y?void 0:Y.address,V]),(0,d.Z)(V,D.PASSWORD),Y?(0,T.jsx)(o.FE,{className:b()(t),children:(0,T.jsx)(o.Ar.WithSubHeaderOnly,{disableBack:q,onBack:fe,rightFooterButton:{children:n(J?"Confirm":"Finish"),icon:J?void 0:M,disabled:Q||!z.length,loading:q,onClick:J?V.submit:S},subHeaderIcons:[{icon:(0,T.jsx)(r.Z,{}),onClick:S,disabled:q}],title:n(J?"Export account":B?C[z[0]]:"Export successful"),children:(0,T.jsxs)("div",{className:"body-container",children:[(0,T.jsx)("div",{className:b()("notice",{"mb-large":!J}),children:(0,T.jsx)(i.Z,{description:n("Anyone with your  keys can steal any assets held in your account."),title:n("Warning: Never disclose this key"),type:"warning"})}),J&&(0,T.jsxs)(m.Z,{form:V,initialValues:{[D.PASSWORD]:"",[D.TYPES]:[]},name:"account-export-form",onFieldsChange:ce,onFinish:de,children:[(0,T.jsx)(m.Z.Item,{name:D.PASSWORD,rules:[{message:"Password is required",required:!0}],statusHelpAsTooltip:!0,children:(0,T.jsx)(h.Z,{disabled:q,placeholder:n("Type your SubWallet password"),suffix:(0,T.jsx)("span",{}),type:"password"})}),(0,T.jsx)(m.Z.Item,{className:"mb-0",name:D.TYPES,children:(0,T.jsx)("div",{className:"export-types-container",children:pe.map((e=>{const t=null==z?void 0:z.includes(e.type);return(0,T.jsx)(g.Z,{className:b()("export-item",`export-${e.type}`,{selected:t,disabled:e.disable}),leftItemIcon:(0,T.jsx)(E.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:e.icon,size:"sm",weight:"fill"}),name:n(e.label),onPressItem:e.disable||q?void 0:ue(e.type),rightItem:(0,T.jsx)(f.Z,{className:"setting-item-right-icon",iconColor:"var(--selected-icon-color)",phosphorIcon:w.Z,size:"sm",weight:"fill"})},e.type)}))})})]}),!J&&(0,T.jsxs)("div",{className:b()("result-container",{"export-single":B}),children:[z.includes(W.PRIVATE_KEY)&&(0,T.jsxs)("div",{className:"result-content",children:[(0,T.jsx)("div",{className:"result-title",children:n(C[W.PRIVATE_KEY])}),(0,T.jsx)(x.Z,{className:"private-key-field",content:X,maxLine:10}),(0,T.jsx)(k.Z,{icon:(0,T.jsx)(f.Z,{phosphorIcon:Z.Z}),onClick:ae,type:"ghost",children:n("Copy to clipboard")})]}),z.includes(W.SEED_PHRASE)&&(0,T.jsxs)("div",{className:"result-content",children:[(0,T.jsx)("div",{className:"result-title",children:n(C[W.SEED_PHRASE])}),(0,T.jsx)(s.Z,{seedPhrase:re})]}),z.includes(W.QR_CODE)&&(0,T.jsxs)("div",{className:"result-content",children:[(0,T.jsx)("div",{className:"result-title",children:n(C[W.QR_CODE])}),(0,T.jsx)("div",{className:"qr-area",children:(0,T.jsx)(v.Z,{errorLevel:"Q",size:264,value:le})})]}),z.includes(W.JSON_FILE)&&oe&&(0,T.jsxs)("div",{className:"result-content",children:[(0,T.jsx)("div",{className:"result-title",children:n("Your json file")}),B&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"page-icon",children:(0,T.jsx)(y.Z,{color:"var(--page-icon-color)",iconProps:{phosphorIcon:w.Z,weight:"fill"}})}),(0,T.jsx)("div",{className:"json-done-tile",children:n("Success!")}),(0,T.jsx)("div",{className:"json-done-description",children:n("You have successfully export JSON file for your accounts")})]}),!B&&(0,T.jsx)(g.Z,{className:"download-json",leftItemIcon:(0,T.jsx)(E.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:A.Z,size:"sm",weight:"fill"}),name:`${Y.address}.json`,onPressItem:F(oe,Y.address),rightItem:(0,T.jsx)(f.Z,{className:"setting-item-right-icon",phosphorIcon:H.Z,size:"sm",weight:"fill"})})]})]})]})})}):null})).withConfig({displayName:"AccountExport",componentId:"sc-nxcsoe-0"})((({theme:{token:e}})=>({".body-container":{padding:`0 ${e.padding}px`},".notice":{marginTop:e.margin,marginBottom:e.margin,"&.mb-large":{marginBottom:e.marginLG}},".export-types-container":{display:"flex",flexDirection:"column",gap:e.sizeXS},".export-item":{"--selected-icon-color":e["gray-4"],textAlign:"start","&.selected":{"--selected-icon-color":e.colorSecondary},"&.disabled":{opacity:.4,".ant-web3-block":{cursor:"not-allowed","&:hover":{backgroundColor:e["gray-1"]}}}},".setting-item-right-icon":{paddingRight:8},".download-json":{".ant-web3-block-middle-item":{overflow:"hidden",".ant-setting-item-name":{textOverflow:"ellipsis",width:"100%",overflow:"hidden",paddingRight:e.paddingXS}}},[`.export-${W.SEED_PHRASE}`]:{"--icon-bg-color":e["green-7"]},[`.export-${W.JSON_FILE}, .download-json`]:{"--icon-bg-color":e["orange-7"]},[`.export-${W.PRIVATE_KEY}`]:{"--icon-bg-color":e["gray-3"]},[`.export-${W.QR_CODE}`]:{"--icon-bg-color":e["geekblue-7"]},".result-container":{display:"flex",flexDirection:"column",gap:e.sizeLG},".result-content":{display:"flex",flexDirection:"column",gap:e.size,".result-title":{fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextLabel,textTransform:"uppercase"},".private-key-field":{".ant-field-wrapper":{alignItems:"start",textAlign:"center"}},".qr-area":{display:"flex",flexDirection:"row",justifyContent:"center"}},".export-single":{".result-title":{display:"none"}},".page-icon":{display:"flex",justifyContent:"center","--page-icon-color":e.colorSecondary},".json-done-tile":{color:e.colorTextHeading,textAlign:"center",fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading3,lineHeight:e.lineHeightHeading3},".json-done-description":{padding:`0 ${e.controlHeightLG-e.padding}px`,color:e.colorTextLabel,textAlign:"center",fontSize:e.fontSizeHeading5,lineHeight:e.lineHeightHeading5}})))},46782:function(e,t,n){var o,i;void 0===(i="function"==typeof(o=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){l(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,n,s){var l=r.URL||r.webkitURL,a=document.createElement("a");n=n||e.name||"download",a.download=n,a.rel="noopener","string"==typeof e?(a.href=e,a.origin===location.origin?i(a):o(a.href)?t(e,n,s):i(a,a.target="_blank")):(a.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(a.href)}),4e4),setTimeout((function(){i(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,r){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),n);else if(o(e))t(e,n,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){i(s)}))}}:function(e,n,o,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var l="application/octet-stream"===e.type,a=/constructor/i.test(r.HTMLElement)||r.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||l&&a||s)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},d.readAsDataURL(e)}else{var u=r.URL||r.webkitURL,p=u.createObjectURL(e);i?i.location=p:location.href=p,i=null,setTimeout((function(){u.revokeObjectURL(p)}),4e4)}});r.saveAs=l.saveAs=l,e.exports=l})?o.apply(t,[]):o)||(e.exports=i)},13739:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(2784),i=n(21890),r=n(76712),s=new Map;s.set("bold",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),s.set("duotone",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),s.set("fill",(function(){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M80.3,115.7a8.2,8.2,0,0,1-1.7-8.7,8,8,0,0,1,7.4-5h34V40a8,8,0,0,1,16,0v62h34a8,8,0,0,1,7.4,5,8.2,8.2,0,0,1-1.7,8.7l-42,42a8.2,8.2,0,0,1-11.4,0ZM216,144a8,8,0,0,0-8,8v56H48V152a8,8,0,0,0-16,0v56a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A8,8,0,0,0,216,144Z"}))})),s.set("light",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),s.set("thin",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),s.set("regular",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var l=function(e,t){return(0,i._)(e,t,s)},a=(0,o.forwardRef)((function(e,t){return o.createElement(r.Z,Object.assign({ref:t},e,{renderPath:l}))}));a.displayName="DownloadSimple";const c=a}}]);