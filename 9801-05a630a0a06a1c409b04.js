"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[9801],{29801:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var n=s(80949),a=s(36926),l=s(56858),c=s(25601),o=s(75576),r=s(33283),i=s(92936),d=s(95798),m=s(12798),u=s(99656),h=s(90809),p=s(25356),f=s(94344),g=s(2784),b=s(73557),y=s(38338),N=s(61162),x=s(68774),_=s(52322);function k(e){if(!e)return[];const t=(0,a.g6)(e),s=[];return t.forEach((e=>{s.push({label:e.toString(),value:e})})),s}const w=(0,y.ZP)((function({className:e="",modalContent:t}){const{t:s}=(0,r.$G)(),y=(0,r.lm)(),w=(0,b.s0)(),C=(0,g.useContext)(o.R0),F=(0,r.c_)(),[j]=m.Z.useForm(),A=m.Z.useWatch("chain",j),I=m.Z.useWatch("type",j),T=m.Z.useWatch("collectionName",j),v=(0,g.useMemo)((()=>Object.values(F)),[F]),[Z,S]=(0,g.useState)(!1),[E,R]=(0,g.useState)(!0),[B,V]=(0,g.useState)(!0),W=(0,g.useMemo)((()=>k(F[A])),[F,A]),P=(0,r.vI)(),H=(0,g.useCallback)((()=>{w("/home/nfts/collections")}),[w]),O=(0,g.useCallback)(((e,t)=>{const{error:s}=(0,d.ij)(t),n=(0,d.eW)(e),a=(0,d.eW)(t),l=(0,d.s_)(t),c=Object.entries(a).some((([e,t])=>"symbol"!==e&&!t)),{chain:o,type:r}=n;if(o){const e=k(F[o]);1===e.length?j.setFieldValue("type",e[0].value):j.resetFields(["type"]),j.resetFields(["contractAddress","collectionName"])}r&&j.resetFields(["contractAddress","collectionName"]),l.contractAddress.length>0&&j.resetFields(["collectionName"]),V(!a.chain||!a.type||l.contractAddress.length>0),R(c||s)}),[F,j]),U=(0,g.useCallback)((e=>{const{chain:t,contractAddress:n,symbol:l,type:c}=e,o=T.replaceAll(" ","").toUpperCase();S(!0),setTimeout((()=>{(0,i.fx)({originChain:t,slug:"",name:T,symbol:""!==l?l:o,decimals:null,priceId:null,minAmount:null,assetType:c,metadata:(0,a.ST)(n),multiChainAsset:null,hasValue:(0,a.nO)(F[t]),icon:""}).then((e=>{e?(y({message:s("Imported NFT successfully")}),H()):y({message:s("An error occurred, please try again")})})).catch((()=>{y({message:s("An error occurred, please try again")})})).finally((()=>{S(!1)}))}),300)}),[T,F,y,s,H]),J=(0,g.useCallback)(((e,t)=>new Promise(((e,n)=>{t.replaceAll(" ","").length>=3?e():n(new Error(s("Collection name must have at least 3 characters")))}))),[s]),M=(0,g.useCallback)(((e,t)=>new Promise(((e,a)=>{if((0,N.U)(t)){const c=[n.Ym.ERC721].includes(I)&&(0,x.u)(t),o=[n.Ym.PSP34].includes(I)&&(0,l.NJ)(t);c||o?(S(!0),(0,i.Uj)({contractAddress:t,originChain:A,type:I}).then((t=>{S(!1),t.isExist&&a(s("Existed NFT")),t.contractError&&a(s("Invalid contract for the selected chain")),t.isExist||t.contractError||(j.setFieldValue("collectionName",t.name),j.setFieldValue("symbol",t.symbol),e())})).catch((()=>{S(!1),a(s("Invalid contract for the selected chain"))}))):a(s("Invalid contract address"))}else a(s("Invalid contract address"))}))),[j,A,I,s]);return(0,g.useEffect)((()=>{A&&P(A)}),[A,P]),(0,_.jsx)(c.FE,{className:e,resolve:C.awaitStores(["nft"]),children:(0,_.jsxs)(c.Ar.Base,{onBack:H,rightFooterButton:{disabled:E,icon:(0,_.jsx)(u.Z,{phosphorIcon:f.Z,weight:"fill"}),loading:Z,onClick:j.submit,children:s("Import")},title:s("Import NFT"),children:[!t&&(0,_.jsx)(h.Z,{background:"transparent",center:!0,className:"transaction-header",onBack:H,paddingVertical:!0,showBackButton:!0,title:s("Import NFT")}),(0,_.jsx)("div",{className:"nft_import__container",children:(0,_.jsxs)(m.Z,{className:"form-space-xs",form:j,initialValues:{contractAddress:"",chain:"",collectionName:"",type:""},name:"nft-import",onFieldsChange:O,onFinish:U,children:[(0,_.jsx)(m.Z.Item,{name:"chain",children:(0,_.jsx)(c.oT,{items:v,label:s("Network"),placeholder:s("Select network"),title:s("Select network")})}),(0,_.jsx)(m.Z.Item,{name:"type",children:(0,_.jsx)(c.Rf,{className:e,disabled:!A,items:W,label:s("Type"),placeholder:s("Select NFT type"),title:s("Select NFT type")})}),(0,_.jsx)(m.Z.Item,{name:"contractAddress",rules:[{validator:M}],statusHelpAsTooltip:!0,children:(0,_.jsx)(c.Jg,{disabled:!I,label:s("Contract address"),placeholder:s("Enter or paste an address"),showScanner:!0})}),(0,_.jsx)(m.Z.Item,{name:"collectionName",required:!0,rules:[{validator:J}],statusHelpAsTooltip:!0,children:(0,_.jsx)(p.Z,{disabled:B,label:s("NFT collection name")})})]})})]})})})).withConfig({displayName:"NftImport",componentId:"sc-h8ppt5-0"})((({theme:{token:e}})=>({".nft_import__container":{marginTop:e.margin,paddingLeft:e.padding,paddingRight:e.padding},".nft_import__Qr":{cursor:"pointer"},".ant-web3-block-right-item":{marginRight:0},".ant-input-suffix":{marginRight:0},".nft_import__selected_option":{color:e.colorTextHeading},".nft-type-item":{"--nft-type-icon-bg-color":e["orange-6"],"--nft-type-icon-color":e.colorWhite,"--nft-selected-icon-color":e.colorSuccess,".ant-web3-block-right-item":{marginRight:0}}})))}}]);