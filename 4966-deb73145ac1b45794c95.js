"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[4966],{94966:(e,n,t)=>{t.r(n),t.d(n,{default:()=>S});var o=t(56858),a=t(53334),r=t(13825),s=t(3612),i=t(33283),l=t(92936),d=t(99656),c=t(19138),u=t(92280),g=t(58094),h=t(17446),p=t(72779),m=t.n(p),f=t(89710),k=t(12604),b=t(75720),w=t(2784),x=t(21427),v=t(35185),L=t(38338),j=t(89335),y=t(52322);const C=(0,y.jsx)(d.Z,{phosphorIcon:f.Z,weight:"fill"}),S=(0,L.ZP)((e=>{(0,i.IR)();const{className:n}=e,{isWebUI:t}=(0,w.useContext)(s.sG),{t:p}=(0,x.$)(),{goHome:L}=(0,i.yu)(),S=(0,i.Eb)(),H=(0,i.u4)(),N=(0,i.Hz)(r.kc),{accounts:Z}=(0,v.v9)((e=>e.accountState)),[E,M]=(0,w.useState)(!0),I=(0,w.useMemo)((()=>S.map((e=>({name:e.displayName,slug:e.network})))),[S]),[_,$]=(0,w.useState)(S[0].slug),[B,F]=(0,w.useState)([]),[A,T]=(0,w.useState)(0),[z,W]=(0,w.useState)([]),[P,q]=(0,w.useState)(!1),[D,G]=(0,w.useState)(!1),O=(0,w.useMemo)((()=>S.find((e=>e.slug===_))),[_,S]),R=(0,w.useMemo)((()=>(null==O?void 0:O.displayName.replaceAll(" network",""))||"Unknown network"),[O]),{error:U,getAddress:X,isLoading:V,isLocked:Y,ledger:J,refresh:K,warning:Q}=(0,i.c5)(_),ee=(0,w.useCallback)((()=>{M(!0),W([])}),[]),ne=(0,w.useCallback)((e=>{const n=e.target.value;$(n)}),[]),te=(0,w.useCallback)(((e,n)=>()=>{e||(q(!0),T(n+1),(async()=>{const e=5*n,t=5*(n+1),o=new Array(5).fill(null);F((e=>[...e,...o]));for(let n=e;n<t;n++)try{const{address:t}=await X(n);o[n-e]={accountIndex:n,name:`Ledger ${R} ${n+1}`,address:t}}catch(e){K(),M(!0);break}F((n=>{const a=[...n];for(let n=e;n<t;n++)a[n]=o[n-e];return a}))})().then().catch().finally((()=>q(!1))))}),[X,R,K]),oe=(0,w.useCallback)((()=>{M(!1),A||te(P,A)()}),[P,te,A]),ae=(0,w.useCallback)(((e,n)=>()=>{let t;e.find((e=>e.address===n.address))?t=e.filter((e=>e.address!==n.address)):(t=[...e],t.push(n)),W(t)}),[]),re=(0,w.useCallback)((e=>(n,t)=>{if(!n)return(0,y.jsx)(a.Y0,{direction:"vertical"},t);const r=!!e.find((e=>e.address===n.address)),s=(0,o.k1)(n.address,42),i=!!Z.find((e=>e.address===s));return(0,y.jsx)(a.HL,{accountName:n.name,address:n.address,className:m()({disabled:i}),direction:"vertical",genesisHash:null==O?void 0:O.genesisHash,isSelected:r||i,onClick:i?void 0:ae(e,n),showUnselectIcon:!0},n.address)}),[Z,ae,null==O?void 0:O.genesisHash]),se=(0,w.useCallback)((()=>{z.length&&O&&(G(!0),setTimeout((()=>{(0,l.dS)({accounts:z.map((e=>({accountIndex:e.accountIndex,address:e.address,addressOffset:0,genesisHash:O.genesisHash,hardwareType:"ledger",name:e.name})))}).then((()=>{H()})).catch((e=>{console.log(e)})).finally((()=>{G(!1)}))}),300))}),[z,O,H]);(0,w.useEffect)((()=>{W([]),F([]),T(0)}),[J]);const ie=!Y&&!V&&!!J;return(0,y.jsx)(a.FE,{className:m()(n),children:(0,y.jsx)(a.Ar.Base,{onBack:E?N:ee,...t?{headerList:["Simple"],showWebHeader:!0}:{rightFooterButton:{children:p("Connect Ledger device"),icon:C,disabled:!ie||!E&&!z.length,onClick:E?oe:se,loading:D},showBackButton:!0,subHeaderPaddingVertical:!0,showSubHeader:!0,subHeaderCenter:!0,subHeaderBackground:"transparent"},subHeaderIcons:[{icon:(0,y.jsx)(a.Tw,{}),onClick:L}],title:p("Connect Ledger device"),children:(0,y.jsxs)("div",{className:m()("container",{"__web-ui":t}),children:[(0,y.jsx)("div",{className:"sub-title",children:p("Connect and unlock your Ledger, then open the selected network on your Ledger.")}),E&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"logo",children:(0,y.jsx)(a.qB,{leftLogo:(0,y.jsx)(c.Z,{height:56,shape:"squircle",src:j.ZP.subwallet,width:56}),rightLogo:(0,y.jsx)(c.Z,{height:56,shape:"squircle",src:j.ZP.ledger,width:56})})}),(0,y.jsx)(a.oT,{items:I,label:p("Select network"),onChange:ne,placeholder:p("Select network"),value:_}),(0,y.jsx)(u.Z,{block:!0,className:m()("ledger-button",{connected:ie,loading:V}),contentAlign:"left",icon:(0,y.jsx)(g.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:ie?f.Z:k.Z,size:"sm",weight:"fill"}),onClick:K,schema:"secondary",children:(0,y.jsxs)("div",{className:"ledger-button-content",children:[(0,y.jsx)("span",{className:"ledger-info-text",children:p(ie?"Device found":Q?"Please unlock your Ledger":U||(J?"Loading":"Searching Ledger device"))}),ie&&(0,y.jsx)(d.Z,{className:"check-icon",phosphorIcon:b.Z,size:"md",weight:"fill"})]})})]}),t&&(0,y.jsx)(u.Z,{className:"ledger-button",disabled:!ie||!E&&!z.length,icon:C,loading:D,onClick:E?oe:se,children:p("Connect Ledger device")}),!E&&(0,y.jsx)(h.Z.Section,{className:"list-container",displayRow:!0,list:B,pagination:{hasMore:!P,loadMore:te(P,A)},renderItem:re(z),renderOnScroll:!1,rowGap:"var(--list-gap)"})]})})})})).withConfig({displayName:"ConnectLedger",componentId:"sc-1o5hc6q-0"})((({theme:{token:e}})=>({"--list-gap":e.sizeXS,".ant-sw-screen-layout-body":{overflow:"hidden"},".__web-ui":{width:"60%",margin:"0 auto",".ledger-button":{marginTop:30}},".container":{padding:`${e.padding}px ${e.padding}px 0`,overflow:"hidden",height:"100%",display:"flex",flexDirection:"column"},".sub-title":{padding:`0 ${e.padding}px`,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextDescription,textAlign:"center"},".logo":{margin:`${e.controlHeightLG}px 0`,"--logo-size":e.controlHeightLG+e.controlHeightXS,".dual-logo-container":{marginBottom:0,padding:0}},".ledger-button-content":{marginLeft:e.marginSM,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flex:1,overflow:"hidden"},".ledger-info-text":{overflow:"hidden",textOverflow:"ellipsis"},".ledger-button":{marginTop:e.margin-2,padding:`0 ${e.paddingSM}px`,"--icon-bg-color":e["gray-4"],"&.connected":{"--icon-bg-color":e["green-6"]}},".check-icon":{color:e.colorSuccess},".list-container":{margin:`${e.margin}px -${e.margin}px 0`,flex:1},".ant-sw-list":{".ant-web3-block":{display:"flex",overflow:"visible","&.disabled":{opacity:.4,cursor:"not-allowed"}},".ant-account-item":{paddingTop:e.paddingSM,paddingBottom:e.paddingSM}},".loading":{".anticon":{animation:"spinner-loading 1s infinite linear"}}})))},12604:(e,n,t)=>{t.d(n,{Z:()=>d});var o=t(2784),a=t(21890),r=t(76712),s=new Map;s.set("bold",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),s.set("duotone",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),s.set("fill",(function(){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M232,128A104,104,0,1,1,84.7,33.4a8.1,8.1,0,0,1,10.6,4,8,8,0,0,1-4,10.6,88,88,0,1,0,73.4,0,8,8,0,0,1-4-10.6,8.1,8.1,0,0,1,10.6-4A104.4,104.4,0,0,1,232,128Z"}))})),s.set("light",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),s.set("thin",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),s.set("regular",(function(e){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M168,40.7a96,96,0,1,1-80,0",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var i=function(e,n){return(0,a._)(e,n,s)},l=(0,o.forwardRef)((function(e,n){return o.createElement(r.Z,Object.assign({ref:n},e,{renderPath:i}))}));l.displayName="CircleNotch";const d=l}}]);