"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[5999],{45999:(e,s,n)=>{n.r(s),n.d(s,{default:()=>K});var o=n(53334),t=n(87694),i=n(48118),a=n(3612),r=n(96900),l=n(86041),c=n(15234),d=n(99828),u=n(47088),m=n(92936),p=n(31352),g=n(95798),h=n(89600),x=n(96701),f=n(12162),b=n(12798),E=n(64161),y=n(25356),j=n(58094),v=n(99656),S=n(19201),Z=n(92280),w=n(72779),k=n.n(w),C=n(89710),N=n(18332),I=n(80205),A=n(77571),P=n(12604),R=n(21218),T=n(11283),_=n(1610),D=n(23183),H=n(38025),z=n(2784),O=n(96217),L=n(73557),F=n(38338),W=n(1404),B=n(52322),M=function(e){return e.NAME="name",e}(M||{}),Y=function(e){return e.EXPORT="export",e.DERIVE="derive",e.DELETE="delete",e}(Y||{});const $="export_account_modal",V=[{title:"Why do I need to enter a password?",description:"For your wallet protection, SubWallet locks your wallet after 15 minutes of inactivity. You will need this password to unlock it.",type:"warning"},{title:"Can I recover a password?",description:"The password is stored securely on your device. We will not be able to recover it for you, so make sure you remember it!",type:"warning"}],K=(0,F.ZP)((e=>{const{className:s}=e,{t:n}=(0,O.$)(),w=(0,L.s0)(),{goHome:K}=(0,u.Z)(),Q=(0,d.Z)(),{token:J}=(0,F.Fg)(),{accountAddress:X}=(0,L.UO)(),{activeModal:q,inactiveModal:G}=(0,z.useContext)(f.t),[U]=b.Z.useForm(),ee=(0,l.Z)(X),se=(0,r.Z)(),{isWebUI:ne}=(0,z.useContext)(a.sG),oe=(0,z.useRef)(),[te,ie]=(0,z.useState)(!1),[ae,re]=(0,z.useState)(!1),[le,ce]=(0,z.useState)(!1),de=(0,c.Z)(X),ue=(0,z.useMemo)((()=>!(!ee||ee.isExternal||"ethereum"===ee.type&&!ee.isMasterAccount)),[ee]),me=(0,z.useMemo)((()=>{switch(de){case p.v.LEDGER:return C.Z;case p.v.QR:return N.Z;case p.v.READ_ONLY:return I.Z;default:return A.Z}}),[de]),pe=(0,z.useCallback)((()=>{null!=ee&&ee.address&&se().then((()=>{ie(!0),(0,m.a1)(ee.address).then((()=>{K()})).catch((e=>{Q({message:e.message,type:"error"})})).finally((()=>{ie(!1)}))})).catch((e=>{e&&Q({message:e.message,type:"error"})}))}),[null==ee?void 0:ee.address,se,Q,K]),ge=(0,z.useCallback)((()=>{null!=ee&&ee.address&&(re(!0),setTimeout((()=>{(0,m.Zb)({address:ee.address}).then((()=>{K()})).catch((e=>{Q({message:e.message,type:"error"})})).finally((()=>{re(!1)}))}),500))}),[null==ee?void 0:ee.address,K,Q]),he=(0,z.useCallback)((()=>{null!=ee&&ee.address&&(ne?q($):w(`/accounts/export/${ee.address}`))}),[null==ee?void 0:ee.address,w,ne]),xe=(0,z.useCallback)((()=>{(0,h.vQ)((null==ee?void 0:ee.address)||""),Q({message:"Copied"})}),[null==ee?void 0:ee.address,Q]),fe=(0,z.useCallback)(((e,s)=>{(0,x.eW)(e)[M.NAME]&&(clearTimeout(oe.current),ce(!0),oe.current=setTimeout((()=>{U.submit()}),1e3))}),[U]),be=(0,z.useCallback)((e=>{clearTimeout(oe.current);const s=e[M.NAME];ee&&s!==ee.name&&ee.address?(0,m.zx)(ee.address,s.trim()).catch(console.error).finally((()=>{ce(!1)})):ce(!1)}),[ee]);return(0,z.useEffect)((()=>{ee||K()}),[ee,K,w]),ee?(0,B.jsx)(o.FE,{className:k()(s),children:(0,B.jsxs)(o.Ar.Base,{disableBack:ae,headerList:["Simple"],showWebHeader:ne,...!ne&&{showBackButton:!0,showSubHeader:!0,subHeaderBackground:"transparent",subHeaderCenter:!0,subHeaderPaddingVertical:!0,showHeader:!1},subHeaderIcons:[{icon:(0,B.jsx)(o.Tw,{}),onClick:K,disabled:ae}],title:n("Account detail"),children:[(0,B.jsxs)("div",{className:k()("body-container",{"__web-ui":ne}),children:[(0,B.jsxs)("div",{className:"main-content",children:[!ne&&(0,B.jsx)("div",{className:"account-qr",children:(0,B.jsx)(E.Z,{errorLevel:"M",icon:"",iconSize:1.5*J.sizeLG,size:3.5*J.sizeXL,value:ee.address})}),(0,B.jsx)(b.Z,{form:U,initialValues:{[M.NAME]:ee.name||""},name:"account-detail-form",onFieldsChange:fe,onFinish:be,children:(0,B.jsx)(b.Z.Item,{className:k()("account-field"),name:M.NAME,rules:[{message:"Wallet name is required",transform:e=>e.trim(),required:!0}],statusHelpAsTooltip:!0,children:(0,B.jsx)(y.Z,{className:"account-name-input",disabled:ae,label:n("Wallet name"),onBlur:U.submit,placeholder:n("Wallet name"),prefix:(0,B.jsx)(j.Z,{backgroundColor:"var(--wallet-name-icon-bg-color)",iconColor:"var(--wallet-name-icon-color)",phosphorIcon:me}),suffix:(0,B.jsx)(v.Z,{className:k()({loading:le}),phosphorIcon:le?P.Z:R.Z,size:"sm"})})})}),(0,B.jsx)("div",{className:k()("account-field","mb-lg"),children:(0,B.jsx)(S.Z,{content:(0,g.pC)(ee.address,11,13),label:n("Wallet address"),placeholder:n("Wallet address"),prefix:(0,B.jsx)(t.Z,{size:J.sizeMD,value:ee.address}),suffix:(0,B.jsx)(Z.Z,{icon:(0,B.jsx)(v.Z,{phosphorIcon:T.Z,size:"sm"}),onClick:xe,size:"xs",type:"ghost"})})}),(0,B.jsx)(Z.Z,{block:!0,className:k()("account-button",`action-type-${Y.DERIVE}`),contentAlign:"left",disabled:!ue,icon:(0,B.jsx)(j.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:_.Z,size:"sm",weight:"fill"}),loading:ae,onClick:ge,schema:"secondary",children:n("Derive account")}),(0,B.jsx)(Z.Z,{block:!0,className:k()("account-button",`action-type-${Y.EXPORT}`),contentAlign:"left",disabled:ee.isExternal||ae,icon:(0,B.jsx)(j.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:D.Z,size:"sm",weight:"fill"}),onClick:he,schema:"secondary",children:n("Export account")}),(0,B.jsx)(Z.Z,{block:!0,className:k()("account-button",`action-type-${Y.DELETE}`),contentAlign:"left",disabled:ae,icon:(0,B.jsx)(j.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:H.Z,size:"sm",weight:"fill"}),loading:te,onClick:pe,schema:"secondary",children:n("Remove account")})]}),ne&&(0,B.jsx)(i.Z,{contents:V})]}),ne&&(0,B.jsx)(o.P0,{id:$,onCancel:()=>G($),title:n("Export account"),children:(0,B.jsx)(W.default,{accountAddress:null==ee?void 0:ee.address,modalContent:!0})})]})}):null})).withConfig({displayName:"AccountDetail",componentId:"sc-12smu7y-0"})((({theme:{token:e}})=>({".body-container":{"&.__web-ui":{display:"flex",justifyContent:"center",gap:16,width:"60%",margin:"0 auto","& > *":{flex:1},".form-container":{".ant-btn":{width:"100%"}}},padding:`0 ${e.padding}px`,"--wallet-name-icon-bg-color":e["geekblue-6"],"--wallet-name-icon-color":e.colorWhite,".ant-background-icon":{width:e.sizeMD,height:e.sizeMD,".anticon":{height:e.sizeSM,width:e.sizeSM}},".account-qr":{marginTop:e.margin,marginBottom:e.marginLG,display:"flex",flexDirection:"row",justifyContent:"center"},".account-field":{marginBottom:e.marginXS,".single-icon-only":{color:e["gray-4"]},".ant-input-label":{marginBottom:e.marginXS-2},".ant-input-suffix":{marginRight:0,marginLeft:e.marginXS},".ant-btn":{height:"auto",marginRight:-(e.marginSM-2)}},".mb-lg":{marginBottom:e.marginLG},".account-button":{marginBottom:e.marginXS,gap:e.sizeXS,color:e.colorTextLight1,"&:disabled":{color:e.colorTextLight1,opacity:.4}},[`.action-type-${Y.DERIVE}`]:{"--icon-bg-color":e["magenta-7"]},[`.action-type-${Y.EXPORT}`]:{"--icon-bg-color":e["green-6"]},[`.action-type-${Y.DELETE}`]:{"--icon-bg-color":e["colorError-6"],color:e["colorError-6"],".ant-background-icon":{color:e.colorTextLight1},"&:disabled":{color:e["colorError-6"],".ant-background-icon":{color:e.colorTextLight1}}}},".account-name-input":{".loading":{color:e["gray-5"],animation:"spinner-loading 1s infinite linear"}}})))},1404:(e,s,n)=>{n.r(s),n.d(s,{default:()=>Y});var o=n(53334),t=n(94716),i=n(80855),a=n(5769),r=n(67145),l=n(86041),c=n(18742),d=n(70497),u=n(47088),m=n(92936),p=n(99656),g=n(12798),h=n(90809),x=n(25356),f=n(1072),b=n(58094),E=n(19201),y=n(92280),j=n(64161),v=n(95023),S=n(72779),Z=n.n(S),w=n(46782),k=n(75720),C=n(12029),N=n(54105),I=n(47856),A=n(18332),P=n(11283),R=n(13739),T=n(2784),_=n(96217),D=n(73557),H=n(38338),z=n(68774),O=n(52322),L=function(e){return e.JSON_FILE="json-file",e.PRIVATE_KEY="private-key",e.QR_CODE="qr-code",e.SEED_PHRASE="seed-phrase",e}(L||{});const F={[L.JSON_FILE]:"Successful",[L.QR_CODE]:"Your QR code",[L.PRIVATE_KEY]:"Your private key",[L.SEED_PHRASE]:"Your recovery phrase"};var W=function(e){return e.PASSWORD="password",e.TYPES="types",e}(W||{});const B=(e,s)=>()=>{if(e){const n=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});(0,w.saveAs)(n,`${s}.json`)}},M=(0,O.jsx)(p.Z,{phosphorIcon:k.Z,weight:"fill"}),Y=(0,H.ZP)((e=>{const{className:s,modalContent:n,accountAddress:S}=e,{t:w}=(0,_.$)(),H=(0,D.s0)(),{goHome:Y}=(0,u.Z)(),{accountAddress:$}=(0,D.UO)(),V=(0,T.useMemo)((()=>S&&n?S:$),[S,$,n]),K=(0,l.Z)(V),[Q]=g.Z.useForm(),[J,X]=(0,T.useState)([]),q=J.length<=1,[G,U]=(0,T.useState)(!0),[ee,se]=(0,T.useState)(!0),[ne,oe]=(0,T.useState)(!1),[te,ie]=(0,T.useState)(""),[ae,re]=(0,T.useState)(""),[le,ce]=(0,T.useState)(null),[de,ue]=(0,T.useState)(""),me=(0,T.useMemo)((()=>{const e=["secret",te||"",ae];return null!=K&&K.name&&e.push(K.name),e.join(":")}),[null==K?void 0:K.name,ae,te]),pe=(0,c.Z)(te),ge=(0,T.useCallback)(((e,s)=>{const n=s.map((e=>e.errors||[])).reduce(((e,s)=>[...e,...s])).some((e=>!!e)),o=s.map((e=>e.value)).some((e=>!e));se(n||o)}),[]),he=(0,T.useCallback)((e=>{const s=e[W.PASSWORD],n=e[W.TYPES],o=n.length<=1;if(!n.length)return;if(!K)return;const t=K.address;t&&(oe(!0),setTimeout((()=>{new Promise(((e,i)=>{const a={privateKey:!1,seedPhrase:!1,jsonFile:!1},r=()=>{Object.values(a).every((e=>e))&&e()};n.includes(L.PRIVATE_KEY)||n.includes(L.QR_CODE)?(0,m.T7)(t,s).then((e=>{ie(e.privateKey),re(e.publicKey),a.privateKey=!0,r()})).catch((e=>{i(new Error(e.message))})):a.privateKey=!0,n.includes(L.SEED_PHRASE)&&null!=K&&K.isMasterAccount?(0,m.dr)({address:t,password:s}).then((e=>{ue(e.result),a.seedPhrase=!0,r()})).catch((e=>{i(new Error(e.message))})):a.seedPhrase=!0,n.includes(L.JSON_FILE)?(0,m.ON)(t,s).then((e=>{ce(e.exportedJson),a.jsonFile=!0,r(),o&&B(e.exportedJson,t)()})).catch((e=>{i(new Error(e.message))})):a.jsonFile=!0})).then((()=>{U(!1)})).catch((e=>{Q.setFields([{name:W.PASSWORD,errors:[e.message]}])})).finally((()=>{oe(!1)}))}),500))}),[K,Q]),xe=(0,T.useCallback)((e=>()=>{const s=Q.getFieldValue(W.TYPES);let n;n=s.includes(e)?s.filter((s=>s!==e)):[...s,e],Q.setFieldValue(W.TYPES,n),X(n)}),[Q]),fe=(0,T.useMemo)((()=>[{disable:!K||K.isExternal||!K.isMasterAccount,hidden:!1,icon:C.Z,label:"Export Seed Phrase",type:L.SEED_PHRASE},{disable:!K||!!K.isExternal,hidden:!1,icon:N.Z,label:"Export JSON file",type:L.JSON_FILE},{disable:!K||K.isExternal||!(0,z.u)(K.address),hidden:!(0,z.u)((null==K?void 0:K.address)||""),icon:I.Z,label:"Export Private key",type:L.PRIVATE_KEY},{disable:!K||!(null==K||!K.isExternal),hidden:!1,icon:A.Z,label:"Export QR Code",type:L.QR_CODE}]),[K]),be=(0,T.useCallback)((()=>{H(V?`/accounts/detail/${V}`:r.Y)}),[V,H]);return(0,T.useEffect)((()=>{K||Y()}),[K,Y,H]),(0,T.useEffect)((()=>{null!=K&&K.address&&Q.resetFields()}),[null==K?void 0:K.address,Q]),(0,d.Z)(Q,W.PASSWORD),K?(0,O.jsx)(o.FE,{className:Z()(s),children:(0,O.jsxs)(o.Ar.Base,{disableBack:ne,onBack:be,rightFooterButton:{children:w(G?"Confirm":"Finish"),icon:G?void 0:M,disabled:ee||!J.length,loading:ne,onClick:G?Q.submit:Y},subHeaderIcons:[{icon:(0,O.jsx)(i.Z,{}),onClick:Y,disabled:ne}],title:w(G?"Export account":q?F[J[0]]:"Export successful"),children:[!n&&(0,O.jsx)(h.Z,{background:"transparent",center:!0,className:"transaction-header",onBack:be,paddingVertical:!0,showBackButton:!0,title:w(G?"Export account":q?F[J[0]]:"Export successful"),rightButtons:[{icon:(0,O.jsx)(i.Z,{}),onClick:Y,disabled:ne}]}),(0,O.jsxs)("div",{className:"body-container",children:[(0,O.jsx)("div",{className:Z()("notice",{"mb-large":!G}),children:(0,O.jsx)(t.Z,{description:w("Anyone with your  keys can steal any assets held in your account."),title:w("Warning: Never disclose this key"),type:"warning"})}),G&&(0,O.jsxs)(g.Z,{form:Q,initialValues:{[W.PASSWORD]:"",[W.TYPES]:[]},name:"account-export-form",onFieldsChange:ge,onFinish:he,children:[(0,O.jsx)(g.Z.Item,{name:W.PASSWORD,rules:[{message:"Password is required",required:!0}],statusHelpAsTooltip:!0,children:(0,O.jsx)(x.Z,{disabled:ne,placeholder:w("Type your SubWallet password"),suffix:(0,O.jsx)("span",{}),type:"password"})}),(0,O.jsx)(g.Z.Item,{className:"mb-0",name:W.TYPES,children:(0,O.jsx)("div",{className:"export-types-container",children:fe.map((e=>{const s=null==J?void 0:J.includes(e.type);return e.hidden?null:(0,O.jsx)(f.Z,{className:Z()("export-item",`export-${e.type}`,{selected:s,disabled:e.disable}),leftItemIcon:(0,O.jsx)(b.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:e.icon,size:"sm",weight:"fill"}),name:w(e.label),onPressItem:e.disable||ne?void 0:xe(e.type),rightItem:(0,O.jsx)(p.Z,{className:"setting-item-right-icon",iconColor:"var(--selected-icon-color)",phosphorIcon:k.Z,size:"sm",weight:"fill"})},e.type)}))})})]}),!G&&(0,O.jsxs)("div",{className:Z()("result-container",{"export-single":q}),children:[J.includes(L.PRIVATE_KEY)&&(0,O.jsxs)("div",{className:"result-content",children:[(0,O.jsx)("div",{className:"result-title",children:w(F[L.PRIVATE_KEY])}),(0,O.jsx)(E.Z,{className:"private-key-field",content:te,maxLine:10}),(0,O.jsx)(y.Z,{icon:(0,O.jsx)(p.Z,{phosphorIcon:P.Z}),onClick:pe,type:"ghost",children:w("Copy to clipboard")})]}),J.includes(L.SEED_PHRASE)&&(0,O.jsxs)("div",{className:"result-content",children:[(0,O.jsx)("div",{className:"result-title",children:w(F[L.SEED_PHRASE])}),(0,O.jsx)(a.Z,{seedPhrase:de})]}),J.includes(L.QR_CODE)&&(0,O.jsxs)("div",{className:"result-content",children:[(0,O.jsx)("div",{className:"result-title",children:w(F[L.QR_CODE])}),(0,O.jsx)("div",{className:"qr-area",children:(0,O.jsx)(j.Z,{errorLevel:"Q",size:264,value:me})})]}),J.includes(L.JSON_FILE)&&le&&(0,O.jsxs)("div",{className:"result-content",children:[(0,O.jsx)("div",{className:"result-title",children:w("Your json file")}),q&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:"page-icon",children:(0,O.jsx)(v.Z,{color:"var(--page-icon-color)",iconProps:{phosphorIcon:k.Z,weight:"fill"}})}),(0,O.jsx)("div",{className:"json-done-tile",children:w("Success!")}),(0,O.jsx)("div",{className:"json-done-description",children:w("You have successfully export JSON file for your accounts")})]}),!q&&(0,O.jsx)(f.Z,{className:"download-json",leftItemIcon:(0,O.jsx)(b.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:N.Z,size:"sm",weight:"fill"}),name:`${K.address}.json`,onPressItem:B(le,K.address),rightItem:(0,O.jsx)(p.Z,{className:"setting-item-right-icon",phosphorIcon:R.Z,size:"sm",weight:"fill"})})]})]})]})]})}):null})).withConfig({displayName:"AccountExport",componentId:"sc-nxcsoe-0"})((({theme:{token:e}})=>({".body-container":{padding:`0 ${e.padding}px`},".notice":{marginTop:e.margin,marginBottom:e.margin,"&.mb-large":{marginBottom:e.marginLG}},".export-types-container":{display:"flex",flexDirection:"column",gap:e.sizeXS},".export-item":{"--selected-icon-color":e["gray-4"],textAlign:"start","&.selected":{"--selected-icon-color":e.colorSecondary},"&.disabled":{opacity:.4,".ant-web3-block":{cursor:"not-allowed","&:hover":{backgroundColor:e["gray-1"]}}}},".setting-item-right-icon":{paddingRight:8},".download-json":{".ant-web3-block-middle-item":{overflow:"hidden",".ant-setting-item-name":{textOverflow:"ellipsis",width:"100%",overflow:"hidden",paddingRight:e.paddingXS}}},[`.export-${L.SEED_PHRASE}`]:{"--icon-bg-color":e["green-7"]},[`.export-${L.JSON_FILE}, .download-json`]:{"--icon-bg-color":e["orange-7"]},[`.export-${L.PRIVATE_KEY}`]:{"--icon-bg-color":e["gray-3"]},[`.export-${L.QR_CODE}`]:{"--icon-bg-color":e["geekblue-7"]},".result-container":{display:"flex",flexDirection:"column",gap:e.sizeLG},".result-content":{display:"flex",flexDirection:"column",gap:e.size,".result-title":{fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextLabel,textTransform:"uppercase"},".private-key-field":{".ant-field-wrapper":{alignItems:"start",textAlign:"center"}},".qr-area":{display:"flex",flexDirection:"row",justifyContent:"center"}},".export-single":{".result-title":{display:"none"}},".page-icon":{display:"flex",justifyContent:"center","--page-icon-color":e.colorSecondary},".json-done-tile":{color:e.colorTextHeading,textAlign:"center",fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading3,lineHeight:e.lineHeightHeading3},".json-done-description":{padding:`0 ${e.controlHeightLG-e.padding}px`,color:e.colorTextLabel,textAlign:"center",fontSize:e.fontSizeHeading5,lineHeight:e.lineHeightHeading5}})))},48118:(e,s,n)=>{n.d(s,{Z:()=>c});var o=n(53334),t=n(72779),i=n.n(t),a=n(96217),r=n(38338),l=n(52322);const c=(0,r.ZP)((({className:e,contents:s})=>{const{t:n}=(0,a.$)();return s.length<=0?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("div",{className:i()("instruction-container",e),children:s.map(((e,s)=>(0,l.jsx)(o.e3,{title:n(e.title),description:"string"==typeof e.description?n(e.description):e.description,type:e.type||"warning"})))})})).withConfig({displayName:"InstructionContainer",componentId:"sc-1tjn6f7-0"})((({theme:{token:e}})=>({display:"flex",flexDirection:"column",gap:10})))}}]);