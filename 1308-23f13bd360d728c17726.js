"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[1308],{51308:(e,n,r)=>{r.r(n),r.d(n,{default:()=>F});var t,i=r(9661),o=r(54533),a=r(36926),s=r(56858),l=r(53334),c=r(75576),d=r(33283),u=r(92936),m=r(95798),k=r(12798),f=r(55204),h=r(92280),p=r(99656),x=r(72779),y=r.n(x),g=r(6746),E=r(58584),j=r(2784),w=r(21427),L=r(73557),b=r(38338),W=r(62197),R=r.n(W),v=r(95292),_=r(68774),C=r(94684),Z=r(55446),N=r(52322);!function(e){e.BOND_REWARD="bond-reward"}(t||(t={}));const F=(0,b.ZP)((e=>{const{className:n}=e,{chain:r,type:x}=(0,L.UO)(),b=x,W=(0,L.s0)(),F=(0,j.useContext)(c.R0),{asset:A,chain:B,from:D,onDone:O,setChain:S,setFrom:M}=(0,j.useContext)(Z.TransactionContext),{currentAccount:I,isAllAccount:T}=(0,d.v9)((e=>e.accountState)),{stakingRewardMap:X}=(0,d.v9)((e=>e.staking)),{chainInfoMap:H}=(0,d.v9)((e=>e.chainStore)),P=(0,d._y)(r,b),{decimals:Q,symbol:G}=(0,d.cR)(B),z=(0,j.useMemo)((()=>X.find((e=>e.chain===B&&e.address===D&&e.type===b))),[B,D,X,b]),K=(0,j.useMemo)((()=>X.filter((e=>e.chain===B&&e.type===b))),[B,X,b]),[U,V]=(0,j.useState)(!0),[$,q]=(0,j.useState)(!1),[J,Y]=(0,j.useState)(!0),[ee]=k.Z.useForm(),ne=(0,j.useMemo)((()=>({from:D,chain:B,asset:A,[t.BOND_REWARD]:!0})),[A,B,D]),{onError:re,onSuccess:te}=(0,d.Ls)(O),ie=(0,j.useCallback)((()=>{W("/home/staking")}),[W]),oe=(0,j.useCallback)(((e,n)=>{var r;const{error:t}=(0,m.ij)(n),i=(0,m.eW)(e),o=(0,m.eW)(n),{from:a}=i;void 0!==a&&M(a),V(t||!(null===(r=o.from)||void 0===r||r))}),[M]),{t:ae}=(0,w.$)(),se=(0,j.useCallback)((e=>{q(!0);const{[t.BOND_REWARD]:n}=e;setTimeout((()=>{(0,u.QQ)({address:D,chain:B,bondReward:n,stakingType:b,unclaimedReward:null==z?void 0:z.unclaimedReward}).then(te).catch(re).finally((()=>{q(!1)}))}),300)}),[B,D,re,te,null==z?void 0:z.unclaimedReward,b]),le=(0,d.Ey)(D),ce=(0,j.useCallback)((e=>{const n=r||"",t=H[n];if(!t)return!1;if(e.originGenesisHash&&(0,a.zb)(t)!==e.originGenesisHash)return!1;if((0,m.W_)(e.address))return!1;if(e.isReadOnly)return!1;if((0,a.h4)(t)!==(0,_.u)(e.address))return!1;if(!P.find((n=>(0,s.Wr)(n.address,e.address))))return!1;const l=K.find((n=>(0,s.Wr)(n.address,e.address))),c=o.H_.astar.includes(n),d=o.H_.amplitude.includes(n),u=new(R())((null==l?void 0:l.unclaimedReward)||"0");return(b===i.WQ.POOLED||d)&&u.gt(v.nw)||c}),[P,H,K,r,b]);return(0,j.useEffect)((()=>{const e=(null==I?void 0:I.address)||"";e&&((0,m.W_)(e)||M(e))}),[null==I?void 0:I.address,ee,M]),(0,j.useEffect)((()=>{S(r||"")}),[S,r]),(0,j.useEffect)((()=>{setTimeout((()=>{ee.validateFields().finally(m.ZT)}),500)}),[ee]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C.tc,{children:(0,N.jsx)(l.FE,{resolve:F.awaitStores(["staking"]),children:(0,N.jsxs)(k.Z,{className:y()(n,"form-container form-space-sm"),form:ee,initialValues:ne,onFieldsChange:oe,onFinish:se,children:[(0,N.jsx)(k.Z.Item,{hidden:!T,name:"from",children:(0,N.jsx)(l.pK,{filter:ce})}),(0,N.jsx)(C.ZL,{address:D,chain:B,className:"free-balance",label:ae("Available balance:"),onBalanceReady:Y}),(0,N.jsx)(k.Z.Item,{children:(0,N.jsxs)(l.oB,{className:"claim-reward-meta-info",hasBackgroundWrapper:!0,children:[(0,N.jsx)(l.oB.Chain,{chain:B,label:ae("Network")}),(null==z?void 0:z.unclaimedReward)&&(0,N.jsx)(l.oB.Number,{decimals:Q,label:ae("Reward claiming"),suffix:G,value:z.unclaimedReward})]})}),b===i.WQ.POOLED&&(0,N.jsx)(k.Z.Item,{name:t.BOND_REWARD,valuePropName:"checked",children:(0,N.jsx)(f.Z,{children:(0,N.jsx)("span",{className:"__option-label",children:ae("Bond reward after claim")})})})]})})}),(0,N.jsxs)(C.Xd,{errors:[],warnings:[],children:[(0,N.jsx)(h.Z,{disabled:$,icon:(0,N.jsx)(p.Z,{phosphorIcon:g.Z,weight:"fill"}),onClick:ie,schema:"secondary",children:ae("Cancel")}),(0,N.jsx)(h.Z,{disabled:U||!J,icon:(0,N.jsx)(p.Z,{phosphorIcon:E.Z,weight:"fill"}),loading:$,onClick:le(ee.submit),children:ae("Continue")})]})]})})).withConfig({displayName:"ClaimReward",componentId:"sc-1xc3rai-0"})((({theme:{token:e}})=>({".unstaked-field, .free-balance":{marginBottom:e.marginXS},".meta-info":{marginTop:e.paddingSM},".cancel-unstake-info-item > .__col":{flex:"initial",paddingRight:e.paddingXXS},".claim-reward-meta-info":{marginTop:e.marginXXS},".ant-checkbox-wrapper":{display:"flex",alignItems:"center",".ant-checkbox":{top:0}}})))},58584:(e,n,r)=>{r.d(n,{Z:()=>c});var t=r(2784),i=r(21890),o=r(76712),a=new Map;a.set("bold",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),a.set("duotone",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",opacity:"0.2"}),t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),a.set("fill",(function(){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.2,104.2,0,0,0,128,24Zm47.4,107.1a8.7,8.7,0,0,1-1.8,2.6l-33.9,33.9a7.6,7.6,0,0,1-5.6,2.3,7.8,7.8,0,0,1-5.7-2.3,8,8,0,0,1,0-11.3L148.7,136H88a8,8,0,0,1,0-16h60.7L128.4,99.7a8,8,0,0,1,11.3-11.3l33.9,33.9a8.7,8.7,0,0,1,1.8,2.6A8.3,8.3,0,0,1,175.4,131.1Z"}))})),a.set("light",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),a.set("thin",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),a.set("regular",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var s=function(e,n){return(0,i._)(e,n,a)},l=(0,t.forwardRef)((function(e,n){return t.createElement(o.Z,Object.assign({ref:n},e,{renderPath:s}))}));l.displayName="ArrowCircleRight";const c=l}}]);