"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[7043,3738],{13738:(e,n,t)=>{t.r(n),t.d(n,{TransactionContext:()=>y,default:()=>w});var r=t(9661),o=t(18906),s=t(11637),a=t(87574),i=t(75576),c=t(33283),l=t(12162),d=t(90809),u=t(72779),m=t.n(u),h=t(2784),f=t(35185),p=t(73557),k=t(38338),x=t(68774),g=t(52322);const y=h.createContext({transactionType:r.Vv.TRANSFER_BALANCE,from:"",setFrom:e=>{},chain:"",setChain:e=>{},asset:"",setAsset:e=>{},onDone:e=>{},onClickRightBtn:()=>{},setShowRightBtn:e=>{},setDisabledRightBtn:e=>{}}),w=(0,k.ZP)((function({className:e}){const{t:n}=(0,c.$G)(),t=(0,p.TH)(),u=(0,p.s0)(),{activeModal:k}=(0,h.useContext)(l.t),w=(0,h.useContext)(i.R0),{currentAccount:v,isAllAccount:j}=(0,f.v9)((e=>e.accountState)),T=(0,h.useMemo)((()=>{switch(t.pathname.split("/")[2]||""){case"stake":return r.Vv.STAKING_JOIN_POOL;case"unstake":return r.Vv.STAKING_LEAVE_POOL;case"cancel-unstake":return r.Vv.STAKING_CANCEL_UNSTAKE;case"claim-reward":return r.Vv.STAKING_CLAIM_REWARD;case"withdraw":return r.Vv.STAKING_WITHDRAW;case"compound":return r.Vv.STAKING_COMPOUNDING;case"send-nft":return r.Vv.SEND_NFT;default:return r.Vv.TRANSFER_BALANCE}}),[t.pathname]),N=(0,h.useMemo)((()=>{switch(t.pathname.split("/")[2]||""){case"stake":case"unstake":case"cancel-unstake":case"claim-reward":case"withdraw":case"compound":return"/home/staking";case"send-nft":return"/home/nfts/collections";default:return"/home/tokens"}}),[t.pathname]),b=(0,h.useMemo)((()=>{const e={};for(const[t,r]of Object.entries(a.mG))e[t]=n(r);return e}),[n]);(0,c.qg)(N);const[C,I]=(0,h.useState)(j?"":(null==v?void 0:v.address)||""),[E,L]=(0,h.useState)(""),[S,A]=(0,h.useState)(""),[_,Z]=(0,h.useState)(!1),[B,R]=(0,h.useState)(!1),F=(0,c.xC)(),W=(0,h.useCallback)((()=>{u(N)}),[N,u]),P=(0,h.useCallback)((e=>{const n=(0,x.u)(C)?"ethereum":"substrate";u(`/transaction-done/${n}/${E}/${e}`,{replace:!0})}),[C,E,u]),M=(0,h.useCallback)((()=>{T===r.Vv.STAKING_JOIN_POOL&&k(s.p)}),[k,T]),O=(0,h.useMemo)((()=>_?[{disabled:B,icon:(0,g.jsx)(o.sz,{}),onClick:()=>M()}]:[]),[B,M,_]);return(0,h.useEffect)((()=>{""!==S&&F(S)}),[S,F]),(0,g.jsx)(o.Ar.Home,{showFilterIcon:!0,showTabBar:!1,children:(0,g.jsx)(y.Provider,{value:{transactionType:T,from:C,setFrom:I,chain:E,setChain:L,onDone:P,onClickRightBtn:M,setShowRightBtn:Z,setDisabledRightBtn:R,asset:S,setAsset:A},children:(0,g.jsx)(o.FE,{resolve:w.awaitStores(["chainStore","assetRegistry","balance"]),children:(0,g.jsxs)("div",{className:m()(e,"transaction-wrapper"),children:[(0,g.jsx)(d.Z,{background:"transparent",center:!0,className:"transaction-header",onBack:W,rightButtons:O,showBackButton:!0,title:b[T]}),(0,g.jsx)(p.j3,{})]})})})})})).withConfig({displayName:"Transaction",componentId:"sc-1qz55vb-0"})((({theme:e})=>{const n=e.token;return{height:"100%",display:"flex",flexDirection:"column",".transaction-header":{paddingTop:n.paddingSM,paddingBottom:n.paddingSM,flexShrink:0},".transaction-content":{flex:"1 1 400px",paddingLeft:n.padding,paddingRight:n.padding,overflow:"auto"},".transaction-footer":{display:"flex",flexWrap:"wrap",padding:`${n.paddingMD}px ${n.padding}px ${n.padding}px`,marginBottom:n.padding,gap:n.paddingXS,".error-messages":{width:"100%",color:n.colorError},".warning-messages":{width:"100%",color:n.colorWarning},".ant-btn":{flex:1},".full-width":{minWidth:"100%"}}}}))},52274:(e,n,t)=>{t.d(n,{nC:()=>f,x1:()=>p.x1,bO:()=>i});var r=t(80949),o=t(54533);const s="RMRK",a="SEND";function i(e,n){return e.type===r.Ym.ERC721?function(e){return{contractAddress:e.collectionId,tokenId:parseInt(e.id)}}(e):e.type===r.Ym.PSP34?function(e){return{contractAddress:e.collectionId,onChainOption:e.onChainOption,isPsp34:!0,networkKey:e.chain}}(e):o.r$.acala.includes(n)||o.r$.karura.includes(n)||o.r$.bitcountry.includes(n)?function(e){return{collectionId:parseInt(e.collectionId),itemId:parseInt(e.id),networkKey:e.chain}}(e):o.r$.rmrk.includes(n)?function(e){return e.rmrk_ver?{remark:`${s}::${a}::${e.rmrk_ver}::${e.id}::`,networkKey:e.chain}:{}}(e):o.r$.statemine.includes(n)||o.r$.unique_network.includes(n)?function(e){return{collectionId:parseInt(e.collectionId),itemId:parseInt(e.id),networkKey:e.chain}}(e):{}}var c=t(9661),l=t(36926),d=t(95110),u=t(95798),m=t(68774);const h=(e,n)=>t=>!(t.originGenesisHash&&n&&(0,l.zb)(n)!==t.originGenesisHash||(0,u.W_)(t.address)||t.isReadOnly||e===c.WQ.POOLED&&(0,m.u)(t.address)),f=(e,n,t)=>r=>{if(t&&t!==d.EN){const o=e[t],s=h(n,o),a=(0,l.h4)(o);return s(r)&&a===(0,m.u)(r.address)}return h(n)(r)};var p=t(11164)},94684:(e,n,t)=>{t.d(n,{gy:()=>u,ZL:()=>f,tc:()=>p,Xd:()=>k});var r=t(43246),o=t(96562),s=t(25690),a=t(72779),i=t.n(a),c=t(2784),l=t(38338),d=t(52322);const u=(0,l.ZP)((({bondedBalance:e,className:n,decimals:t,label:a,symbol:c})=>{const{t:u}=(0,r.Z)(),{token:m}=(0,l.Fg)();return(0,d.jsxs)(o.Z.Paragraph,{className:i()(n,"bonded-balance"),children:[(0,d.jsx)(s.Z,{decimal:t,decimalColor:m.colorTextTertiary,intColor:m.colorTextTertiary,size:14,suffix:c,unitColor:m.colorTextTertiary,value:e||0}),a||u("Bonded")]})})).withConfig({displayName:"BondedBalance",componentId:"sc-15arqr7-0"})((({theme:{token:e}})=>({display:"flex",color:e.colorTextTertiary,"&.ant-typography":{marginBottom:0},".ant-number":{marginRight:"0.3em"}})));var m=t(33283),h=t(96108);const f=(0,l.ZP)((({address:e,chain:n,className:t,label:a,onBalanceReady:u,tokenSlug:f})=>{const{t:p}=(0,r.Z)(),{token:k}=(0,l.Fg)(),{error:x,isLoading:g,nativeTokenBalance:y,nativeTokenSlug:w,tokenBalance:v}=(0,m.L5)(n,e,f);return(0,c.useEffect)((()=>{null==u||u(!g&&!x)}),[x,g,u]),e||n?(0,d.jsxs)(o.Z.Paragraph,{className:i()(t,"free-balance"),children:[a||p("Sender available balance:")," ",g&&(0,d.jsx)(h.Z,{size:14}),x&&(0,d.jsx)(o.Z.Text,{className:"error-message",children:x}),!g&&!x&&!!w&&(0,d.jsx)(s.Z,{decimal:y.decimals||18,decimalColor:k.colorTextTertiary,intColor:k.colorTextTertiary,size:14,suffix:y.symbol,unitColor:k.colorTextTertiary,value:y.value}),!g&&!x&&!!f&&f!==w&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{className:"__name",children:[" ",p("and")," "]}),(0,d.jsx)(s.Z,{decimal:(null==v?void 0:v.decimals)||18,decimalColor:k.colorTextTertiary,intColor:k.colorTextTertiary,size:14,suffix:null==v?void 0:v.symbol,unitColor:k.colorTextTertiary,value:v.value})]})]}):(0,d.jsx)(d.Fragment,{})})).withConfig({displayName:"FreeBalance",componentId:"sc-f3bkwa-0"})((({theme:{token:e}})=>({display:"flex",flexWrap:"wrap",color:e.colorTextTertiary,".error-message":{color:e.colorError},"&.ant-typography":{marginBottom:0}}))),p=(0,l.ZP)((({children:e,className:n=""})=>(0,d.jsx)("div",{className:`transaction-content ${n}`,children:e}))).withConfig({displayName:"TransactionContent",componentId:"sc-17nushy-0"})((({theme:e})=>({}))),k=(0,l.ZP)((({children:e,className:n="",errors:t,warnings:r})=>(0,d.jsxs)("div",{className:`transaction-footer ${n}`,children:[t.length>0&&(0,d.jsx)("div",{className:"error-messages",children:t.map(((e,n)=>(0,d.jsx)("div",{children:e},n)))}),r.length>0&&(0,d.jsx)("div",{className:"warning-messages",children:r.map(((e,n)=>(0,d.jsx)("div",{children:e},n)))}),e]}))).withConfig({displayName:"TransactionFooter",componentId:"sc-bpci6r-0"})((({theme:e})=>({})))},17043:(e,n,t)=>{t.r(n),t.d(n,{default:()=>S});var r=t(56858),o=t(18906),s=t(75576),a=t(33283),i=t(92936),c=t(95798),l=t(12798),d=t(88976),u=t(96562),m=t(92280),h=t(99656),f=t(72779),p=t.n(f),k=t(58584),x=t(2784),g=t(96217),y=t(73557),w=t(38338),v=t(61162),j=t(68774),T=t(52274),N=t(94684),b=t(13738),C=t(52322);const I={collectionId:"unknown",chain:"unknown"},E={collectionId:"unknown",chain:"unknown",owner:"unknown",id:"unknown"},L=()=>{const{t:e}=(0,g.$)(),n=(0,y.s0)(),{chain:t="",collectionId:s,itemId:f,owner:w=""}=(0,y.UO)(),{chainInfoMap:L}=(0,a.v9)((e=>e.chainStore)),{nftCollections:S,nftItems:A}=(0,a.v9)((e=>e.nft)),[_,Z]=(0,x.useState)(!0),B=(0,x.useMemo)((()=>A.find((e=>(0,r.Wr)(e.owner,w)&&t===e.chain&&e.collectionId===s&&e.id===f))||E),[s,f,t,A,w]),R=(0,x.useMemo)((()=>S.find((e=>t===e.chain&&e.collectionId===s))||I),[s,t,S]),F=(0,x.useMemo)((()=>L[t]),[L,t]),W=(0,a.xo)(t),{chain:P,from:M,onDone:O,setChain:$,setFrom:K}=(0,x.useContext)(b.TransactionContext),{onError:D,onSuccess:G}=(0,a.Ls)(O),[V]=l.Z.useForm(),z=(0,x.useMemo)((()=>({from:M,chain:P,to:""})),[P,M]),[H,q]=(0,x.useState)(!0),[U,X]=(0,x.useState)(!1),J=(0,x.useCallback)((({getFieldValue:n})=>({validator:(n,t)=>{if(!t)return Promise.reject(e("The recipient address is required"));if(!(0,v.U)(t))return Promise.reject(e("Invalid recipient address"));if((0,r.Wr)(t,M))return Promise.reject(e("The recipient address can not be the same as the sender address"));if((0,j.u)(t)!==(0,j.u)(M)){const n=(0,j.u)(M)?e("Receive address must be of evm account."):e("Receive address must be of substrate account.");return Promise.reject(n)}return Promise.resolve()}})),[e,M]),Y=(0,x.useCallback)(((e,n)=>{const{error:t}=(0,c.ij)(n);q(t)}),[]),Q=(0,x.useCallback)((e=>{const n=(0,j.u)(M),{to:t}=e,r=(0,T.bO)(B,P);let o;o=n?(0,i.Y5)({senderAddress:M,networkKey:P,recipientAddress:t,nftItemName:null==B?void 0:B.name,params:r,nftItem:B}):(0,i.GW)({networkKey:P,recipientAddress:t,senderAddress:M,nftItemName:null==B?void 0:B.name,params:r,nftItem:B}),X(!0),setTimeout((()=>{o.then(G).catch(D).finally((()=>{X(!1)}))}),300)}),[P,M,B,D,G]),ee=(0,a.Ey)(M);return(0,x.useEffect)((()=>{$(t),K(w)}),[t,w,$,K]),(0,x.useEffect)((()=>{B!==E&&R!==I||n("/home/nfts/collections")}),[R,n,B]),(0,a.uy)(V,"to"),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(N.tc,{className:p()("-transaction-content"),children:[(0,C.jsxs)("div",{className:"nft_item_detail text-center",children:[(0,C.jsx)(d.Z,{height:120,src:B.image}),(0,C.jsx)(u.Z.Title,{level:5,children:B.name})]}),(0,C.jsxs)(l.Z,{className:"form-container form-space-sm",form:V,initialValues:z,onFieldsChange:Y,onFinish:Q,children:[(0,C.jsx)(l.Z.Item,{name:"to",rules:[J],statusHelpAsTooltip:!0,children:(0,C.jsx)(o.Jg,{addressPrefix:W,label:e("Send to account"),showAddressBook:!0,showScanner:!0})}),(0,C.jsx)(l.Z.Item,{children:(0,C.jsx)(o.oT,{disabled:!0,items:F?[{name:F.name,slug:F.slug}]:[],label:e("Network"),value:R.chain})})]}),(0,C.jsx)(N.ZL,{address:M,chain:P,onBalanceReady:Z})]}),(0,C.jsx)(N.Xd,{className:"send-nft-transaction-footer",errors:[],warnings:[],children:(0,C.jsx)(m.Z,{disabled:H||!_,icon:(0,C.jsx)(h.Z,{phosphorIcon:k.Z,weight:"fill"}),loading:U,onClick:ee(V.submit),children:e("Next")})})]})},S=(0,w.ZP)((e=>{const{className:n}=e,t=(0,x.useContext)(s.R0);return(0,C.jsx)(o.FE,{className:n,resolve:t.awaitStores(["nft"]),children:(0,C.jsx)(L,{})})})).withConfig({displayName:"SendNFT",componentId:"sc-13wb87a-0"})((({theme:{token:e}})=>({flex:1,display:"flex",flexDirection:"column",overflow:"hidden",".nft_item_detail h5":{marginTop:e.marginXS,marginBottom:e.margin}})))},58584:(e,n,t)=>{t.d(n,{Z:()=>l});var r=t(2784),o=t(21890),s=t(76712),a=new Map;a.set("bold",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),a.set("duotone",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",opacity:"0.2"}),r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),a.set("fill",(function(){return r.createElement(r.Fragment,null,r.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.2,104.2,0,0,0,128,24Zm47.4,107.1a8.7,8.7,0,0,1-1.8,2.6l-33.9,33.9a7.6,7.6,0,0,1-5.6,2.3,7.8,7.8,0,0,1-5.7-2.3,8,8,0,0,1,0-11.3L148.7,136H88a8,8,0,0,1,0-16h60.7L128.4,99.7a8,8,0,0,1,11.3-11.3l33.9,33.9a8.7,8.7,0,0,1,1.8,2.6A8.3,8.3,0,0,1,175.4,131.1Z"}))})),a.set("light",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),a.set("thin",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),a.set("regular",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var i=function(e,n){return(0,o._)(e,n,a)},c=(0,r.forwardRef)((function(e,n){return r.createElement(s.Z,Object.assign({ref:n},e,{renderPath:i}))}));c.displayName="ArrowCircleRight";const l=c}}]);