"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[58,3738],{15875:(e,n,t)=>{t.d(n,{D1:()=>u,Ff:()=>c,Kn:()=>h,VN:()=>d,k2:()=>m,tA:()=>l});var r=t(9661),a=t(54533),s=t(62197),o=t.n(s),i=t(95292);function l(e){return a.H_.amplitude.includes(e)?"showByValue":a.H_.astar.includes(e)?"mixed":a.H_.para.includes(e)?"showByValidator":"showByValue"}let c=function(e){return e.STAKE="STAKE",e.UNSTAKE="UNSTAKE",e.WITHDRAW="WITHDRAW",e.CLAIM_REWARD="CLAIM_REWARD",e.CANCEL_UNSTAKE="CANCEL_UNSTAKE",e}({});function d(e,n){return n===r.WQ.POOLED?[c.STAKE,c.UNSTAKE,c.WITHDRAW,c.CLAIM_REWARD]:a.H_.para.includes(e)?[c.STAKE,c.UNSTAKE,c.WITHDRAW,c.CANCEL_UNSTAKE]:a.H_.astar.includes(e)?[c.STAKE,c.UNSTAKE,c.WITHDRAW,c.CLAIM_REWARD]:a.H_.amplitude.includes(e)?[c.STAKE,c.UNSTAKE,c.WITHDRAW]:[c.STAKE,c.UNSTAKE,c.WITHDRAW,c.CANCEL_UNSTAKE]}function u(e,n){const t=[c.STAKE],s=new(o())(e.activeStake);if(e.activeStake&&s.gt(i.nw)){t.push(c.UNSTAKE);const s=a.H_.astar.includes(e.chain),l=a.H_.amplitude.includes(e.chain),d=new(o())(n||"0");((e.type===r.WQ.POOLED||l)&&d.gt(i.nw)||s)&&t.push(c.CLAIM_REWARD)}if(e.unstakings.length>0){t.push(c.CANCEL_UNSTAKE);let n=!1;for(const t of e.unstakings)if(t.status===r.lz.CLAIMABLE){n=!0;break}n&&t.push(c.WITHDRAW)}return t}function m(e,n){return!(e===r.WQ.POOLED||!a.H_.astar.includes(n)&&!a.H_.amplitude.includes(n)&&!a.H_.para.includes(n))}function h(e){const n=e.unstakings;let t;for(const e of n)if(e.status===r.lz.CLAIMABLE){t=e;break}return t}},13738:(e,n,t)=>{t.r(n),t.d(n,{TransactionContext:()=>A,default:()=>E});var r=t(9661),a=t(51076),s=t(11637),o=t(63470),i=t(75576),l=t(29709),c=t(12162),d=t(90809),u=t(72779),m=t.n(u),h=t(2784),p=t(35185),f=t(73557),k=t(38338),g=t(68774),x=t(52322);const A=h.createContext({transactionType:r.Vv.TRANSFER_BALANCE,from:"",setFrom:e=>{},chain:"",setChain:e=>{},asset:"",setAsset:e=>{},onDone:e=>{},onClickRightBtn:()=>{},setShowRightBtn:e=>{},setDisabledRightBtn:e=>{}}),E=(0,k.ZP)((function({className:e}){const{t:n}=(0,l.$G)(),t=(0,f.TH)(),u=(0,f.s0)(),{activeModal:k}=(0,h.useContext)(c.t),E=(0,h.useContext)(i.R0),{currentAccount:y,isAllAccount:T}=(0,p.v9)((e=>e.accountState)),C=(0,h.useMemo)((()=>{switch(t.pathname.split("/")[2]||""){case"stake":return r.Vv.STAKING_JOIN_POOL;case"unstake":return r.Vv.STAKING_LEAVE_POOL;case"cancel-unstake":return r.Vv.STAKING_CANCEL_UNSTAKE;case"claim-reward":return r.Vv.STAKING_CLAIM_REWARD;case"withdraw":return r.Vv.STAKING_WITHDRAW;case"compound":return r.Vv.STAKING_COMPOUNDING;case"send-nft":return r.Vv.SEND_NFT;default:return r.Vv.TRANSFER_BALANCE}}),[t.pathname]),N=(0,h.useMemo)((()=>{switch(t.pathname.split("/")[2]||""){case"stake":case"unstake":case"cancel-unstake":case"claim-reward":case"withdraw":case"compound":return"/home/staking";case"send-nft":return"/home/nfts/collections";default:return"/home/tokens"}}),[t.pathname]),L=(0,h.useMemo)((()=>{const e={};for(const[t,r]of Object.entries(o.mG))e[t]=n(r);return e}),[n]);(0,l.qg)(N);const[S,v]=(0,h.useState)(T?"":(null==y?void 0:y.address)||""),[w,b]=(0,h.useState)(""),[j,I]=(0,h.useState)(""),[W,_]=(0,h.useState)(!1),[R,B]=(0,h.useState)(!1),K=(0,l.xC)(),Z=(0,h.useCallback)((()=>{u(N)}),[N,u]),D=(0,h.useCallback)((e=>{const n=(0,g.u)(S)?"ethereum":"substrate";u(`/transaction-done/${n}/${w}/${e}`,{replace:!0})}),[S,w,u]),M=(0,h.useCallback)((()=>{C===r.Vv.STAKING_JOIN_POOL&&k(s.p)}),[k,C]),F=(0,h.useMemo)((()=>W?[{disabled:R,icon:(0,x.jsx)(a.sz,{}),onClick:()=>M()}]:[]),[R,M,W]);return(0,h.useEffect)((()=>{""!==j&&K(j)}),[j,K]),(0,x.jsx)(a.Ar.Home,{showFilterIcon:!0,showTabBar:!1,children:(0,x.jsx)(A.Provider,{value:{transactionType:C,from:S,setFrom:v,chain:w,setChain:b,onDone:D,onClickRightBtn:M,setShowRightBtn:_,setDisabledRightBtn:B,asset:j,setAsset:I},children:(0,x.jsx)(a.FE,{resolve:E.awaitStores(["chainStore","assetRegistry","balance"]),children:(0,x.jsxs)("div",{className:m()(e,"transaction-wrapper"),children:[(0,x.jsx)(d.Z,{background:"transparent",center:!0,className:"transaction-header",onBack:Z,rightButtons:F,showBackButton:!0,title:L[C]}),(0,x.jsx)(f.j3,{})]})})})})})).withConfig({displayName:"Transaction",componentId:"sc-1qz55vb-0"})((({theme:e})=>{const n=e.token;return{height:"100%",display:"flex",flexDirection:"column",".transaction-header":{paddingTop:n.paddingSM,paddingBottom:n.paddingSM,flexShrink:0},".transaction-content":{flex:"1 1 400px",paddingLeft:n.padding,paddingRight:n.padding,overflow:"auto"},".transaction-footer":{display:"flex",flexWrap:"wrap",padding:`${n.paddingMD}px ${n.padding}px ${n.padding}px`,marginBottom:n.padding,gap:n.paddingXS,".error-messages":{width:"100%",color:n.colorError},".warning-messages":{width:"100%",color:n.colorWarning},".ant-btn":{flex:1},".full-width":{minWidth:"100%"}}}}))},52274:(e,n,t)=>{t.d(n,{nC:()=>p,x1:()=>f.x1,bO:()=>i});var r=t(80949),a=t(54533);const s="RMRK",o="SEND";function i(e,n){return e.type===r.Ym.ERC721?function(e){return{contractAddress:e.collectionId,tokenId:parseInt(e.id)}}(e):e.type===r.Ym.PSP34?function(e){return{contractAddress:e.collectionId,onChainOption:e.onChainOption,isPsp34:!0,networkKey:e.chain}}(e):a.r$.acala.includes(n)||a.r$.karura.includes(n)||a.r$.bitcountry.includes(n)?function(e){return{collectionId:parseInt(e.collectionId),itemId:parseInt(e.id),networkKey:e.chain}}(e):a.r$.rmrk.includes(n)?function(e){return e.rmrk_ver?{remark:`${s}::${o}::${e.rmrk_ver}::${e.id}::`,networkKey:e.chain}:{}}(e):a.r$.statemine.includes(n)||a.r$.unique_network.includes(n)?function(e){return{collectionId:parseInt(e.collectionId),itemId:parseInt(e.id),networkKey:e.chain}}(e):{}}var l=t(9661),c=t(36926),d=t(95110),u=t(95798),m=t(68774);const h=(e,n)=>t=>!(t.originGenesisHash&&n&&(0,c.zb)(n)!==t.originGenesisHash||(0,u.W_)(t.address)||t.isReadOnly||e===l.WQ.POOLED&&(0,m.u)(t.address)),p=(e,n,t)=>r=>{if(t&&t!==d.EN){const a=e[t],s=h(n,a),o=(0,c.h4)(a);return s(r)&&o===(0,m.u)(r.address)}return h(n)(r)};var f=t(11164)},94684:(e,n,t)=>{t.d(n,{gy:()=>u,ZL:()=>p,tc:()=>f,Xd:()=>k});var r=t(43246),a=t(96562),s=t(25690),o=t(72779),i=t.n(o),l=t(2784),c=t(38338),d=t(52322);const u=(0,c.ZP)((({bondedBalance:e,className:n,decimals:t,label:o,symbol:l})=>{const{t:u}=(0,r.Z)(),{token:m}=(0,c.Fg)();return(0,d.jsxs)(a.Z.Paragraph,{className:i()(n,"bonded-balance"),children:[(0,d.jsx)(s.Z,{decimal:t,decimalColor:m.colorTextTertiary,intColor:m.colorTextTertiary,size:14,suffix:l,unitColor:m.colorTextTertiary,value:e||0}),o||u("Bonded")]})})).withConfig({displayName:"BondedBalance",componentId:"sc-15arqr7-0"})((({theme:{token:e}})=>({display:"flex",color:e.colorTextTertiary,"&.ant-typography":{marginBottom:0},".ant-number":{marginRight:"0.3em"}})));var m=t(29709),h=t(96108);const p=(0,c.ZP)((({address:e,chain:n,className:t,label:o,onBalanceReady:u,tokenSlug:p})=>{const{t:f}=(0,r.Z)(),{token:k}=(0,c.Fg)(),{error:g,isLoading:x,nativeTokenBalance:A,nativeTokenSlug:E,tokenBalance:y}=(0,m.L5)(n,e,p);return(0,l.useEffect)((()=>{console.log("onBalanceReady",!x&&!g),null==u||u(!x&&!g)}),[g,x,u]),e||n?(0,d.jsxs)(a.Z.Paragraph,{className:i()(t,"free-balance"),children:[o||f("Sender available balance:")," ",x&&(0,d.jsx)(h.Z,{size:14}),g&&(0,d.jsx)(a.Z.Text,{className:"error-message",children:g}),!x&&!g&&!!E&&(0,d.jsx)(s.Z,{decimal:A.decimals||18,decimalColor:k.colorTextTertiary,intColor:k.colorTextTertiary,size:14,suffix:A.symbol,unitColor:k.colorTextTertiary,value:A.value}),!x&&!g&&!!p&&p!==E&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{className:"__name",children:[" ",f("and")," "]}),(0,d.jsx)(s.Z,{decimal:(null==y?void 0:y.decimals)||18,decimalColor:k.colorTextTertiary,intColor:k.colorTextTertiary,size:14,suffix:null==y?void 0:y.symbol,unitColor:k.colorTextTertiary,value:y.value})]})]}):(0,d.jsx)(d.Fragment,{})})).withConfig({displayName:"FreeBalance",componentId:"sc-f3bkwa-0"})((({theme:{token:e}})=>({display:"flex",flexWrap:"wrap",color:e.colorTextTertiary,".error-message":{color:e.colorError},"&.ant-typography":{marginBottom:0}}))),f=(0,c.ZP)((({children:e,className:n=""})=>(0,d.jsx)("div",{className:`transaction-content ${n}`,children:e}))).withConfig({displayName:"TransactionContent",componentId:"sc-17nushy-0"})((({theme:e})=>({}))),k=(0,c.ZP)((({children:e,className:n="",errors:t,warnings:r})=>(0,d.jsxs)("div",{className:`transaction-footer ${n}`,children:[t.length>0&&(0,d.jsx)("div",{className:"error-messages",children:t.map(((e,n)=>(0,d.jsx)("div",{children:e},n)))}),r.length>0&&(0,d.jsx)("div",{className:"warning-messages",children:r.map(((e,n)=>(0,d.jsx)("div",{children:e},n)))}),e]}))).withConfig({displayName:"TransactionFooter",componentId:"sc-bpci6r-0"})((({theme:e})=>({})))},50058:(e,n,t)=>{t.r(n),t.d(n,{default:()=>N});var r=t(9661),a=t(15875),s=t(56858),o=t(51076),i=t(75576),l=t(29709),c=t(92936),d=t(52274),u=t(95798),m=t(12798),h=t(92280),p=t(99656),f=t(6746),k=t(58584),g=t(2784),x=t(96217),A=t(73557),E=t(38338),y=t(94684),T=t(13738),C=t(52322);const N=(0,E.ZP)((e=>{const{className:n=""}=e,{chain:t,type:E}=(0,A.UO)(),N=E,{t:L}=(0,x.$)(),S=(0,A.s0)(),v=(0,g.useContext)(i.R0),{asset:w,chain:b,from:j,onDone:I,setChain:W,setFrom:_}=(0,g.useContext)(T.TransactionContext),{currentAccount:R,isAllAccount:B}=(0,l.v9)((e=>e.accountState)),{chainInfoMap:K}=(0,l.v9)((e=>e.chainStore)),[Z,D]=(0,g.useState)(!0),M=(0,l._y)(t,N),F=(0,l._y)(t,N,j)[0],H=(0,g.useMemo)((()=>{if(j&&!(0,u.W_)(j))return F.unstakings.filter((e=>e.status===r.lz.CLAIMABLE))[0]}),[j,F]),[O,P]=(0,g.useState)(!0),[$,U]=(0,g.useState)(!1),[V]=m.Z.useForm(),G=(0,g.useMemo)((()=>({from:j,chain:b,asset:w})),[w,b,j]),{decimals:z,symbol:q}=(0,l.cR)(b),Q=(0,g.useCallback)((()=>{S("/home/staking")}),[S]),X=(0,g.useCallback)(((e,n)=>{const{empty:t,error:r}=(0,u.ij)(n),a=(0,u.eW)(e),{from:s}=a;void 0!==s&&_(s),P(t||r)}),[_]),{onError:J,onSuccess:Y}=(0,l.Ls)(I),ee=(0,g.useCallback)((e=>{if(U(!0),!H)return void U(!1);const n={unstakingInfo:H,chain:F.chain,nominatorMetadata:F};(0,a.k2)(N,b)&&(n.validatorAddress=H.validatorAddress),setTimeout((()=>{(0,c.E_)(n).then(Y).catch(J).finally((()=>{U(!1)}))}),300)}),[b,F,J,Y,N,H]),ne=(0,l.Ey)(j),te=(0,g.useCallback)((e=>{const n=M.find((n=>(0,s.Wr)(n.address,e.address)));return!!n&&n.unstakings.filter((e=>e.status===r.lz.CLAIMABLE)).length>0&&(0,d.nC)(K,N,t)(e)}),[K,M,t,N]);return(0,g.useEffect)((()=>{const e=(null==R?void 0:R.address)||"";e&&((0,u.W_)(e)||_(e))}),[null==R?void 0:R.address,_]),(0,g.useEffect)((()=>{W(t||"")}),[W,t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(y.tc,{children:(0,C.jsx)(o.FE,{resolve:v.awaitStores(["staking"]),children:(0,C.jsxs)(m.Z,{className:`${n} form-container form-space-sm`,form:V,initialValues:G,onFieldsChange:X,onFinish:ee,children:[B&&(0,C.jsx)(m.Z.Item,{name:"from",children:(0,C.jsx)(o.pK,{filter:te})}),(0,C.jsx)(y.ZL,{address:j,chain:b,className:"free-balance",label:L("Available balance:"),onBalanceReady:D}),(0,C.jsx)(m.Z.Item,{children:(0,C.jsxs)(o.oB,{className:"withdraw-meta-info",hasBackgroundWrapper:!0,children:[(0,C.jsx)(o.oB.Chain,{chain:b,label:L("Network")}),H&&(0,C.jsx)(o.oB.Number,{decimals:z,label:L("Withdraw amount"),suffix:q,value:H.claimable})]})})]})})}),(0,C.jsxs)(y.Xd,{errors:[],warnings:[],children:[(0,C.jsx)(h.Z,{disabled:$,icon:(0,C.jsx)(p.Z,{phosphorIcon:f.Z,weight:"fill"}),onClick:Q,schema:"secondary",children:L("Cancel")}),(0,C.jsx)(h.Z,{disabled:O||!Z,icon:(0,C.jsx)(p.Z,{phosphorIcon:k.Z,weight:"fill"}),loading:$,onClick:ne(V.submit),children:L("Continue")})]})]})})).withConfig({displayName:"Withdraw",componentId:"sc-hdv9qi-0"})((({theme:{token:e}})=>({".free-balance":{marginBottom:e.marginXS},".meta-info":{marginTop:e.paddingSM}})))},58584:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(2784),a=t(21890),s=t(76712),o=new Map;o.set("bold",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),o.set("duotone",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",opacity:"0.2"}),r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),o.set("fill",(function(){return r.createElement(r.Fragment,null,r.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.2,104.2,0,0,0,128,24Zm47.4,107.1a8.7,8.7,0,0,1-1.8,2.6l-33.9,33.9a7.6,7.6,0,0,1-5.6,2.3,7.8,7.8,0,0,1-5.7-2.3,8,8,0,0,1,0-11.3L148.7,136H88a8,8,0,0,1,0-16h60.7L128.4,99.7a8,8,0,0,1,11.3-11.3l33.9,33.9a8.7,8.7,0,0,1,1.8,2.6A8.3,8.3,0,0,1,175.4,131.1Z"}))})),o.set("light",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),o.set("thin",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),o.set("regular",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var i=function(e,n){return(0,a._)(e,n,o)},l=(0,r.forwardRef)((function(e,n){return r.createElement(s.Z,Object.assign({ref:n},e,{renderPath:i}))}));l.displayName="ArrowCircleRight";const c=l}}]);