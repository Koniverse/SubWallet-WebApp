"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[375],{80375:(e,s,n)=>{n.r(s),n.d(s,{default:()=>N});var t=n(51076),i=n(32623),a=n(80855),o=n(68627),r=n(3612),l=n(5772),c=n(81620),d=n(28973),u=n(7688),h=n(21462),m=n(47088),g=n(92936),p=n(96701),f=n(27178),y=n(99656),j=n(12798),b=n(95023),x=n(92280),v=n(72779),H=n.n(v),Z=n(80205),k=n(2784),w=n(96217),A=n(35185),C=n(38338),S=n(52322);const I=(0,S.jsx)(y.Z,{phosphorIcon:Z.Z,weight:"fill"}),E="attach-read-only-scanner-modal",F="address",N=(0,C.ZP)((({className:e})=>{(0,h.Z)();const{t:s}=(0,w.$)(),{goHome:n}=(0,m.Z)(),{isWebUI:y}=(0,k.useContext)(r.sG),v=(0,l.Z)(),C=(0,c.Z)(),N=(0,A.v9)((e=>e.accountState.accounts)),O=(0,d.Z)(o.kc),[P]=j.Z.useForm(),[R,_]=(0,k.useState)(""),[q,T]=(0,k.useState)(!1),[W,z]=(0,k.useState)(!1),[B,D]=(0,k.useState)(!0),G=(0,k.useCallback)((e=>{const s=(0,f.H9)(e);s&&(_(s.content),z(s.isEthereum))}),[]),J=(0,k.useCallback)(((e,s)=>{const{empty:n,error:t}=(0,p.ij)(s);D(t||n);const i=(0,p.eW)(e);i.address&&G(i.address)}),[G]),L=(0,k.useCallback)(((e,n)=>{const t=(0,f.H9)(n);if(t){for(const e of N)if(e.address===t.content)return _(""),Promise.reject(s("Account already exists"))}else if(_(""),""!==n)return Promise.reject(s("Invalid address"));return Promise.resolve()}),[N,s]),X=(0,k.useCallback)((()=>{T(!0),R?(0,g.mK)({name:C,address:R,genesisHash:"",isEthereum:W,isAllowed:!1,isReadOnly:!0}).then((e=>{e.length?P.setFields([{name:F,errors:e.map((e=>e.message))}]):v()})).catch((e=>{P.setFields([{name:F,errors:[e.message]}])})).finally((()=>{T(!1)})):T(!1)}),[P,R,C,W,v]);(0,u.Z)(E);const $={children:s("Attach read-only account"),icon:I,disabled:B,onClick:X,loading:q};return(0,S.jsx)(t.FE,{className:H()(e),children:(0,S.jsx)(t.Ar.WithSubHeaderOnly,{onBack:O,...!y&&{rightFooterButton:$},subHeaderIcons:[{icon:(0,S.jsx)(a.Z,{}),onClick:n}],title:s("Attach watch-only account"),children:(0,S.jsxs)("div",{className:H()("container"),children:[(0,S.jsx)("div",{className:"description",children:s("Track the activity of any wallet without injecting your private key to SubWallet")}),(0,S.jsx)("div",{className:"page-icon",children:(0,S.jsx)(b.Z,{color:"var(--page-icon-color)",iconProps:{weight:"fill",phosphorIcon:Z.Z}})}),(0,S.jsxs)(j.Z,{form:P,initialValues:{address:""},name:"attach-read-only-form",onFieldsChange:J,onFinish:X,children:[(0,S.jsx)(j.Z.Item,{name:F,rules:[{message:s("Account address is required"),required:!0},{validator:L}],statusHelpAsTooltip:!0,children:(0,S.jsx)(i.J,{id:E,placeholder:s("Please type or paste account address"),showScanner:!0})}),y&&(0,S.jsx)(x.Z,{...$,className:"submit-button"})]})]})})})})).withConfig({displayName:"AttachReadOnly",componentId:"sc-1s88dfq-0"})((({theme:{token:e}})=>({".container":{padding:e.padding,"& .submit-button":{width:"100%",marginTop:36}},".description":{padding:`0 ${e.padding}px`,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextDescription,textAlign:"center"},".page-icon":{display:"flex",justifyContent:"center",marginTop:e.controlHeightLG,marginBottom:e.sizeXXL,"--page-icon-color":e.colorSecondary}})))},27178:(e,s,n)=>{n.d(s,{H9:()=>d,IJ:()=>l,jD:()=>c});var t=n(36533),i=n(74076),a=n(68774),o=n(90107),r=n(94175);const l=e=>{const s=e.split(":"),n=s[0];let i="",a="",o=[],r=!1;if(n===t.fD)[i,a,...o]=s.slice(1);else{if(n!==t.jq)return null;[i,...o]=s.slice(1),a=i.split("@")[1]||"",i=i.substring(0,42),r=!0}return{content:i,genesisHash:a,isAddress:!0,isEthereum:r,name:o.length?o.join(":"):void 0,isReadOnly:!1}},c=e=>{const s=e.split(":");let n="",i="",a=[];return s[0]!==t.WI?null:([n,i,...a]=s.slice(1),{content:n,genesisHash:i,isAddress:!1,isEthereum:!1,name:a.length?a.join(":"):void 0,isReadOnly:!1})},d=e=>{if(!e)return null;if((0,a.u)(e))return{content:e,genesisHash:e,isAddress:!0,isEthereum:!0,name:void 0,isReadOnly:!0};try{return(0,i.vq)(e)?null:{content:(0,o.m)((0,r.m)(e)),genesisHash:e,isAddress:!0,isEthereum:!1,name:void 0,isReadOnly:!0}}catch(e){return console.log(e),null}}}}]);