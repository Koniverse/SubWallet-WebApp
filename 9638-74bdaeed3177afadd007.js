"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[9638],{29638:(e,o,t)=>{t.r(o),t.d(o,{default:()=>_});var s=t(53334),a=t(80118),c=t(53101),n=t(76412),l=t(47088),r=t(92936),i=t(11383),d=t(48062),u=t(12162),h=t(58200),k=t(99656),g=t(17446),p=t(42534),m=t(15322),b=t(90727),C=t(77180),f=t(59513),w=t(86267),y=t(12574),N=t(2784),Z=t(21427),A=t(35185),j=t(73557),x=t(38338),v=t(68774),M=t(52322);const B="actionModalId";function I({accountAuthType:e,authInfo:o,className:t="",goBack:l,origin:j,siteName:I}){const _=(0,A.v9)((e=>e.accountState.accounts)),[S,L]=(0,N.useState)({}),{activeModal:E,inactiveModal:F}=(0,N.useContext)(u.t),{t:T}=(0,Z.$)(),{token:W}=(0,x.Fg)(),Y=(0,N.useMemo)((()=>{const o=(0,d.Fd)(_.filter((e=>"ALL"!==e.address)));return"substrate"===e?o.filter((e=>!(0,v.u)(e.address))):"evm"===e?o.filter((e=>(0,v.u)(e.address))):o}),[e,_]),z=(0,N.useCallback)((()=>{E(B)}),[E]),D=(0,N.useCallback)((()=>{F(B)}),[F]),G=(0,N.useMemo)((()=>{const e=o.isAllowed,t=[{key:e?"block":"unblock",icon:e?p.Z:m.Z,iconBackgroundColor:e?W.colorError:W.colorSuccess,title:T(e?"Block this site":"Unblock this site"),onClick:()=>{(0,r.O8)(j).then((({list:e})=>{(0,i.NY)(e)})).catch(console.error),D()}},{key:"forget-site",icon:b.Z,iconBackgroundColor:W.colorWarning,title:T("Forget this site"),onClick:()=>{(0,r.hW)(j,i.NY).catch(console.error),D()}}];return e&&t.push({key:"disconnect-all",icon:C.Z,iconBackgroundColor:W["gray-3"],title:T("Disconnect all accounts"),onClick:()=>{(0,r.mp)(!1,j,i.NY).catch(console.error),D()}},{key:"connect-all",icon:f.Z,iconBackgroundColor:W["green-6"],title:T("Connect all accounts"),onClick:()=>{(0,r.mp)(!0,j,i.NY).catch(console.error),D()}}),t}),[o.isAllowed,D,j,T,W]),H=(0,N.useCallback)((e=>{const t=o.isAllowedMap[e.address];return(0,M.jsx)(a.Z,{accountName:e.name,address:e.address,avatarSize:W.sizeLG,rightItem:(0,M.jsx)(h.Z,{checked:void 0===S[e.address]?t:S[e.address],disabled:!o.isAllowed||void 0!==S[e.address],onClick:()=>{L((o=>({...o,[e.address]:!t}))),(0,r.jv)(e.address,!t,j,i.NY).catch(console.log).finally((()=>{L((o=>{const t={...o};return delete t[e.address],t}))}))},style:{marginRight:8}})},e.address)}),[o.isAllowed,o.isAllowedMap,j,S,W.sizeLG]),O=(0,N.useCallback)(((e,o)=>{const t=o.toLowerCase();return e.address.toLowerCase().includes(t)||!!e.name&&e.name.toLowerCase().includes(t)}),[]);(0,N.useEffect)((()=>{L((e=>Object.keys(e).length?{}:e))}),[o]);const $=(0,N.useCallback)((()=>(0,M.jsx)(c.Z,{emptyMessage:T("Your accounts will appear here."),emptyTitle:T("No account found"),phosphorIcon:w.Z})),[T]);return(0,M.jsx)(s.FE,{className:`manage-website-access-detail ${t}`,children:(0,M.jsxs)(s.Ar.WithSubHeaderOnly,{onBack:l,subHeaderIcons:[{icon:(0,M.jsx)(k.Z,{phosphorIcon:y.Z,size:"md",type:"phosphor",weight:"bold"}),onClick:z}],title:I||o.id,children:[(0,M.jsx)(g.Z.Section,{displayRow:!0,enableSearchInput:!0,list:Y,renderItem:H,renderWhenEmpty:$,rowGap:"8px",searchFunction:O,searchMinCharactersCount:2,searchPlaceholder:T("Search account")}),(0,M.jsx)(n.W,{actions:G,className:`${t} action-modal`,id:B,onCancel:D,title:T("dApp configuration")})]})})}const _=(0,x.ZP)((function(e){const o=(0,j.TH)(),{accountAuthType:t,origin:s,siteName:a}=o.state,c=(0,A.v9)((e=>e.settings.authUrls[s])),n=(0,l.Z)().goBack;return(0,N.useEffect)((()=>{c||n()}),[n,c]),(0,M.jsx)(M.Fragment,{children:!!c&&(0,M.jsx)(I,{...e,accountAuthType:t,authInfo:c,goBack:n,origin:s,siteName:a})})})).withConfig({displayName:"Detail__ManageWebsiteAccessDetail",componentId:"sc-kvk64y-0"})((({theme:{token:e}})=>({".ant-sw-list-section":{height:"100%"},"&.manage-website-access-detail":{backgroundColor:e.colorBgDefault},".ant-sw-screen-layout-body":{paddingTop:e.paddingSM},"&.action-modal":{".__action-item.block .ant-setting-item-name":{color:e.colorError}}})))}}]);