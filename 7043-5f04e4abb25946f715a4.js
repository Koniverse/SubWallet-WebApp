"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[7043],{52274:(e,n,t)=>{t.d(n,{nC:()=>f,x1:()=>h.x1,bO:()=>l});var r=t(80949),o=t(54533);const i="RMRK",s="SEND";function l(e,n){return e.type===r.Ym.ERC721?function(e){return{contractAddress:e.collectionId,tokenId:parseInt(e.id)}}(e):e.type===r.Ym.PSP34?function(e){return{contractAddress:e.collectionId,onChainOption:e.onChainOption,isPsp34:!0,networkKey:e.chain}}(e):o.r$.acala.includes(n)||o.r$.karura.includes(n)||o.r$.bitcountry.includes(n)?function(e){return{collectionId:parseInt(e.collectionId),itemId:parseInt(e.id),networkKey:e.chain}}(e):o.r$.rmrk.includes(n)?function(e){return e.rmrk_ver?{remark:`${i}::${s}::${e.rmrk_ver}::${e.id}::`,networkKey:e.chain}:{}}(e):o.r$.statemine.includes(n)||o.r$.unique_network.includes(n)?function(e){return{collectionId:parseInt(e.collectionId),itemId:parseInt(e.id),networkKey:e.chain}}(e):{}}var c=t(9661),a=t(36926),d=t(95110),u=t(95798),m=t(68774);const k=(e,n)=>t=>!(t.originGenesisHash&&n&&(0,a.zb)(n)!==t.originGenesisHash||(0,u.W_)(t.address)||t.isReadOnly||e===c.WQ.POOLED&&(0,m.u)(t.address)),f=(e,n,t)=>r=>{if(t&&t!==d.EN){const o=e[t],i=k(n,o),s=(0,a.h4)(o);return i(r)&&s===(0,m.u)(r.address)}return k(n)(r)};var h=t(11164)},17043:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Z});var r=t(56858),o=t(53334),i=t(75576),s=t(33283),l=t(92936),c=t(95798),a=t(12798),d=t(88976),u=t(96562),m=t(92280),k=t(99656),f=t(72779),h=t.n(f),p=t(58584),x=t(2784),y=t(96217),j=t(73557),w=t(38338),E=t(61162),I=t(68774),L=t(52274),g=t(94684),b=t(13738),v=t(52322);const W={collectionId:"unknown",chain:"unknown"},C={collectionId:"unknown",chain:"unknown",owner:"unknown",id:"unknown"},N=()=>{const{t:e}=(0,y.$)(),n=(0,j.s0)(),{chain:t="",collectionId:i,itemId:f,owner:w=""}=(0,j.UO)(),{chainInfoMap:N}=(0,s.v9)((e=>e.chainStore)),{nftCollections:Z,nftItems:_}=(0,s.v9)((e=>e.nft)),[F,P]=(0,x.useState)(!0),S=(0,x.useMemo)((()=>_.find((e=>(0,r.Wr)(e.owner,w)&&t===e.chain&&e.collectionId===i&&e.id===f))||C),[i,f,t,_,w]),A=(0,x.useMemo)((()=>Z.find((e=>t===e.chain&&e.collectionId===i))||W),[i,t,Z]),$=(0,x.useMemo)((()=>N[t]),[N,t]),M=(0,s.xo)(t),{chain:R,from:O,onDone:T,setChain:K,setFrom:D}=(0,x.useContext)(b.TransactionContext),{onError:H,onSuccess:B}=(0,s.Ls)(T),[G]=a.Z.useForm(),Y=(0,x.useMemo)((()=>({from:O,chain:R,to:""})),[R,O]),[q,U]=(0,x.useState)(!0),[V,X]=(0,x.useState)(!1),z=(0,x.useCallback)((({getFieldValue:n})=>({validator:(n,t)=>{if(!t)return Promise.reject(e("The recipient address is required"));if(!(0,E.U)(t))return Promise.reject(e("Invalid recipient address"));if((0,r.Wr)(t,O))return Promise.reject(e("The recipient address can not be the same as the sender address"));if((0,I.u)(t)!==(0,I.u)(O)){const n=(0,I.u)(O)?e("Receive address must be of evm account."):e("Receive address must be of substrate account.");return Promise.reject(n)}return Promise.resolve()}})),[e,O]),J=(0,x.useCallback)(((e,n)=>{const{error:t}=(0,c.ij)(n);U(t)}),[]),Q=(0,x.useCallback)((e=>{const n=(0,I.u)(O),{to:t}=e,r=(0,L.bO)(S,R);let o;o=n?(0,l.Y5)({senderAddress:O,networkKey:R,recipientAddress:t,nftItemName:null==S?void 0:S.name,params:r,nftItem:S}):(0,l.GW)({networkKey:R,recipientAddress:t,senderAddress:O,nftItemName:null==S?void 0:S.name,params:r,nftItem:S}),X(!0),setTimeout((()=>{o.then(B).catch(H).finally((()=>{X(!1)}))}),300)}),[R,O,S,H,B]),ee=(0,s.Ey)(O);return(0,x.useEffect)((()=>{K(t),D(w)}),[t,w,K,D]),(0,x.useEffect)((()=>{S!==C&&A!==W||n("/home/nfts/collections")}),[A,n,S]),(0,s.uy)(G,"to"),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(g.tc,{className:h()("-transaction-content"),children:[(0,v.jsxs)("div",{className:"nft_item_detail text-center",children:[(0,v.jsx)(d.Z,{height:120,src:S.image}),(0,v.jsx)(u.Z.Title,{level:5,children:S.name})]}),(0,v.jsxs)(a.Z,{className:"form-container form-space-sm",form:G,initialValues:Y,onFieldsChange:J,onFinish:Q,children:[(0,v.jsx)(a.Z.Item,{name:"to",rules:[z],statusHelpAsTooltip:!0,children:(0,v.jsx)(o.Jg,{addressPrefix:M,label:e("Send to account"),showAddressBook:!0,showScanner:!0})}),(0,v.jsx)(a.Z.Item,{children:(0,v.jsx)(o.oT,{disabled:!0,items:$?[{name:$.name,slug:$.slug}]:[],label:e("Network"),value:A.chain})})]}),(0,v.jsx)(g.ZL,{address:O,chain:R,onBalanceReady:P})]}),(0,v.jsx)(g.Xd,{className:"send-nft-transaction-footer",errors:[],warnings:[],children:(0,v.jsx)(m.Z,{disabled:q||!F,icon:(0,v.jsx)(k.Z,{phosphorIcon:p.Z,weight:"fill"}),loading:V,onClick:ee(G.submit),children:e("Next")})})]})},Z=(0,w.ZP)((e=>{const{className:n}=e,t=(0,x.useContext)(i.R0);return(0,v.jsx)(o.FE,{className:n,resolve:t.awaitStores(["nft"]),children:(0,v.jsx)(N,{})})})).withConfig({displayName:"SendNFT",componentId:"sc-13wb87a-0"})((({theme:{token:e}})=>({flex:1,display:"flex",flexDirection:"column",overflow:"hidden",".nft_item_detail h5":{marginTop:e.marginXS,marginBottom:e.margin}})))},58584:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(2784),o=t(21890),i=t(76712),s=new Map;s.set("bold",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),s.set("duotone",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",opacity:"0.2"}),r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),s.set("fill",(function(){return r.createElement(r.Fragment,null,r.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.2,104.2,0,0,0,128,24Zm47.4,107.1a8.7,8.7,0,0,1-1.8,2.6l-33.9,33.9a7.6,7.6,0,0,1-5.6,2.3,7.8,7.8,0,0,1-5.7-2.3,8,8,0,0,1,0-11.3L148.7,136H88a8,8,0,0,1,0-16h60.7L128.4,99.7a8,8,0,0,1,11.3-11.3l33.9,33.9a8.7,8.7,0,0,1,1.8,2.6A8.3,8.3,0,0,1,175.4,131.1Z"}))})),s.set("light",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),s.set("thin",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),s.set("regular",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var l=function(e,n){return(0,o._)(e,n,s)},c=(0,r.forwardRef)((function(e,n){return r.createElement(i.Z,Object.assign({ref:n},e,{renderPath:l}))}));c.displayName="ArrowCircleRight";const a=c}}]);