"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[2561],{42561:(e,t,s)=>{s.r(t),s.d(t,{default:()=>R});var a=s(25601),n=s(45868),o=s(80855),i=s(48118),r=s(68627),l=s(3612),c=s(5772),d=s(28973),m=s(43246),u=s(21462),p=s(47088),h=s(92936),g=s(64165),f=s(99656),x=s(12162),w=s(12798),y=s(24271),j=s(1072),b=s(25356),k=s(92280),S=s(80039),I=s(17446),Z=s(40674),N=s(72779),v=s.n(N),C=s(90837),P=s(89537),H=s(2784),J=s(73557),_=s(38338),B=s(42445),O=s(52322),T=s(48834).Buffer;const $=(0,O.jsx)(f.Z,{phosphorIcon:C.Z,weight:"fill"}),F="account-json-modal",z="restore-json-file-form",D=[{title:"What is a JSON?",description:"The JSON backup file stores your account's information encrypted with the account's password. It's a second recovery method additionally to the mnemonic phrase. "},{title:"What is a JSON?",description:(0,O.jsxs)("span",{children:["When you create your account directly on Polkadot-JS UI the JSON file is automatically downloaded to your Downloads folder.",(0,O.jsx)("br",{}),"If you create your account in the Polkadot extension, you need to manually export the JSON file.",(0,O.jsx)("br",{}),"In ",(0,O.jsx)("a",{href:"#",children:"this article"})," you will learn how to manually export your JSON backup file in the Polkadot extension and Polkadot-JS UI."]})}],R=(0,_.ZP)((function({className:e}){(0,u.Z)();const{t}=(0,m.Z)(),s=(0,c.Z)(),N=(0,J.s0)(),C=(0,d.Z)(r.Rt),{goHome:_}=(0,p.Z)(),{activeModal:R,inactiveModal:W}=(0,H.useContext)(x.t),{isWebUI:A}=(0,H.useContext)(l.sG),[E]=w.Z.useForm(),[U,G]=(0,H.useState)({}),[L,M]=(0,H.useState)({}),[X,q]=(0,H.useState)(!1),[K,V]=(0,H.useState)(!1),[Q,Y]=(0,H.useState)(!1),[ee,te]=(0,H.useState)(""),[se,ae]=(0,H.useState)(void 0),[ne,oe]=(0,H.useState)([]),ie=(0,H.useCallback)((()=>{W(F)}),[W]),re=(0,H.useCallback)((()=>{R(F)}),[R]),le=(0,H.useCallback)((e=>{var s;X||(q(!0),null===(s=e.file.originFileObj)||void 0===s||s.arrayBuffer().then((e=>{let s;try{if(s=JSON.parse((0,B.z)(Uint8Array.from(T.from(e)))),JSON.stringify(se)===JSON.stringify(s))return void q(!1);oe([]),te(""),ae(s)}catch(e){return G({status:"error",message:e.message}),q(!1),void Y(!1)}try{if(M({}),(0,g.R)(s)){const e=s.accounts.map((e=>({address:e.address,genesisHash:e.meta.genesisHash,name:e.meta.name})));Y(!0),oe(e),G({}),q(!1)}else(0,h.$G)(s).then((e=>{Y(!0),oe([e]),G({}),q(!1)})).catch((e=>{Y(!1),G({status:"error",message:e.message}),q(!1)}))}catch(e){G({status:"error",message:t("Invalid Json file")}),q(!1),Y(!1)}})).catch((e=>{G({status:"error",message:e.message}),q(!1)})))}),[t,se,X]),ce=(0,H.useCallback)((()=>{se&&(Q&&!ee||(V(!0),setTimeout((()=>{const e=(0,g.R)(se);(e?(0,h.K)(se,ee,ne,!0):(0,h.k1)({file:se,password:ee,address:ne[0].address,isAllowed:!0,withMasterPassword:!0})).then((()=>{setTimeout((()=>{e?N("/keyring/migrate-password"):s()}),1e3)})).catch((e=>{M({message:e.message,status:"error"}),setTimeout((()=>{const e=document.getElementById(`${z}_password`);e&&e.select()}),10)})).finally((()=>{V(!1)}))}),500)))}),[se,Q,ee,ne,N,s]),de=(0,H.useCallback)((e=>(0,O.jsx)(Z.Z,{accountName:e.name,address:e.address,addressPreLength:4,addressSufLength:5,avatarIdentPrefix:42,avatarTheme:"ethereum"===e.type?"ethereum":"polkadot",className:"account-item"},e.address)),[]),me=(0,H.useCallback)((e=>{const t=e.target.value;M(t?{}:{message:"Password is required",status:"error"}),te(t)}),[]);(0,H.useEffect)((()=>{Q&&setTimeout((()=>{const e=document.getElementById(`${z}_password`);e&&e.focus()}),10)}),[Q]);const ue={children:t("Import from Json"),icon:$,onClick:E.submit,disabled:!!U.status||!!L.status||!ee,loading:X||K};return(0,O.jsx)(a.FE,{className:v()(e),children:(0,O.jsx)(a.Ar.Base,{onBack:C,...A?{headerList:["Simple"],showWebHeader:!0}:{rightFooterButton:ue,showBackButton:!0,subHeaderPaddingVertical:!0,showSubHeader:!0,subHeaderCenter:!0,subHeaderBackground:"transparent"},subHeaderIcons:[{icon:(0,O.jsx)(o.Z,{}),onClick:_}],title:t("Import from Polkadot.{js}"),children:(0,O.jsxs)("div",{className:v()("container",{"__web-ui":A}),children:[(0,O.jsxs)("div",{className:v()("import-container"),children:[(0,O.jsx)("div",{className:"description",children:t("Please drag an drop the .json file you exported from Polkadot.js")}),(0,O.jsxs)(w.Z,{className:"form-container",form:E,name:z,onFinish:ce,children:[(0,O.jsx)(w.Z.Item,{validateStatus:U.status,children:(0,O.jsx)(y.Z.SingleFileDragger,{accept:"application/json",className:"file-selector",disabled:X,hint:t("Please drag an drop the .json file you exported from Polkadot.js"),onChange:le,statusHelp:U.message,title:t("Import from Polkadot.js")})}),!!ne.length&&(0,O.jsx)(w.Z.Item,{children:ne.length>1?(0,O.jsx)(j.Z,{className:"account-list-item",leftItemIcon:(0,O.jsx)(n.Z,{accounts:ne}),name:t(`Import ${String(ne.length).padStart(2,"0")} accounts`),onPressItem:re,rightItem:(0,O.jsx)(f.Z,{phosphorIcon:P.Z,size:"sm"})}):(0,O.jsx)(j.Z,{className:"account-list-item",leftItemIcon:(0,O.jsx)(n.Z,{accounts:ne}),name:ne[0].name})}),Q&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(w.Z.Item,{validateStatus:L.status,children:[(0,O.jsx)("div",{className:"input-label",children:t("Please enter the password you set when creating your polkadot.js account")}),(0,O.jsx)(b.Z,{id:`${z}_password`,onChange:me,placeholder:t("Current password"),statusHelp:L.message,type:"password",value:ee})]}),A&&(0,O.jsx)(k.Z,{...ue,className:"action"})]})]}),(0,O.jsx)(S.ZP,{className:e,id:F,onCancel:ie,title:t("Import list"),children:(0,O.jsx)(I.Z.Section,{displayRow:!0,list:ne,renderItem:de,rowGap:"var(--row-gap)"})})]}),A&&(0,O.jsx)(i.Z,{contents:D})]})})})})).withConfig({displayName:"RestoreJson__ImportJson",componentId:"sc-owdwlk-0"})((({theme:{token:e}})=>({"--row-gap":e.sizeXS,".container":{"&.__web-ui":{display:"flex",justifyContent:"center",maxWidth:"60%",margin:"0 auto"},".import-container":{padding:e.padding,paddingBottom:0,flex:1,"& .ant-btn":{width:"100%"}},".instruction-container":{flex:1},".description":{padding:`0 ${e.padding}px`,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextDescription,textAlign:"center"},".form-container":{marginTop:e.margin},".ant-form-item:last-child":{marginBottom:0},".input-label":{fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextDescription,marginBottom:e.margin},".account-list-item":{marginTop:-e.marginXS,".account-item":{cursor:"default"},".ant-web3-block-right-item":{marginRight:0}},".ant-web3-block":{display:"flex !important"},".ant-sw-modal-body":{padding:`${e.padding}px 0 ${e.padding}px`,flexDirection:"column",display:"flex"},".ant-sw-list-wrapper":{overflow:"hidden",height:"100%",display:"flex",flexDirection:"column"},".file-selector":{".ant-upload-drag-single":{height:168}}}})))},48118:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(25601),n=s(72779),o=s.n(n),i=s(21427),r=s(38338),l=s(52322);const c=(0,r.ZP)((({className:e,contents:t})=>{const{t:s}=(0,i.$)();return t.length<=0?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("div",{className:o()("instruction-container",e),children:t.map(((e,t)=>(0,l.jsx)(a.e3,{description:"string"==typeof e.description?s(e.description):e.description,title:s(e.title),type:e.type||"warning"})))})})).withConfig({displayName:"InstructionContainer",componentId:"sc-1tjn6f7-0"})((({theme:{token:e}})=>({display:"flex",flexDirection:"column",gap:10})))}}]);