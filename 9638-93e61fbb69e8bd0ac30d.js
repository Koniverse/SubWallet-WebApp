"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[9638],{29638:(e,o,s)=>{s.r(o),s.d(o,{default:()=>_});var t=s(53334),a=s(80118),c=s(53101),n=s(76412),l=s(47088),r=s(92936),i=s(11383),d=s(48062),u=s(12162),h=s(9130),k=s(99656),g=s(17446),p=s(42534),m=s(15322),b=s(90727),C=s(77180),f=s(59513),w=s(86267),y=s(12574),N=s(2784),Z=s(96217),j=s(35185),x=s(73557),A=s(38338),v=s(68774),M=s(52322);const B="actionModalId";function I({accountAuthType:e,authInfo:o,className:s="",goBack:l,origin:x,siteName:I}){const _=(0,j.v9)((e=>e.accountState.accounts)),[S,L]=(0,N.useState)({}),{activeModal:W,inactiveModal:E}=(0,N.useContext)(u.t),{t:F}=(0,Z.$)(),{token:T}=(0,A.Fg)(),Y=(0,N.useMemo)((()=>{const o=(0,d.Fd)(_.filter((e=>"ALL"!==e.address)));return"substrate"===e?o.filter((e=>!(0,v.u)(e.address))):"evm"===e?o.filter((e=>(0,v.u)(e.address))):o}),[e,_]),z=(0,N.useCallback)((()=>{W(B)}),[W]),D=(0,N.useCallback)((()=>{E(B)}),[E]),G=(0,N.useMemo)((()=>{const e=o.isAllowed,s=[{key:e?"block":"unblock",icon:e?p.Z:m.Z,iconBackgroundColor:e?T.colorError:T.colorSuccess,title:F(e?"Block this site":"Unblock this site"),onClick:()=>{(0,r.O8)(x).then((({list:e})=>{(0,i.NY)(e)})).catch(console.error),D()}},{key:"forget-site",icon:b.Z,iconBackgroundColor:T.colorWarning,title:F("Forget site"),onClick:()=>{(0,r.hW)(x,i.NY).catch(console.error),D()}}];return e&&s.push({key:"disconnect-all",icon:C.Z,iconBackgroundColor:T["gray-3"],title:F("Disconnect all"),onClick:()=>{(0,r.mp)(!1,x,i.NY).catch(console.error),D()}},{key:"connect-all",icon:f.Z,iconBackgroundColor:T["green-6"],title:F("Connect all"),onClick:()=>{(0,r.mp)(!0,x,i.NY).catch(console.error),D()}}),s}),[o.isAllowed,D,x,F,T]),H=(0,N.useCallback)((e=>{const s=o.isAllowedMap[e.address];return(0,M.jsx)(a.Z,{accountName:e.name,address:e.address,avatarSize:T.sizeLG,rightItem:(0,M.jsx)(h.Z,{checked:void 0===S[e.address]?s:S[e.address],disabled:!o.isAllowed||void 0!==S[e.address],onClick:()=>{L((o=>({...o,[e.address]:!s}))),(0,r.jv)(e.address,!s,x,i.NY).catch(console.log).finally((()=>{L((o=>{const s={...o};return delete s[e.address],s}))}))},style:{marginRight:8}})},e.address)}),[o.isAllowed,o.isAllowedMap,x,S,T.sizeLG]),O=(0,N.useCallback)(((e,o)=>{const s=o.toLowerCase();return e.address.toLowerCase().includes(s)||!!e.name&&e.name.toLowerCase().includes(s)}),[]);(0,N.useEffect)((()=>{L((e=>Object.keys(e).length?{}:e))}),[o]);const $=(0,N.useCallback)((()=>(0,M.jsx)(c.Z,{emptyMessage:F("Your accounts will appear here."),emptyTitle:F("No account found"),phosphorIcon:w.Z})),[F]);return(0,M.jsx)(t.FE,{className:`manage-website-access-detail ${s}`,children:(0,M.jsxs)(t.Ar.WithSubHeaderOnly,{onBack:l,subHeaderIcons:[{icon:(0,M.jsx)(k.Z,{phosphorIcon:y.Z,size:"md",type:"phosphor",weight:"bold"}),onClick:z}],title:I||o.id,children:[(0,M.jsx)(g.Z.Section,{displayRow:!0,enableSearchInput:!0,list:Y,renderItem:H,renderWhenEmpty:$,rowGap:"8px",searchFunction:O,searchMinCharactersCount:2,searchPlaceholder:F("Search account")}),(0,M.jsx)(n.W,{actions:G,className:`${s} action-modal`,id:B,onCancel:D,title:F("Website access config")})]})})}const _=(0,A.ZP)((function(e){const o=(0,x.TH)(),{accountAuthType:s,origin:t,siteName:a}=o.state,c=(0,j.v9)((e=>e.settings.authUrls[t])),n=(0,l.Z)().goBack;return(0,N.useEffect)((()=>{c||n()}),[n,c]),(0,M.jsx)(M.Fragment,{children:!!c&&(0,M.jsx)(I,{...e,accountAuthType:s,authInfo:c,goBack:n,origin:t,siteName:a})})})).withConfig({displayName:"Detail__ManageWebsiteAccessDetail",componentId:"sc-kvk64y-0"})((({theme:{token:e}})=>({".ant-sw-list-section":{height:"100%"},"&.manage-website-access-detail":{backgroundColor:e.colorBgDefault},".ant-sw-screen-layout-body":{paddingTop:e.paddingSM},"&.action-modal":{".__action-item.block .ant-setting-item-name":{color:e.colorError}}})))}}]);