(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[1404],{1404:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>V});var o=n(53334),i=n(94716),r=n(80855),s=n(5769),l=n(67145),a=n(86041),c=n(18742),d=n(70497),u=n(47088),p=n(92936),f=n(99656),h=n(12798),m=n(25356),g=n(1072),E=n(58094),x=n(19201),k=n(92280),y=n(64161),v=n(95023),j=n(72779),b=n.n(j),S=n(46782),w=n(75720),L=n(12029),R=n(54105),A=n(47856),P=n(18332),Z=n(11283),H=n(13739),N=n(2784),O=n(96217),_=n(73557),I=n(38338),T=n(68774),W=n(52322),C=function(e){return e.JSON_FILE="json-file",e.PRIVATE_KEY="private-key",e.QR_CODE="qr-code",e.SEED_PHRASE="seed-phrase",e}(C||{});const D={[C.JSON_FILE]:"Successful",[C.QR_CODE]:"Your QR code",[C.PRIVATE_KEY]:"Your private key",[C.SEED_PHRASE]:"Your recovery phrase"};var F=function(e){return e.PASSWORD="password",e.TYPES="types",e}(F||{});const M=(e,t)=>()=>{if(e){const n=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});(0,S.saveAs)(n,`${t}.json`)}},Y=(0,W.jsx)(f.Z,{phosphorIcon:w.Z,weight:"fill"}),V=(0,I.ZP)((e=>{const{className:t}=e,{t:n}=(0,O.$)(),j=(0,_.s0)(),{goHome:S}=(0,u.Z)(),{accountAddress:I}=(0,_.UO)(),V=(0,a.Z)(I),[z]=h.Z.useForm(),[K,B]=(0,N.useState)([]),J=K.length<=1,[$,Q]=(0,N.useState)(!0),[U,q]=(0,N.useState)(!0),[G,X]=(0,N.useState)(!1),[ee,te]=(0,N.useState)(""),[ne,oe]=(0,N.useState)(""),[ie,re]=(0,N.useState)(null),[se,le]=(0,N.useState)(""),ae=(0,N.useMemo)((()=>{const e=["secret",ee||"",ne];return null!=V&&V.name&&e.push(V.name),e.join(":")}),[null==V?void 0:V.name,ne,ee]),ce=(0,c.Z)(ee),de=(0,N.useCallback)(((e,t)=>{const n=t.map((e=>e.errors||[])).reduce(((e,t)=>[...e,...t])).some((e=>!!e)),o=t.map((e=>e.value)).some((e=>!e));q(n||o)}),[]),ue=(0,N.useCallback)((e=>{const t=e[F.PASSWORD],n=e[F.TYPES],o=n.length<=1;if(!n.length)return;if(!V)return;const i=V.address;i&&(X(!0),setTimeout((()=>{new Promise(((e,r)=>{const s={privateKey:!1,seedPhrase:!1,jsonFile:!1},l=()=>{Object.values(s).every((e=>e))&&e()};n.includes(C.PRIVATE_KEY)||n.includes(C.QR_CODE)?(0,p.T7)(i,t).then((e=>{te(e.privateKey),oe(e.publicKey),s.privateKey=!0,l()})).catch((e=>{r(new Error(e.message))})):s.privateKey=!0,n.includes(C.SEED_PHRASE)&&null!=V&&V.isMasterAccount?(0,p.dr)({address:i,password:t}).then((e=>{le(e.result),s.seedPhrase=!0,l()})).catch((e=>{r(new Error(e.message))})):s.seedPhrase=!0,n.includes(C.JSON_FILE)?(0,p.ON)(i,t).then((e=>{re(e.exportedJson),s.jsonFile=!0,l(),o&&M(e.exportedJson,i)()})).catch((e=>{r(new Error(e.message))})):s.jsonFile=!0})).then((()=>{Q(!1)})).catch((e=>{z.setFields([{name:F.PASSWORD,errors:[e.message]}])})).finally((()=>{X(!1)}))}),500))}),[V,z]),pe=(0,N.useCallback)((e=>()=>{const t=z.getFieldValue(F.TYPES);let n;n=t.includes(e)?t.filter((t=>t!==e)):[...t,e],z.setFieldValue(F.TYPES,n),B(n)}),[z]),fe=(0,N.useMemo)((()=>[{disable:!V||V.isExternal||!V.isMasterAccount,hidden:!1,icon:L.Z,label:"Export Seed Phrase",type:C.SEED_PHRASE},{disable:!V||!!V.isExternal,hidden:!1,icon:R.Z,label:"Export JSON file",type:C.JSON_FILE},{disable:!V||V.isExternal||!(0,T.u)(V.address),hidden:!(0,T.u)((null==V?void 0:V.address)||""),icon:A.Z,label:"Export Private key",type:C.PRIVATE_KEY},{disable:!V||!(null==V||!V.isExternal),hidden:!1,icon:P.Z,label:"Export QR Code",type:C.QR_CODE}]),[V]),he=(0,N.useCallback)((()=>{j(I?`/accounts/detail/${I}`:l.Y)}),[I,j]);return(0,N.useEffect)((()=>{V||S()}),[V,S,j]),(0,N.useEffect)((()=>{null!=V&&V.address&&z.resetFields()}),[null==V?void 0:V.address,z]),(0,d.Z)(z,F.PASSWORD),V?(0,W.jsx)(o.FE,{className:b()(t),children:(0,W.jsx)(o.Ar.WithSubHeaderOnly,{disableBack:G,onBack:he,rightFooterButton:{children:n($?"Confirm":"Finish"),icon:$?void 0:Y,disabled:U||!K.length,loading:G,onClick:$?z.submit:S},subHeaderIcons:[{icon:(0,W.jsx)(r.Z,{}),onClick:S,disabled:G}],title:n($?"Export account":J?D[K[0]]:"Export successful"),children:(0,W.jsxs)("div",{className:"body-container",children:[(0,W.jsx)("div",{className:b()("notice",{"mb-large":!$}),children:(0,W.jsx)(i.Z,{description:n("Anyone with your  keys can steal any assets held in your account."),title:n("Warning: Never disclose this key"),type:"warning"})}),$&&(0,W.jsxs)(h.Z,{form:z,initialValues:{[F.PASSWORD]:"",[F.TYPES]:[]},name:"account-export-form",onFieldsChange:de,onFinish:ue,children:[(0,W.jsx)(h.Z.Item,{name:F.PASSWORD,rules:[{message:"Password is required",required:!0}],statusHelpAsTooltip:!0,children:(0,W.jsx)(m.Z,{disabled:G,placeholder:n("Type your SubWallet password"),suffix:(0,W.jsx)("span",{}),type:"password"})}),(0,W.jsx)(h.Z.Item,{className:"mb-0",name:F.TYPES,children:(0,W.jsx)("div",{className:"export-types-container",children:fe.map((e=>{const t=null==K?void 0:K.includes(e.type);return e.hidden?null:(0,W.jsx)(g.Z,{className:b()("export-item",`export-${e.type}`,{selected:t,disabled:e.disable}),leftItemIcon:(0,W.jsx)(E.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:e.icon,size:"sm",weight:"fill"}),name:n(e.label),onPressItem:e.disable||G?void 0:pe(e.type),rightItem:(0,W.jsx)(f.Z,{className:"setting-item-right-icon",iconColor:"var(--selected-icon-color)",phosphorIcon:w.Z,size:"sm",weight:"fill"})},e.type)}))})})]}),!$&&(0,W.jsxs)("div",{className:b()("result-container",{"export-single":J}),children:[K.includes(C.PRIVATE_KEY)&&(0,W.jsxs)("div",{className:"result-content",children:[(0,W.jsx)("div",{className:"result-title",children:n(D[C.PRIVATE_KEY])}),(0,W.jsx)(x.Z,{className:"private-key-field",content:ee,maxLine:10}),(0,W.jsx)(k.Z,{icon:(0,W.jsx)(f.Z,{phosphorIcon:Z.Z}),onClick:ce,type:"ghost",children:n("Copy to clipboard")})]}),K.includes(C.SEED_PHRASE)&&(0,W.jsxs)("div",{className:"result-content",children:[(0,W.jsx)("div",{className:"result-title",children:n(D[C.SEED_PHRASE])}),(0,W.jsx)(s.Z,{seedPhrase:se})]}),K.includes(C.QR_CODE)&&(0,W.jsxs)("div",{className:"result-content",children:[(0,W.jsx)("div",{className:"result-title",children:n(D[C.QR_CODE])}),(0,W.jsx)("div",{className:"qr-area",children:(0,W.jsx)(y.Z,{errorLevel:"Q",size:264,value:ae})})]}),K.includes(C.JSON_FILE)&&ie&&(0,W.jsxs)("div",{className:"result-content",children:[(0,W.jsx)("div",{className:"result-title",children:n("Your json file")}),J&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"page-icon",children:(0,W.jsx)(v.Z,{color:"var(--page-icon-color)",iconProps:{phosphorIcon:w.Z,weight:"fill"}})}),(0,W.jsx)("div",{className:"json-done-tile",children:n("Success!")}),(0,W.jsx)("div",{className:"json-done-description",children:n("You have successfully export JSON file for your accounts")})]}),!J&&(0,W.jsx)(g.Z,{className:"download-json",leftItemIcon:(0,W.jsx)(E.Z,{backgroundColor:"var(--icon-bg-color)",phosphorIcon:R.Z,size:"sm",weight:"fill"}),name:`${V.address}.json`,onPressItem:M(ie,V.address),rightItem:(0,W.jsx)(f.Z,{className:"setting-item-right-icon",phosphorIcon:H.Z,size:"sm",weight:"fill"})})]})]})]})})}):null})).withConfig({displayName:"AccountExport",componentId:"sc-nxcsoe-0"})((({theme:{token:e}})=>({".body-container":{padding:`0 ${e.padding}px`},".notice":{marginTop:e.margin,marginBottom:e.margin,"&.mb-large":{marginBottom:e.marginLG}},".export-types-container":{display:"flex",flexDirection:"column",gap:e.sizeXS},".export-item":{"--selected-icon-color":e["gray-4"],textAlign:"start","&.selected":{"--selected-icon-color":e.colorSecondary},"&.disabled":{opacity:.4,".ant-web3-block":{cursor:"not-allowed","&:hover":{backgroundColor:e["gray-1"]}}}},".setting-item-right-icon":{paddingRight:8},".download-json":{".ant-web3-block-middle-item":{overflow:"hidden",".ant-setting-item-name":{textOverflow:"ellipsis",width:"100%",overflow:"hidden",paddingRight:e.paddingXS}}},[`.export-${C.SEED_PHRASE}`]:{"--icon-bg-color":e["green-7"]},[`.export-${C.JSON_FILE}, .download-json`]:{"--icon-bg-color":e["orange-7"]},[`.export-${C.PRIVATE_KEY}`]:{"--icon-bg-color":e["gray-3"]},[`.export-${C.QR_CODE}`]:{"--icon-bg-color":e["geekblue-7"]},".result-container":{display:"flex",flexDirection:"column",gap:e.sizeLG},".result-content":{display:"flex",flexDirection:"column",gap:e.size,".result-title":{fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorTextLabel,textTransform:"uppercase"},".private-key-field":{".ant-field-wrapper":{alignItems:"start",textAlign:"center"}},".qr-area":{display:"flex",flexDirection:"row",justifyContent:"center"}},".export-single":{".result-title":{display:"none"}},".page-icon":{display:"flex",justifyContent:"center","--page-icon-color":e.colorSecondary},".json-done-tile":{color:e.colorTextHeading,textAlign:"center",fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading3,lineHeight:e.lineHeightHeading3},".json-done-description":{padding:`0 ${e.controlHeightLG-e.padding}px`,color:e.colorTextLabel,textAlign:"center",fontSize:e.fontSizeHeading5,lineHeight:e.lineHeightHeading5}})))},46782:function(e,t,n){var o,i;void 0===(i="function"==typeof(o=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){l(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,n,s){var l=r.URL||r.webkitURL,a=document.createElement("a");n=n||e.name||"download",a.download=n,a.rel="noopener","string"==typeof e?(a.href=e,a.origin===location.origin?i(a):o(a.href)?t(e,n,s):i(a,a.target="_blank")):(a.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(a.href)}),4e4),setTimeout((function(){i(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,r){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),n);else if(o(e))t(e,n,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){i(s)}))}}:function(e,n,o,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var l="application/octet-stream"===e.type,a=/constructor/i.test(r.HTMLElement)||r.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||l&&a||s)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},d.readAsDataURL(e)}else{var u=r.URL||r.webkitURL,p=u.createObjectURL(e);i?i.location=p:location.href=p,i=null,setTimeout((function(){u.revokeObjectURL(p)}),4e4)}});r.saveAs=l.saveAs=l,e.exports=l})?o.apply(t,[]):o)||(e.exports=i)},13739:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(2784),i=n(21890),r=n(76712),s=new Map;s.set("bold",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),s.set("duotone",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),s.set("fill",(function(){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M80.3,115.7a8.2,8.2,0,0,1-1.7-8.7,8,8,0,0,1,7.4-5h34V40a8,8,0,0,1,16,0v62h34a8,8,0,0,1,7.4,5,8.2,8.2,0,0,1-1.7,8.7l-42,42a8.2,8.2,0,0,1-11.4,0ZM216,144a8,8,0,0,0-8,8v56H48V152a8,8,0,0,0-16,0v56a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A8,8,0,0,0,216,144Z"}))})),s.set("light",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),s.set("thin",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),s.set("regular",(function(e){return o.createElement(o.Fragment,null,o.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var l=function(e,t){return(0,i._)(e,t,s)},a=(0,o.forwardRef)((function(e,t){return o.createElement(r.Z,Object.assign({ref:t},e,{renderPath:l}))}));a.displayName="DownloadSimple";const c=a}}]);