"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[1308],{51308:(e,n,r)=>{r.r(n),r.d(n,{default:()=>F});var t=r(9661),i=r(54533),o=r(36926),a=r(56858),s=r(53334),l=r(75576),c=r(33283),d=r(92936),u=r(95798),m=r(12798),k=r(55204),f=r(92280),h=r(99656),p=r(72779),x=r.n(p),y=r(6746),g=r(58584),E=r(2784),j=r(96217),w=r(73557),L=r(38338),b=r(62197),W=r.n(b),R=r(95292),v=r(68774),_=r(94684),C=r(55446),Z=r(52322),N=function(e){return e.BOND_REWARD="bond-reward",e}(N||{});const F=(0,L.ZP)((e=>{const{className:n}=e,{chain:r,type:p}=(0,w.UO)(),L=p,b=(0,w.s0)(),F=(0,E.useContext)(l.R0),{asset:A,chain:B,from:D,onDone:O,setChain:S,setFrom:M}=(0,E.useContext)(C.TransactionContext),{currentAccount:I,isAllAccount:T}=(0,c.v9)((e=>e.accountState)),{stakingRewardMap:X}=(0,c.v9)((e=>e.staking)),{chainInfoMap:H}=(0,c.v9)((e=>e.chainStore)),P=(0,c._y)(r,L),{decimals:Q,symbol:G}=(0,c.cR)(B),z=(0,E.useMemo)((()=>X.find((e=>e.chain===B&&e.address===D&&e.type===L))),[B,D,X,L]),K=(0,E.useMemo)((()=>X.filter((e=>e.chain===B&&e.type===L))),[B,X,L]),[U,V]=(0,E.useState)(!0),[$,q]=(0,E.useState)(!1),[J,Y]=(0,E.useState)(!0),[ee]=m.Z.useForm(),ne=(0,E.useMemo)((()=>({from:D,chain:B,asset:A,[N.BOND_REWARD]:!0})),[A,B,D]),{onError:re,onSuccess:te}=(0,c.Ls)(O),ie=(0,E.useCallback)((()=>{b("/home/staking")}),[b]),oe=(0,E.useCallback)(((e,n)=>{var r;const{error:t}=(0,u.ij)(n),i=(0,u.eW)(e),o=(0,u.eW)(n),{from:a}=i;void 0!==a&&M(a),V(t||!(null===(r=o.from)||void 0===r||r))}),[M]),{t:ae}=(0,j.$)(),se=(0,E.useCallback)((e=>{q(!0);const{[N.BOND_REWARD]:n}=e;setTimeout((()=>{(0,d.QQ)({address:D,chain:B,bondReward:n,stakingType:L,unclaimedReward:null==z?void 0:z.unclaimedReward}).then(te).catch(re).finally((()=>{q(!1)}))}),300)}),[B,D,re,te,null==z?void 0:z.unclaimedReward,L]),le=(0,c.Ey)(D),ce=(0,E.useCallback)((e=>{const n=r||"",s=H[n];if(!s)return!1;if(e.originGenesisHash&&(0,o.zb)(s)!==e.originGenesisHash)return!1;if((0,u.W_)(e.address))return!1;if(e.isReadOnly)return!1;if((0,o.h4)(s)!==(0,v.u)(e.address))return!1;if(!P.find((n=>(0,a.Wr)(n.address,e.address))))return!1;const l=K.find((n=>(0,a.Wr)(n.address,e.address))),c=i.H_.astar.includes(n),d=i.H_.amplitude.includes(n),m=new(W())((null==l?void 0:l.unclaimedReward)||"0");return(L===t.WQ.POOLED||d)&&m.gt(R.nw)||c}),[P,H,K,r,L]);return(0,E.useEffect)((()=>{const e=(null==I?void 0:I.address)||"";e&&((0,u.W_)(e)||M(e))}),[null==I?void 0:I.address,ee,M]),(0,E.useEffect)((()=>{S(r||"")}),[S,r]),(0,E.useEffect)((()=>{setTimeout((()=>{ee.validateFields().finally(u.ZT)}),500)}),[ee]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(_.tc,{children:(0,Z.jsx)(s.FE,{resolve:F.awaitStores(["staking"]),children:(0,Z.jsxs)(m.Z,{className:x()(n,"form-container form-space-sm"),form:ee,initialValues:ne,onFieldsChange:oe,onFinish:se,children:[(0,Z.jsx)(m.Z.Item,{hidden:!T,name:"from",children:(0,Z.jsx)(s.pK,{filter:ce})}),(0,Z.jsx)(_.ZL,{address:D,chain:B,className:"free-balance",label:ae("Available balance:"),onBalanceReady:Y}),(0,Z.jsx)(m.Z.Item,{children:(0,Z.jsxs)(s.oB,{className:"claim-reward-meta-info",hasBackgroundWrapper:!0,children:[(0,Z.jsx)(s.oB.Chain,{chain:B,label:ae("Network")}),(null==z?void 0:z.unclaimedReward)&&(0,Z.jsx)(s.oB.Number,{decimals:Q,label:ae("Reward claiming"),suffix:G,value:z.unclaimedReward})]})}),L===t.WQ.POOLED&&(0,Z.jsx)(m.Z.Item,{name:N.BOND_REWARD,valuePropName:"checked",children:(0,Z.jsx)(k.Z,{children:(0,Z.jsx)("span",{className:"__option-label",children:ae("Bond reward after claim")})})})]})})}),(0,Z.jsxs)(_.Xd,{errors:[],warnings:[],children:[(0,Z.jsx)(f.Z,{disabled:$,icon:(0,Z.jsx)(h.Z,{phosphorIcon:y.Z,weight:"fill"}),onClick:ie,schema:"secondary",children:ae("Cancel")}),(0,Z.jsx)(f.Z,{disabled:U||!J,icon:(0,Z.jsx)(h.Z,{phosphorIcon:g.Z,weight:"fill"}),loading:$,onClick:le(ee.submit),children:ae("Continue")})]})]})})).withConfig({displayName:"ClaimReward",componentId:"sc-1xc3rai-0"})((({theme:{token:e}})=>({".unstaked-field, .free-balance":{marginBottom:e.marginXS},".meta-info":{marginTop:e.paddingSM},".cancel-unstake-info-item > .__col":{flex:"initial",paddingRight:e.paddingXXS},".claim-reward-meta-info":{marginTop:e.marginXXS},".ant-checkbox-wrapper":{display:"flex",alignItems:"center",".ant-checkbox":{top:0}}})))},58584:(e,n,r)=>{r.d(n,{Z:()=>c});var t=r(2784),i=r(21890),o=r(76712),a=new Map;a.set("bold",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),a.set("duotone",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",opacity:"0.2"}),t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),a.set("fill",(function(){return t.createElement(t.Fragment,null,t.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.2,104.2,0,0,0,128,24Zm47.4,107.1a8.7,8.7,0,0,1-1.8,2.6l-33.9,33.9a7.6,7.6,0,0,1-5.6,2.3,7.8,7.8,0,0,1-5.7-2.3,8,8,0,0,1,0-11.3L148.7,136H88a8,8,0,0,1,0-16h60.7L128.4,99.7a8,8,0,0,1,11.3-11.3l33.9,33.9a8.7,8.7,0,0,1,1.8,2.6A8.3,8.3,0,0,1,175.4,131.1Z"}))})),a.set("light",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),a.set("thin",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),a.set("regular",(function(e){return t.createElement(t.Fragment,null,t.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),t.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),t.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var s=function(e,n){return(0,i._)(e,n,a)},l=(0,t.forwardRef)((function(e,n){return t.createElement(o.Z,Object.assign({ref:n},e,{renderPath:s}))}));l.displayName="ArrowCircleRight";const c=l}}]);