"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[6917],{16917:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var o=n(18906),l=n(53101),a=n(76412),i=n(61224),c=n(53483),s=n(47088),r=n(92936),u=n(11383),d=n(12162),p=n(90809),h=n(99656),g=n(17446),C=n(90727),b=n(77180),f=n(59513),m=n(55436),k=n(12574),w=n(39359),A=n(2784),M=n(96217),y=n(35185),B=n(73557),v=n(38338),T=n(68774),E=n(52322);function j(e){const t=e.accountAuthType;return"evm"===t?e.isAllowedMap?Object.entries(e.isAllowedMap).filter((([e,t])=>t&&(0,T.u)(e))).length:0:"substrate"===t?e.isAllowedMap?Object.entries(e.isAllowedMap).filter((([e,t])=>t&&!(0,T.u)(e))).length:0:Object.values(e.isAllowedMap).filter((e=>e)).length}const x="actionModalId",S="manage-website-access-filter-id";var Z=function(e){return e.SUBSTRATE="substrate",e.ETHEREUM="ethereum",e.BLOCKED="blocked",e.Connected="connected",e}(Z||{});const _=(0,v.ZP)((function({className:e=""}){const t=(0,y.v9)((e=>e.settings.authUrls)),{activeModal:n,inactiveModal:T}=(0,A.useContext)(d.t),{t:_}=(0,M.$)(),D=(0,B.s0)(),I=(0,s.Z)().goBack,{token:N}=(0,v.Fg)(),{filterSelectionMap:O,onApplyFilter:F,onChangeFilterOption:R,onCloseFilterModal:U,selectedFilters:L}=(0,c.R)(S),W=(0,A.useMemo)((()=>e=>{if(!L.length)return!0;for(const t of L)if(t===Z.SUBSTRATE){if("substrate"===e.accountAuthType||"both"===e.accountAuthType)return!0}else if(t===Z.ETHEREUM){if("evm"===e.accountAuthType||"both"===e.accountAuthType)return!0}else if(t===Z.BLOCKED){if(!e.isAllowed)return!0}else if(t===Z.Connected&&e.isAllowed)return!0;return!1}),[L]),Y=(0,A.useCallback)((()=>{n(S)}),[n]),z=(0,A.useMemo)((()=>[{label:"Substrate DApp",value:Z.SUBSTRATE},{label:"Ethereum DApp",value:Z.ETHEREUM},{label:"Blocked DApp",value:Z.BLOCKED},{label:"Connected DApp",value:Z.Connected}]),[]),H=(0,A.useMemo)((()=>function(e){return Object.values(e)}(t)),[t]),K=(0,A.useCallback)((()=>{n(x)}),[n]),P=(0,A.useCallback)((()=>{T(x)}),[T]),$=(0,A.useMemo)((()=>[{key:"forget-all",icon:C.Z,iconBackgroundColor:N.colorWarning,title:_("Forget all"),onClick:()=>{(0,r.jO)(u.NY).catch(console.error),P()}},{key:"disconnect-all",icon:b.Z,iconBackgroundColor:N["gray-3"],title:_("Disconnect all"),onClick:()=>{(0,r.Io)(!1,u.NY).catch(console.error),P()}},{key:"connect-all",icon:f.Z,iconBackgroundColor:N["green-6"],title:_("Connect all"),onClick:()=>{(0,r.Io)(!0,u.NY).catch(console.error),P()}}]),[P,_,N]),V=(0,A.useCallback)((e=>()=>{D("/settings/dapp-access-edit",{state:{siteName:e.origin,origin:e.id,accountAuthType:e.accountAuthType||""}})}),[D]),X=(0,A.useCallback)((e=>(0,E.jsx)(i.M,{accountCount:j(e),className:"__item",domain:e.id,onClick:V(e),siteName:e.origin||e.id},e.id)),[V]),q=(0,A.useCallback)((()=>(0,E.jsx)(l.Z,{emptyMessage:_("Your list of approved dApps will appear here."),emptyTitle:_("No dApps found"),phosphorIcon:m.Z})),[_]),G=(0,A.useCallback)(((e,t)=>{var n,o;const l=t.toLowerCase();return(null===(n=e.origin)||void 0===n?void 0:n.toLowerCase().includes(l))||(null===(o=e.id)||void 0===o?void 0:o.toLowerCase().includes(l))}),[]);return(0,E.jsxs)(o.FE,{className:`manage-website-access ${e}`,children:[(0,E.jsx)(p.Z,{background:"transparent",center:!0,onBack:I,paddingVertical:!0,rightButtons:[{icon:(0,E.jsx)(h.Z,{customSize:"24px",phosphorIcon:k.Z,type:"phosphor",weight:"bold"}),onClick:K}],showBackButton:!0,title:_("Manage website access")}),(0,E.jsx)(g.Z.Section,{actionBtnIcon:(0,E.jsx)(h.Z,{phosphorIcon:w.Z}),enableSearchInput:!0,filterBy:W,list:H,onClickActionBtn:Y,renderItem:X,renderWhenEmpty:q,searchFunction:G,searchMinCharactersCount:2,searchPlaceholder:_("Search website"),showActionBtn:!0}),(0,E.jsx)(a.W,{actions:$,id:x,onCancel:P,title:_("Website access config")}),(0,E.jsx)(o.Dd,{id:S,onApplyFilter:F,onCancel:U,onChangeOption:R,optionSelectionMap:O,options:z})]})})).withConfig({displayName:"ManageWebsiteAccess",componentId:"sc-mezssz-0"})((({theme:{token:e}})=>({height:"100%",backgroundColor:e.colorBgDefault,display:"flex",flexDirection:"column",".ant-sw-list-section":{paddingTop:e.padding,flex:1,marginBottom:e.margin},".ant-sw-list-section .ant-sw-list":{paddingBottom:0},".__item + .__item":{marginTop:e.marginXS}})))}}]);