"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[425],{40425:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var r=n(38014),o=n(53334),i=n(33283),s=n(92936),a=n(95798),l=n(99656),c=n(12798),d=n(19201),u=n(25356),m=n(92280),p=n(74704),g=n(72779),h=n.n(g),f=n(58584),x=n(75720),k=n(5373),y=n(2784),j=n(21427),S=n(35185),w=n(38338),E=n(80118),L=n(95023),v=n(52322);const Z=(0,w.ZP)((e=>{const{accounts:t,className:n}=e,{t:r}=(0,j.$)();return(0,v.jsxs)("div",{className:h()(n),children:[(0,v.jsx)("div",{className:"page-icon",children:(0,v.jsx)(L.Z,{color:"var(--page-icon-color)",iconProps:{weight:"fill",phosphorIcon:x.Z}})}),(0,v.jsx)("div",{className:"title",children:r("All done!")}),(0,v.jsx)("div",{className:"description",children:r("You have successfully updated master password to all accounts")}),(0,v.jsxs)("div",{className:"account-container",children:[t.slice(0,2).map((e=>(0,v.jsx)(E.Z,{accountName:e.name,address:e.address,avatarSize:24,genesisHash:e.genesisHash,isSelected:!0},e.address))),t.length>2&&(0,v.jsxs)("div",{className:"and-more",children:[(0,v.jsx)("span",{children:"And other "}),(0,v.jsx)("span",{className:"highlight",children:String(t.length-2).padStart(2,"0")}),(0,v.jsx)("span",{children:" accounts"})]})]})]})})).withConfig({displayName:"Done__MigrateDone",componentId:"sc-1spq2zl-0"})((({theme:{token:e}})=>({padding:`0 ${e.padding}px`,textAlign:"center",".page-icon":{display:"flex",justifyContent:"center",marginTop:e.margin,marginBottom:e.margin,"--page-icon-color":e.colorSecondary},".title":{marginTop:e.margin,marginBottom:e.margin,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading3,lineHeight:e.lineHeightHeading3,color:e.colorText},".description":{padding:`0 ${e.controlHeightLG-e.padding}px`,marginTop:e.margin,marginBottom:2*e.margin,fontSize:e.fontSizeHeading5,lineHeight:e.lineHeightHeading5,color:e.colorTextDescription,textAlign:"center"},".account-container":{display:"flex",flexDirection:"column",gap:e.sizeXS},".and-more":{fontSize:e.fontSizeHeading5,lineHeight:e.lineHeightHeading5,color:e.colorTextDescription,".highlight":{color:e.colorTextBase}}})));var H=n(70066);const W=(0,w.ZP)((e=>{const{className:t}=e,{t:n}=(0,j.$)();return(0,v.jsxs)("div",{className:h()(t),children:[(0,v.jsx)("div",{className:"page-icon",children:(0,v.jsx)(L.Z,{color:"var(--page-icon-color)",iconProps:{weight:"fill",phosphorIcon:H.Z}})}),(0,v.jsx)("div",{className:"title",children:n("Apply master password")}),(0,v.jsx)("div",{className:"description",children:n("Master password created successfully. Please apply the master password to your existing accounts")})]})})).withConfig({displayName:"Introduction__IntroductionMigratePassword",componentId:"sc-1tlgtpi-0"})((({theme:{token:e}})=>({padding:`0 ${e.padding}px`,textAlign:"center",".page-icon":{display:"flex",justifyContent:"center",marginTop:e.margin,"--page-icon-color":e.colorSecondary},".title":{marginTop:e.margin,marginBottom:e.margin,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeHeading3,lineHeight:e.lineHeightHeading3,color:e.colorText},".description":{padding:`0 ${e.controlHeightLG-e.padding}px`,fontSize:e.fontSizeHeading5,lineHeight:e.lineHeightHeading5,color:e.colorTextDescription,textAlign:"center"},".form-item-no-error":{".ant-form-item-explain":{display:"none"}}})));var A;!function(e){e.PASSWORD="password"}(A||(A={}));const M=(0,v.jsx)(l.Z,{phosphorIcon:f.Z,weight:"fill"}),b=(0,v.jsx)(l.Z,{phosphorIcon:x.Z,weight:"fill"}),I=(0,v.jsx)(l.Z,{phosphorIcon:k.Z}),N="migrate-password-form",T=`${N}_${A.PASSWORD}`,C=()=>{setTimeout((()=>{const e=document.getElementById(T);e&&e.select()}),10)},D=(0,w.ZP)((e=>{const{className:t}=e,{t:n}=(0,j.$)(),{goHome:l}=(0,i.yu)(),g=(0,i.lm)(),{token:f}=(0,w.Fg)(),x=(0,i.ZR)(),{accounts:k}=(0,S.v9)((e=>e.accountState)),[E,L]=(0,y.useState)("Introduction"),[H]=c.Z.useForm(),[D,P]=(0,y.useState)(void 0),[F,z]=(0,y.useState)(!0),[B,R]=(0,y.useState)(!1),[$,_]=(0,y.useState)(!1),[O,X]=(0,y.useState)(!1),q=(0,y.useRef)(k.filter((e=>e.address!==r.Tt&&!e.isExternal&&e.isMasterPassword))),G=(0,y.useMemo)((()=>{const e=q.current,t=k.filter((e=>e.address!==r.Tt&&!e.isExternal&&e.isMasterPassword)),n=(o=t,e.filter((e=>o.find((t=>t.address===e.address)))));var o;return q.current=n,n}),[k]),V=(0,y.useMemo)((()=>k.filter((e=>e.address!==r.Tt&&!e.isExternal)).filter((e=>!G.find((t=>t.address===e.address))))),[k,G]),Y=(0,y.useMemo)((()=>V.filter((e=>!e.isMasterPassword))),[V]),J=(0,y.useCallback)((()=>{"Migrate"===E?L("Introduction"):l()}),[l,E]),K=(0,y.useCallback)(((e,t)=>{const{empty:n,error:r}=(0,a.ij)(t);z(r||n)}),[]),Q=(0,y.useCallback)((e=>{const t=e[A.PASSWORD];null!=D&&D.address&&t&&(_(!0),setTimeout((()=>{(0,s.kT)({address:D.address,password:t}).then((e=>{null!=e&&e.status?R(!1):(H.setFields([{name:A.PASSWORD,errors:[e.errors[0]]}]),C(),R(!0))})).catch((e=>{R(!0),H.setFields([{name:A.PASSWORD,errors:[e.message]}]),C()})).finally((()=>{_(!1)}))}),500))}),[null==D?void 0:D.address,H]),U=(0,y.useMemo)((()=>{const e=V.length-Y.length;switch(E){case"Introduction":return n("Apply master password");case"Done":return n("Successful");case"Migrate":return`${String(e+1).padStart(2,"0")}/${String(V.length).padStart(2,"0")}`;default:return""}}),[n,E,Y.length,V.length]),ee=(0,y.useMemo)((()=>{switch(E){case"Introduction":return{children:n("Apply master password now"),onClick:()=>{L(Y.length?"Migrate":"Done")},icon:M};case"Done":return{children:n("Finish"),onClick:()=>{l()},icon:b};case"Migrate":return{children:n("Next"),onClick:()=>{H.submit()},icon:M}}}),[H,l,Y.length,E,n]),te=(0,y.useCallback)((()=>{null!=D&&D.address&&x().then((()=>{X(!0),setTimeout((()=>{(0,s.a1)(D.address).then((()=>{R(!1)})).catch((e=>{g({message:e.message,type:"error"})})).finally((()=>{X(!1)}))}),500)})).catch((e=>{e&&g({message:e.message,type:"error"})}))}),[null==D?void 0:D.address,x,g]);return(0,y.useEffect)((()=>{L((e=>"Introduction"!==e?Y.length?"Migrate":"Done":"Introduction"))}),[Y.length,O]),(0,y.useEffect)((()=>{"Migrate"===E?(P((e=>{if(O)return e;if(e){const t=Y.find((t=>t.address===e.address));return H.resetFields(),z(!0),t?e:Y[0]}return H.resetFields(),z(!0),Y[0]})),setTimeout((()=>{const e=document.getElementById(T);e&&e.focus()}),10)):(R(!1),H.resetFields(),z(!0))}),[H,Y,O,E]),(0,v.jsx)(o.FE,{animateOnce:!0,className:h()(t),children:(0,v.jsxs)(o.Ar.WithSubHeaderOnly,{disableBack:$,onBack:J,rightFooterButton:{...ee,disabled:"Migrate"===E&&(F||O),loading:"Migrate"===E&&$},showBackButton:"Introduction"!==E,subHeaderLeft:"Done"===E&&(0,v.jsx)(o.Tw,{}),title:U,children:["Introduction"===E&&(0,v.jsx)(W,{}),"Done"===E&&(0,v.jsx)(Z,{accounts:V}),"Migrate"===E&&D&&(0,v.jsxs)("div",{className:"body-container",children:[(0,v.jsx)("div",{className:"account-avatar",children:(0,v.jsx)(p.Z,{size:4*f.sizeLG,theme:"ethereum"===D.type?"ethereum":"polkadot",value:D.address})}),(0,v.jsxs)(c.Z,{form:H,initialValues:{[A.PASSWORD]:""},name:N,onFieldsChange:K,onFinish:Q,children:[(0,v.jsx)(c.Z.Item,{children:(0,v.jsx)(d.Z,{content:D.name||"",label:n("Account name"),placeholder:n("Account name")})}),(0,v.jsx)(c.Z.Item,{children:(0,v.jsx)(d.Z,{content:(0,a.pC)(D.address||"",15,17),label:n("Account address"),placeholder:n("Account address")})}),(0,v.jsx)(c.Z.Item,{name:A.PASSWORD,rules:[{message:"Current password is required",required:!0}],statusHelpAsTooltip:!0,children:(0,v.jsx)(u.Z,{label:n("Current password"),type:"password"})}),B&&(0,v.jsx)(c.Z.Item,{className:"form-item-button",children:(0,v.jsx)(m.Z,{icon:I,loading:O,onClick:te,size:"xs",type:"ghost",children:n("Remove this account")})})]})]})]})})})).withConfig({displayName:"ApplyMasterPassword",componentId:"sc-dm26e8-0"})((({theme:{token:e}})=>({".body-container":{padding:`0 ${e.padding}px`,".account-avatar":{marginTop:e.margin,marginBottom:2*e.margin,display:"flex",flexDirection:"row",justifyContent:"center"},".ant-field-content-wrapper":{".ant-field-content":{color:e.colorTextDescription}},".ant-form-item":{marginBottom:e.marginXS},".form-item-no-error":{".ant-form-item-explain":{display:"none"}},".form-item-button":{paddingTop:e.marginXXS,marginBottom:0,".ant-form-item-control-input-content":{display:"flex",flexDirection:"row",justifyContent:"center"}}}})))},58584:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(2784),o=n(21890),i=n(76712),s=new Map;s.set("bold",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),s.set("duotone",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",opacity:"0.2"}),r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),s.set("fill",(function(){return r.createElement(r.Fragment,null,r.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.2,104.2,0,0,0,128,24Zm47.4,107.1a8.7,8.7,0,0,1-1.8,2.6l-33.9,33.9a7.6,7.6,0,0,1-5.6,2.3,7.8,7.8,0,0,1-5.7-2.3,8,8,0,0,1,0-11.3L148.7,136H88a8,8,0,0,1,0-16h60.7L128.4,99.7a8,8,0,0,1,11.3-11.3l33.9,33.9a8.7,8.7,0,0,1,1.8,2.6A8.3,8.3,0,0,1,175.4,131.1Z"}))})),s.set("light",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),s.set("thin",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),s.set("regular",(function(e){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),r.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),r.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var a=function(e,t){return(0,o._)(e,t,s)},l=(0,r.forwardRef)((function(e,t){return r.createElement(i.Z,Object.assign({ref:t},e,{renderPath:a}))}));l.displayName="ArrowCircleRight";const c=l}}]);