"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner=("undefined"!=typeof self?self:this).webpackChunk_subwallet_web_runner||[]).push([[7043],{17043:(e,n,t)=>{t.r(n),t.d(n,{default:()=>F});var o,r=t(56858),i=t(25601),s=t(75576),l=t(33283),a=t(92936),c=t(95798),d=t(12798),u=t(19138),m=t(99338),f=t(92280),h=t(99656),k=t(72779),p=t.n(k),x=t(58584),w=t(2784),j=t(21427),y=t(73557),g=t(38338),L=t(61162),v=t(68774),b=t(52274),E=t(94684),I=t(55446),C=t(52322);!function(e){e.TO="to"}(o||(o={}));const _={collectionId:"unknown",chain:"unknown"},W={collectionId:"unknown",chain:"unknown",owner:"unknown",id:"unknown"},Z=({modalContent:e=!1,nftDetail:n=W})=>{var t,o;const{t:s}=(0,j.$)(),k=(0,y.s0)(),{chain:g="",collectionId:Z,itemId:F,owner:N=""}=(0,y.UO)(),{chainInfoMap:S}=(0,l.v9)((e=>e.chainStore)),{nftCollections:A,nftItems:M}=(0,l.v9)((e=>e.nft)),{accounts:P}=(0,l.v9)((e=>e.accountState)),[T,H]=(0,w.useState)(!0),R=(0,w.useMemo)((()=>e?{nftChain:n.chain,collectionId:n.collectionId,itemId:n.id,owner:n.owner}:{nftChain:g,collectionId:Z,itemId:F,owner:N}),[Z,F,g,N,e,n]),D=(0,w.useMemo)((()=>{const{collectionId:e,itemId:n,nftChain:t,owner:o}=R;return M.find((i=>(0,r.Wr)(i.owner,o)&&t===i.chain&&i.collectionId===e&&i.id===n))||W}),[R,M]),O=(0,w.useMemo)((()=>{const{collectionId:e,nftChain:n}=R;return A.find((t=>n===t.chain&&t.collectionId===e))||_}),[R,A]),B=(0,w.useMemo)((()=>S[R.nftChain]),[S,R]),G=(0,l.xo)(R.nftChain),U=(null===(t=S[R.nftChain])||void 0===t||null===(o=t.substrateInfo)||void 0===o?void 0:o.genesisHash)||"",{chain:J,from:K,onDone:V,setChain:X,setFrom:Y}=(0,w.useContext)(I.TransactionContext),{onError:q,onSuccess:$}=(0,l.Ls)(V),[z]=d.Z.useForm(),Q=(0,w.useMemo)((()=>({from:K,chain:J,to:""})),[J,K]),[ee,ne]=(0,w.useState)(!0),[te,oe]=(0,w.useState)(!1),re=(0,w.useCallback)((({getFieldValue:e})=>({validator:(e,n)=>{if(!n)return Promise.reject(s("The recipient address is required"));if(!(0,L.U)(n))return Promise.reject(s("Invalid recipient address"));if((0,r.Wr)(n,K))return Promise.reject(s("The recipient address can not be the same as the sender address"));if((0,v.u)(n)!==(0,v.u)(K)){const e=(0,v.u)(K)?s("Receive address must be of evm account."):s("Receive address must be of substrate account.");return Promise.reject(e)}const t=(0,c.Jd)(P,n);if(t&&t.isHardware){var o;const e=S[J];if(t.originGenesisHash!==(null==e||null===(o=e.substrateInfo)||void 0===o?void 0:o.genesisHash)){const n=(null==e?void 0:e.name)||"Unknown";return Promise.reject(s("Wrong network. Your Ledger account is not supported by {{network}}. Please choose another receiving account and try again.",{replace:{network:n}}))}}return Promise.resolve()}})),[K,P,s,S,J]),ie=(0,w.useCallback)(((e,n)=>{const{error:t}=(0,c.ij)(n);ne(t)}),[]),se=(0,w.useCallback)((e=>{const n=(0,v.u)(K),{to:t}=e,o=(0,b.bO)(D,J);let r;r=n?(0,a.Y5)({senderAddress:K,networkKey:J,recipientAddress:t,nftItemName:null==D?void 0:D.name,params:o,nftItem:D}):(0,a.GW)({networkKey:J,recipientAddress:t,senderAddress:K,nftItemName:null==D?void 0:D.name,params:o,nftItem:D}),oe(!0),setTimeout((()=>{r.then($).catch(q).finally((()=>{oe(!1)}))}),300)}),[J,K,D,q,$]),le=(0,l.Ey)(K);return(0,w.useEffect)((()=>{X(R.nftChain),Y(R.owner)}),[R,X,Y]),(0,w.useEffect)((()=>{D!==W&&O!==_||k("/home/nfts/collections")}),[O,k,D]),(0,l.uy)(z,"to"),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(E.tc,{className:p()("-transaction-content"),children:[(0,C.jsxs)("div",{className:p()("nft_item_detail text-center",{"__modal-ui":e}),children:[(0,C.jsx)(u.Z,{height:e?180:120,src:D.image}),(0,C.jsx)(m.Z.Title,{level:5,children:D.name})]}),(0,C.jsxs)(d.Z,{className:p()("form-container form-space-sm",{"__modal-ui":e}),form:z,initialValues:Q,onFieldsChange:ie,onFinish:se,children:[(0,C.jsx)(d.Z.Item,{name:"to",rules:[re],statusHelpAsTooltip:!0,children:(0,C.jsx)(i.Jg,{addressPrefix:G,label:s("Send to"),networkGenesisHash:U,placeholder:s("Account address"),saveAddress:!0,showAddressBook:!0,showScanner:!0})}),(0,C.jsx)(d.Z.Item,{children:(0,C.jsx)(i.oT,{disabled:!0,items:B?[{name:B.name,slug:B.slug}]:[],label:s("Network"),value:O.chain})})]}),(0,C.jsx)(E.ZL,{address:K,chain:J,label:s("Sender transferable balance")+":",onBalanceReady:H})]}),(0,C.jsx)(E.Xd,{className:p()("send-nft-transaction-footer",{"__modal-ui":e}),errors:[],warnings:[],children:(0,C.jsx)(f.Z,{disabled:ee||!T,icon:(0,C.jsx)(h.Z,{phosphorIcon:x.Z,weight:"fill"}),loading:te,onClick:le(z.submit),children:s("Next")})})]})},F=(0,g.ZP)((e=>{const{className:n}=e,t=(0,w.useContext)(s.R0);return(0,C.jsx)(i.FE,{className:n,resolve:t.awaitStores(["nft"]),children:(0,C.jsx)(Z,{modalContent:e.modalContent,nftDetail:e.nftDetail})})})).withConfig({displayName:"SendNFT",componentId:"sc-13wb87a-0"})((({theme:{token:e}})=>({flex:1,display:"flex",flexDirection:"column",overflow:"hidden",".nft_item_detail h5":{marginTop:e.marginXS,marginBottom:e.margin},".__modal-ui":{"&.form-container":{display:"flex",flexDirection:"column-reverse"},"&.send-nft-transaction-footer":{"& > .ant-btn":{width:"100%"}},"&.nft_item_detail":{img:{aspectRatio:"1"}}}})))},58584:(e,n,t)=>{t.d(n,{Z:()=>c});var o=t(2784),r=t(21890),i=t(76712),s=new Map;s.set("bold",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),s.set("duotone",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",opacity:"0.2"}),o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),s.set("fill",(function(){return o.createElement(o.Fragment,null,o.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.2,104.2,0,0,0,128,24Zm47.4,107.1a8.7,8.7,0,0,1-1.8,2.6l-33.9,33.9a7.6,7.6,0,0,1-5.6,2.3,7.8,7.8,0,0,1-5.7-2.3,8,8,0,0,1,0-11.3L148.7,136H88a8,8,0,0,1,0-16h60.7L128.4,99.7a8,8,0,0,1,11.3-11.3l33.9,33.9a8.7,8.7,0,0,1,1.8,2.6A8.3,8.3,0,0,1,175.4,131.1Z"}))})),s.set("light",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),s.set("thin",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),s.set("regular",(function(e){return o.createElement(o.Fragment,null,o.createElement("circle",{cx:"128",cy:"128",r:"96",fill:"none",stroke:e,strokeMiterlimit:"10",strokeWidth:"16"}),o.createElement("polyline",{points:"134.1 161.9 168 128 134.1 94.1",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),o.createElement("line",{x1:"88",y1:"128",x2:"168",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var l=function(e,n){return(0,r._)(e,n,s)},a=(0,o.forwardRef)((function(e,n){return o.createElement(i.Z,Object.assign({ref:n},e,{renderPath:l}))}));a.displayName="ArrowCircleRight";const c=a}}]);